{"version":3,"file":"static/js/318.e1f472a8.chunk.js","mappings":"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","sources":["../../core/src/asset-graph/AssetEdges.tsx","../../core/src/asset-graph/AssetGraphJobSidebar.tsx","../../core/src/assets/LastMaterializationMetadata.tsx","../../core/src/assets/AssetSidebarActivitySummary.tsx","../../core/src/asset-graph/SidebarAssetInfo.tsx","../../core/src/asset-graph/useFindAssetLocation.tsx","../../core/src/asset-graph/AssetGraphExplorer.tsx","../../core/src/asset-graph/AssetGroupNode.tsx","../../core/src/ui/markdownToPlaintext.ts","../../core/src/asset-graph/AssetNode.tsx","../../core/src/asset-graph/AssetRunLinking.tsx","../../core/src/asset-graph/ForeignNode.tsx","../../core/src/asset-graph/useAssetGraphData.tsx","../../core/src/asset-graph/useLiveDataForAssetKeys.tsx","../../core/src/assets/AssetConfig.tsx","../../core/src/assets/AssetDefinedInMultipleReposNotice.tsx","../../core/src/assets/AssetEventList.tsx","../../core/src/assets/AssetEventSystemTags.tsx","../../core/src/assets/AssetLineageElements.tsx","../../core/src/assets/AssetMaterializationGraphs.tsx","../../core/src/assets/AssetMetadata.tsx","../../core/src/assets/AssetNodePartitionCounts.tsx","../../core/src/assets/AssetPartitionList.tsx","../../core/src/assets/CurrentMinutesLateTag.tsx","../../core/src/assets/CurrentRunsBanner.tsx","../../core/src/assets/DependsOnSelfBanner.tsx","../../core/src/assets/FailedRunSinceMaterializationBanner.tsx","../../ui/src/components/Radio.tsx","../../core/src/assets/RunningBackfillsNotice.tsx","../../core/src/assets/LaunchAssetChoosePartitionsDialog.tsx","../../core/src/assets/LaunchAssetExecutionButton.tsx","../../core/src/assets/LaunchAssetObservationButton.tsx","../../core/src/assets/PartitionHealthSummary.tsx","../../core/src/assets/Stale.tsx","../../core/src/assets/groupByPartition.tsx","../../core/src/hooks/useSetStateUpdateCallback.tsx","../../core/src/assets/usePartitionDimensionSelections.tsx","../../core/src/assets/useRecentAssetEvents.tsx","../../core/src/launchpad/ConfigEditorConfigPicker.tsx","../../ui/src/components/ConfigEditorWithSchema.tsx","../../core/src/launchpad/LaunchpadTransientSessionContainer.tsx","../../core/src/launchpad/LaunchpadRoot.tsx","../../ui/src/components/configeditor/codemirror-yaml/lint.js","../../ui/src/components/ConfigEditor.tsx","../../ui/src/components/configeditor/isHelpContextEqual.ts","../../ui/src/components/configeditor/ConfigEditorHelp.tsx","../../core/src/configeditor/ConfigEditorUtils.tsx","../../core/src/launchpad/ConfigEditorModePicker.tsx","../../core/src/launchpad/OpSelector.tsx","../../core/src/launchpad/RunPreview.tsx","../../core/src/launchpad/scaffoldType.ts","../../core/src/launchpad/LaunchpadSession.tsx","../../core/src/launchpad/LaunchpadSessionError.tsx","../../core/src/launchpad/LaunchpadSessionLoading.tsx","../../core/src/launchpad/LoadingOverlay.tsx","../../core/src/launchpad/SessionSettingsBar.tsx","../../core/src/launchpad/TagEditor.tsx","../../core/src/partitions/CreatePartitionDialog.tsx","../../ui/src/components/TagSelector.tsx","../../core/src/partitions/DimensionRangeInput.tsx","../../core/src/partitions/DimensionRangeWizard.tsx","../../core/src/pipelines/NonIdealPipelineQueryResult.tsx","../../core/src/pipelines/useJobTitle.tsx","../../core/src/ui/ClearButton.tsx","../../core/src/versions/Version.tsx"],"sourcesContent":["import {Colors} from '@dagster-io/ui';\nimport React from 'react';\n\nimport {buildSVGPath} from './Utils';\nimport {AssetLayoutEdge} from './layout';\n\nexport const AssetEdges: React.FC<{\n  edges: AssetLayoutEdge[];\n  highlighted: string | null;\n  strokeWidth?: number;\n  baseColor?: string;\n}> = ({edges, highlighted, strokeWidth = 4, baseColor = Colors.KeylineGray}) => {\n  // Note: we render the highlighted edges twice, but it's so that the first item with\n  // all the edges in it can remain memoized.\n  return (\n    <React.Fragment>\n      <AssetEdgeSet color={baseColor} edges={edges} strokeWidth={strokeWidth} />\n      <AssetEdgeSet\n        color={Colors.Blue500}\n        edges={edges.filter(({fromId, toId}) => highlighted === fromId || highlighted === toId)}\n        strokeWidth={strokeWidth}\n      />\n    </React.Fragment>\n  );\n};\n\nconst AssetEdgeSet: React.FC<{\n  edges: AssetLayoutEdge[];\n  color: string;\n  strokeWidth: number;\n}> = React.memo(({edges, color, strokeWidth}) => (\n  <>\n    <defs>\n      <marker\n        id={`arrow${btoa(color)}`}\n        viewBox=\"0 0 8 10\"\n        refX=\"1\"\n        refY=\"5\"\n        markerUnits=\"strokeWidth\"\n        markerWidth={strokeWidth}\n        orient=\"auto\"\n      >\n        <path d=\"M 0 0 L 8 5 L 0 10 z\" fill={color} />\n      </marker>\n    </defs>\n    {edges.map((edge, idx) => (\n      <path\n        key={idx}\n        d={buildSVGPath({source: edge.from, target: edge.to})}\n        stroke={color}\n        strokeWidth={strokeWidth}\n        fill=\"none\"\n        markerEnd={`url(#arrow${btoa(color)})`}\n      />\n    ))}\n  </>\n));\n","import {gql, useQuery} from '@apollo/client';\nimport * as React from 'react';\n\nimport {PYTHON_ERROR_FRAGMENT} from '../app/PythonErrorFragment';\nimport {PipelineSelector} from '../graphql/types';\nimport {NonIdealPipelineQueryResult} from '../pipelines/NonIdealPipelineQueryResult';\nimport {\n  SidebarContainerOverview,\n  SIDEBAR_ROOT_CONTAINER_FRAGMENT,\n} from '../pipelines/SidebarContainerOverview';\nimport {Loading} from '../ui/Loading';\nimport {buildRepoAddress} from '../workspace/buildRepoAddress';\n\nimport {\n  AssetGraphSidebarQuery,\n  AssetGraphSidebarQueryVariables,\n} from './types/AssetGraphJobSidebar.types';\n\nexport const AssetGraphJobSidebar: React.FC<{\n  pipelineSelector: PipelineSelector;\n}> = ({pipelineSelector}) => {\n  const queryResult = useQuery<AssetGraphSidebarQuery, AssetGraphSidebarQueryVariables>(\n    ASSET_GRAPH_JOB_SIDEBAR,\n    {\n      partialRefetch: true,\n      variables: {pipelineSelector},\n    },\n  );\n\n  const {repositoryName, repositoryLocationName} = pipelineSelector;\n  const repoAddress = buildRepoAddress(repositoryName, repositoryLocationName);\n\n  return (\n    <Loading queryResult={queryResult}>\n      {({pipelineSnapshotOrError}) => {\n        if (pipelineSnapshotOrError.__typename !== 'PipelineSnapshot') {\n          return (\n            <NonIdealPipelineQueryResult\n              isGraph\n              result={pipelineSnapshotOrError}\n              repoAddress={repoAddress}\n            />\n          );\n        }\n        return (\n          <SidebarContainerOverview container={pipelineSnapshotOrError} repoAddress={repoAddress} />\n        );\n      }}\n    </Loading>\n  );\n};\n\nconst ASSET_GRAPH_JOB_SIDEBAR = gql`\n  query AssetGraphSidebarQuery($pipelineSelector: PipelineSelector!) {\n    pipelineSnapshotOrError(activePipelineSelector: $pipelineSelector) {\n      ... on PipelineSnapshot {\n        id\n        ...SidebarRootContainerFragment\n      }\n      ... on PipelineNotFoundError {\n        message\n      }\n      ... on PipelineSnapshotNotFoundError {\n        message\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ${SIDEBAR_ROOT_CONTAINER_FRAGMENT}\n  ${PYTHON_ERROR_FRAGMENT}\n`;\n","import {gql} from '@apollo/client';\nimport {Box, Colors, Group, Icon, Mono, NonIdealState, Table} from '@dagster-io/ui';\nimport * as React from 'react';\nimport {Link} from 'react-router-dom';\nimport styled from 'styled-components/macro';\n\nimport {Timestamp} from '../app/time/Timestamp';\nimport {isHiddenAssetGroupJob, LiveDataForNode} from '../asset-graph/Utils';\nimport {AssetKeyInput} from '../graphql/types';\nimport {METADATA_ENTRY_FRAGMENT, MetadataEntry} from '../metadata/MetadataEntry';\nimport {PipelineReference} from '../pipelines/PipelineReference';\nimport {linkToRunEvent, titleForRun} from '../runs/RunUtils';\nimport {isThisThingAJob, useRepository} from '../workspace/WorkspaceContext';\nimport {buildRepoAddress} from '../workspace/buildRepoAddress';\n\nimport {AssetLineageElements} from './AssetLineageElements';\nimport {StaleReasonsTags} from './Stale';\nimport {LatestMaterializationMetadataFragment} from './types/LastMaterializationMetadata.types';\n\nexport const LatestMaterializationMetadata: React.FC<{\n  assetKey: AssetKeyInput;\n  latest: LatestMaterializationMetadataFragment | undefined;\n  liveData: LiveDataForNode | undefined;\n}> = ({assetKey, latest, liveData}) => {\n  const latestRun = latest?.runOrError.__typename === 'Run' ? latest?.runOrError : null;\n  const repositoryOrigin = latestRun?.repositoryOrigin;\n  const repoAddress = repositoryOrigin\n    ? buildRepoAddress(repositoryOrigin.repositoryName, repositoryOrigin.repositoryLocationName)\n    : null;\n  const repo = useRepository(repoAddress);\n\n  if (!latest) {\n    return (\n      <Box padding={{top: 16, bottom: 32}}>\n        <NonIdealState\n          icon=\"materialization\"\n          title=\"No materializations\"\n          description=\"No materializations were found for this asset.\"\n        />\n      </Box>\n    );\n  }\n\n  const latestEvent = latest;\n  const latestAssetLineage = latestEvent?.assetLineage;\n\n  return (\n    <MetadataTable>\n      <tbody>\n        <tr>\n          <td>Run</td>\n          <td>\n            {latestRun ? (\n              <div>\n                <Box>\n                  {'Run '}\n                  <Link to={`/runs/${latestEvent.runId}?timestamp=${latestEvent.timestamp}`}>\n                    <Mono>{titleForRun({runId: latestEvent.runId})}</Mono>\n                  </Link>\n                </Box>\n                {!isHiddenAssetGroupJob(latestRun.pipelineName) && (\n                  <>\n                    <Box padding={{left: 8, top: 4}}>\n                      <PipelineReference\n                        showIcon\n                        pipelineName={latestRun.pipelineName}\n                        pipelineHrefContext={repoAddress || 'repo-unknown'}\n                        snapshotId={latestRun.pipelineSnapshotId}\n                        isJob={isThisThingAJob(repo, latestRun.pipelineName)}\n                      />\n                    </Box>\n                    <Group direction=\"row\" padding={{left: 8}} spacing={8} alignItems=\"center\">\n                      <Icon name=\"linear_scale\" color={Colors.Gray400} />\n                      <Link to={linkToRunEvent(latestRun, latestEvent)}>{latestEvent.stepKey}</Link>\n                    </Group>\n                  </>\n                )}\n              </div>\n            ) : (\n              'No materialization events'\n            )}\n          </td>\n          <td />\n        </tr>\n        {latest?.partition ? (\n          <tr>\n            <td>Partition</td>\n            <td>{latest ? latest.partition : 'No materialization events'}</td>\n            <td />\n          </tr>\n        ) : null}\n        <tr>\n          <td>Timestamp</td>\n          <td>\n            <Box flex={{gap: 8, alignItems: 'center'}}>\n              {latestEvent ? (\n                <Timestamp timestamp={{ms: Number(latestEvent.timestamp)}} />\n              ) : (\n                'No materialization events'\n              )}\n              {liveData && (\n                <StaleReasonsTags assetKey={assetKey} liveData={liveData} include=\"all\" />\n              )}\n            </Box>\n          </td>\n          <td />\n        </tr>\n        {latestAssetLineage?.length ? (\n          <tr>\n            <td>Parent assets</td>\n            <td>\n              <AssetLineageElements\n                elements={latestAssetLineage}\n                timestamp={latestEvent.timestamp}\n              />\n            </td>\n            <td />\n          </tr>\n        ) : null}\n        {latestEvent?.metadataEntries.map((entry) => (\n          <tr key={`metadata-${entry.label}`}>\n            <td>{entry.label}</td>\n            <td>\n              <MetadataEntry\n                entry={entry}\n                expandSmallValues={true}\n                repoLocation={repoAddress?.location}\n              />\n            </td>\n            <td>{entry.description}</td>\n          </tr>\n        ))}\n      </tbody>\n    </MetadataTable>\n  );\n};\n\nconst MetadataTable = styled(Table)`\n  td:first-child {\n    white-space: nowrap;\n    width: 1px;\n    max-width: 400px;\n    word-break: break-word;\n    overflow: hidden;\n    text-overflow: ellipsis;\n  }\n`;\n\nexport const LATEST_MATERIALIZATION_METADATA_FRAGMENT = gql`\n  fragment LatestMaterializationMetadataFragment on MaterializationEvent {\n    partition\n    tags {\n      key\n      value\n    }\n    runOrError {\n      ... on PipelineRun {\n        id\n        runId\n        mode\n        pipelineName\n        pipelineSnapshotId\n        repositoryOrigin {\n          id\n          repositoryName\n          repositoryLocationName\n        }\n      }\n    }\n    runId\n    timestamp\n    stepKey\n    metadataEntries {\n      ...MetadataEntryFragment\n    }\n    assetLineage {\n      assetKey {\n        path\n      }\n      partitions\n    }\n  }\n\n  ${METADATA_ENTRY_FRAGMENT}\n`;\n","import {Body, Box, Colors, Spinner} from '@dagster-io/ui';\nimport * as React from 'react';\n\nimport {LiveDataForNode} from '../asset-graph/Utils';\nimport {SidebarSection} from '../pipelines/SidebarComponents';\n\nimport {AssetEventSystemTags} from './AssetEventSystemTags';\nimport {AssetMaterializationGraphs} from './AssetMaterializationGraphs';\nimport {CurrentMinutesLateTag, freshnessPolicyDescription} from './CurrentMinutesLateTag';\nimport {CurrentRunsBanner} from './CurrentRunsBanner';\nimport {FailedRunSinceMaterializationBanner} from './FailedRunSinceMaterializationBanner';\nimport {LatestMaterializationMetadata} from './LastMaterializationMetadata';\nimport {useGroupedEvents} from './groupByPartition';\nimport {AssetKey} from './types';\nimport {useRecentAssetEvents} from './useRecentAssetEvents';\n\ninterface Props {\n  assetKey: AssetKey;\n  liveData?: LiveDataForNode;\n\n  // This timestamp is a \"hint\", when it changes this component will refetch\n  // to retrieve new data. Just don't want to poll the entire table query.\n  assetLastMaterializedAt: string | undefined;\n\n  // This is passed in because we need to know whether to default to partition\n  // grouping /before/ loading all the data.\n  assetHasDefinedPartitions: boolean;\n}\n\nexport const AssetSidebarActivitySummary: React.FC<Props> = ({\n  assetKey,\n  assetLastMaterializedAt,\n  assetHasDefinedPartitions,\n  liveData,\n}) => {\n  const {\n    materializations,\n    observations,\n    loadedPartitionKeys,\n    loading,\n    refetch,\n    xAxis,\n  } = useRecentAssetEvents(assetKey, {}, {assetHasDefinedPartitions});\n\n  const grouped = useGroupedEvents(xAxis, materializations, observations, loadedPartitionKeys);\n\n  React.useEffect(() => {\n    refetch();\n  }, [assetLastMaterializedAt, refetch]);\n\n  if (loading) {\n    return (\n      <Box padding={{vertical: 20}}>\n        <Spinner purpose=\"section\" />\n      </Box>\n    );\n  }\n  return (\n    <>\n      {!assetHasDefinedPartitions && (\n        <>\n          <FailedRunSinceMaterializationBanner\n            run={liveData?.runWhichFailedToMaterialize || null}\n            border={{side: 'top', width: 1, color: Colors.KeylineGray}}\n          />\n          <CurrentRunsBanner\n            liveData={liveData}\n            border={{side: 'top', width: 1, color: Colors.KeylineGray}}\n          />\n        </>\n      )}\n\n      {liveData?.freshnessPolicy && (\n        <SidebarSection title=\"Freshness policy\">\n          <Box margin={{horizontal: 24, vertical: 12}} flex={{gap: 12, alignItems: 'center'}}>\n            <CurrentMinutesLateTag liveData={liveData} />\n            <Body>{freshnessPolicyDescription(liveData.freshnessPolicy)}</Body>\n          </Box>\n        </SidebarSection>\n      )}\n\n      <SidebarSection title=\"Materialization in last run\">\n        {materializations[0] ? (\n          <div style={{margin: -1, maxWidth: '100%', overflowX: 'auto'}}>\n            <LatestMaterializationMetadata\n              assetKey={assetKey}\n              latest={materializations[0]}\n              liveData={liveData}\n            />\n          </div>\n        ) : (\n          <Box\n            margin={{horizontal: 24, vertical: 12}}\n            style={{color: Colors.Gray500, fontSize: '0.8rem'}}\n          >\n            No materializations found\n          </Box>\n        )}\n      </SidebarSection>\n      <SidebarSection title=\"Materialization system tags\" collapsedByDefault>\n        {materializations[0] ? (\n          <div style={{margin: -1, maxWidth: '100%', overflowX: 'auto'}}>\n            <AssetEventSystemTags event={materializations[0]} paddingLeft={24} />\n          </div>\n        ) : (\n          <Box\n            margin={{horizontal: 24, vertical: 12}}\n            style={{color: Colors.Gray500, fontSize: '0.8rem'}}\n          >\n            No materializations found\n          </Box>\n        )}\n      </SidebarSection>\n      <SidebarSection title=\"Metadata plots\">\n        <AssetMaterializationGraphs\n          xAxis={xAxis}\n          asSidebarSection\n          groups={grouped}\n          columnCount={1}\n        />\n      </SidebarSection>\n    </>\n  );\n};\n","import {gql, useQuery} from '@apollo/client';\nimport {Box, Colors, ConfigTypeSchema, Icon, Spinner} from '@dagster-io/ui';\nimport * as React from 'react';\nimport {Link} from 'react-router-dom';\nimport styled from 'styled-components/macro';\n\nimport {useFeatureFlags} from '../app/Flags';\nimport {ASSET_NODE_CONFIG_FRAGMENT} from '../assets/AssetConfig';\nimport {AssetDefinedInMultipleReposNotice} from '../assets/AssetDefinedInMultipleReposNotice';\nimport {\n  AssetMetadataTable,\n  ASSET_NODE_OP_METADATA_FRAGMENT,\n  metadataForAssetNode,\n} from '../assets/AssetMetadata';\nimport {AssetSidebarActivitySummary} from '../assets/AssetSidebarActivitySummary';\nimport {DependsOnSelfBanner} from '../assets/DependsOnSelfBanner';\nimport {PartitionHealthSummary} from '../assets/PartitionHealthSummary';\nimport {assetDetailsPathForKey} from '../assets/assetDetailsPathForKey';\nimport {AssetKey} from '../assets/types';\nimport {\n  healthRefreshHintFromLiveData,\n  usePartitionHealthData,\n} from '../assets/usePartitionHealthData';\nimport {DagsterTypeSummary} from '../dagstertype/DagsterType';\nimport {DagsterTypeFragment} from '../dagstertype/types/DagsterType.types';\nimport {METADATA_ENTRY_FRAGMENT} from '../metadata/MetadataEntry';\nimport {Description} from '../pipelines/Description';\nimport {SidebarSection, SidebarTitle} from '../pipelines/SidebarComponents';\nimport {ResourceContainer, ResourceHeader} from '../pipelines/SidebarOpHelpers';\nimport {pluginForMetadata} from '../plugins';\nimport {Version} from '../versions/Version';\nimport {buildRepoAddress} from '../workspace/buildRepoAddress';\nimport {RepoAddress} from '../workspace/types';\nimport {workspacePathFromAddress} from '../workspace/workspacePath';\n\nimport {LiveDataForNode, displayNameForAssetKey, GraphNode, nodeDependsOnSelf} from './Utils';\nimport {SidebarAssetQuery, SidebarAssetQueryVariables} from './types/SidebarAssetInfo.types';\n\nexport const SidebarAssetInfo: React.FC<{\n  assetNode: GraphNode;\n  liveData: LiveDataForNode;\n}> = ({assetNode, liveData}) => {\n  const assetKey = assetNode.assetKey;\n  const partitionHealthRefreshHint = healthRefreshHintFromLiveData(liveData);\n  const partitionHealthData = usePartitionHealthData(\n    [assetKey],\n    partitionHealthRefreshHint,\n    'background',\n  );\n  const {data} = useQuery<SidebarAssetQuery, SidebarAssetQueryVariables>(SIDEBAR_ASSET_QUERY, {\n    variables: {assetKey: {path: assetKey.path}},\n  });\n  const {flagSidebarResources} = useFeatureFlags();\n\n  const {lastMaterialization} = liveData || {};\n  const asset = data?.assetNodeOrError.__typename === 'AssetNode' ? data.assetNodeOrError : null;\n  if (!asset) {\n    return (\n      <>\n        <Header assetKey={assetKey} repoAddress={null} />\n        <Box padding={{vertical: 64}}>\n          <Spinner purpose=\"section\" />\n        </Box>\n      </>\n    );\n  }\n\n  const repoAddress = buildRepoAddress(asset.repository.name, asset.repository.location.name);\n  const {assetMetadata, assetType} = metadataForAssetNode(asset);\n  const hasAssetMetadata = assetType || assetMetadata.length > 0;\n  const assetConfigSchema = asset.configField?.configType;\n\n  const OpMetadataPlugin = asset.op?.metadata && pluginForMetadata(asset.op.metadata);\n\n  return (\n    <>\n      <Header assetKey={assetKey} opName={asset.op?.name} repoAddress={repoAddress} />\n\n      <AssetDefinedInMultipleReposNotice\n        assetKey={assetKey}\n        loadedFromRepo={repoAddress}\n        padded={false}\n      />\n\n      {(asset.description || OpMetadataPlugin?.SidebarComponent || !hasAssetMetadata) && (\n        <SidebarSection title=\"Description\">\n          <Box padding={{vertical: 16, horizontal: 24}}>\n            <Description description={asset.description || 'No description provided.'} />\n          </Box>\n          {asset.op && OpMetadataPlugin?.SidebarComponent && (\n            <Box padding={{bottom: 16, horizontal: 24}}>\n              <OpMetadataPlugin.SidebarComponent definition={asset.op} repoAddress={repoAddress} />\n            </Box>\n          )}\n        </SidebarSection>\n      )}\n\n      <AssetSidebarActivitySummary\n        assetKey={assetKey}\n        assetLastMaterializedAt={lastMaterialization?.timestamp}\n        assetHasDefinedPartitions={!!asset.partitionDefinition}\n        liveData={liveData}\n      />\n\n      <div style={{borderBottom: `2px solid ${Colors.Gray300}`}} />\n\n      {nodeDependsOnSelf(assetNode) && <DependsOnSelfBanner />}\n\n      {asset.opVersion && (\n        <SidebarSection title=\"Code Version\">\n          <Box padding={{vertical: 16, horizontal: 24}}>\n            <Version>{asset.opVersion}</Version>\n          </Box>\n        </SidebarSection>\n      )}\n\n      {assetConfigSchema && (\n        <SidebarSection title=\"Config\">\n          <Box padding={{vertical: 16, horizontal: 24}}>\n            <ConfigTypeSchema\n              type={assetConfigSchema}\n              typesInScope={assetConfigSchema.recursiveConfigTypes}\n            />\n          </Box>\n        </SidebarSection>\n      )}\n\n      {asset.requiredResources.length > 0 && (\n        <SidebarSection title=\"Required Resources\">\n          <Box padding={{vertical: 16, horizontal: 24}}>\n            {asset.requiredResources.map((resource) => (\n              <ResourceContainer key={resource.resourceKey}>\n                <Icon name=\"resource\" color={Colors.Gray700} />\n                {flagSidebarResources && repoAddress ? (\n                  <Link\n                    to={workspacePathFromAddress(repoAddress, `/resources/${resource.resourceKey}`)}\n                  >\n                    <ResourceHeader>{resource.resourceKey}</ResourceHeader>\n                  </Link>\n                ) : (\n                  <ResourceHeader>{resource.resourceKey}</ResourceHeader>\n                )}\n              </ResourceContainer>\n            ))}\n          </Box>\n        </SidebarSection>\n      )}\n\n      {assetMetadata.length > 0 && (\n        <SidebarSection title=\"Metadata\">\n          <AssetMetadataTable assetMetadata={assetMetadata} repoLocation={repoAddress?.location} />\n        </SidebarSection>\n      )}\n\n      {assetType && <TypeSidebarSection assetType={assetType} />}\n\n      {asset.partitionDefinition && (\n        <SidebarSection title=\"Partitions\">\n          <Box padding={{vertical: 16, horizontal: 24}} flex={{direction: 'column', gap: 16}}>\n            <p>{asset.partitionDefinition.description}</p>\n            <PartitionHealthSummary assetKey={asset.assetKey} data={partitionHealthData} />\n          </Box>\n        </SidebarSection>\n      )}\n    </>\n  );\n};\n\nconst TypeSidebarSection: React.FC<{\n  assetType: DagsterTypeFragment;\n}> = ({assetType}) => {\n  return (\n    <SidebarSection title=\"Type\">\n      <DagsterTypeSummary type={assetType} />\n    </SidebarSection>\n  );\n};\n\nconst Header: React.FC<{assetKey: AssetKey; opName?: string; repoAddress?: RepoAddress | null}> = ({\n  assetKey,\n  opName,\n  repoAddress,\n}) => {\n  const displayName = displayNameForAssetKey(assetKey);\n\n  return (\n    <Box flex={{gap: 4, direction: 'column'}} margin={{left: 24, right: 12, vertical: 16}}>\n      <SidebarTitle\n        style={{\n          marginBottom: 0,\n          display: 'flex',\n          justifyContent: 'space-between',\n          flexWrap: 'wrap',\n        }}\n      >\n        <Box>{displayName}</Box>\n        {displayName !== opName ? (\n          <Box style={{opacity: 0.5}} flex={{gap: 6, alignItems: 'center'}}>\n            <Icon name=\"op\" size={16} />\n            {opName}\n          </Box>\n        ) : undefined}\n      </SidebarTitle>\n      <Box flex={{direction: 'row', justifyContent: 'space-between', alignItems: 'center'}}>\n        <AssetCatalogLink to={assetDetailsPathForKey(assetKey)}>\n          {'View in Asset Catalog '}\n          <Icon name=\"open_in_new\" color={Colors.Link} />\n        </AssetCatalogLink>\n        {repoAddress ? (\n          <AssetCatalogLink\n            to={workspacePathFromAddress(repoAddress, `/graphs/${opName}/${displayName}/`)}\n          >\n            {'View Graph '}\n            <Icon name=\"open_in_new\" color={Colors.Link} />\n          </AssetCatalogLink>\n        ) : null}\n      </Box>\n    </Box>\n  );\n};\nconst AssetCatalogLink = styled(Link)`\n  display: flex;\n  gap: 5px;\n  padding: 6px;\n  margin: -6px;\n  align-items: center;\n  white-space: nowrap;\n`;\n\nconst SIDEBAR_ASSET_FRAGMENT = gql`\n  fragment SidebarAssetFragment on AssetNode {\n    id\n    description\n    ...AssetNodeConfigFragment\n    metadataEntries {\n      ...MetadataEntryFragment\n    }\n    partitionDefinition {\n      description\n    }\n    assetKey {\n      path\n    }\n    op {\n      name\n      description\n      metadata {\n        key\n        value\n      }\n    }\n    opVersion\n    repository {\n      id\n      name\n      location {\n        id\n        name\n      }\n    }\n    requiredResources {\n      resourceKey\n    }\n\n    ...AssetNodeOpMetadataFragment\n  }\n\n  ${ASSET_NODE_CONFIG_FRAGMENT}\n  ${METADATA_ENTRY_FRAGMENT}\n  ${ASSET_NODE_OP_METADATA_FRAGMENT}\n`;\n\nconst SIDEBAR_ASSET_QUERY = gql`\n  query SidebarAssetQuery($assetKey: AssetKeyInput!) {\n    assetNodeOrError(assetKey: $assetKey) {\n      __typename\n      ... on AssetNode {\n        id\n        ...SidebarAssetFragment\n      }\n    }\n  }\n\n  ${SIDEBAR_ASSET_FRAGMENT}\n`;\n","import {gql, useApolloClient} from '@apollo/client';\nimport React from 'react';\n\nimport {AssetKey} from '../assets/types';\nimport {AssetKeyInput} from '../graphql/types';\nimport {buildRepoAddress} from '../workspace/buildRepoAddress';\nimport {RepoAddress} from '../workspace/types';\n\nimport {isHiddenAssetGroupJob} from './Utils';\nimport {\n  AssetForNavigationQuery,\n  AssetForNavigationQueryVariables,\n} from './types/useFindAssetLocation.types';\n\nexport interface AssetLocation {\n  assetKey: AssetKey;\n  opNames: string[];\n  jobName: string | null;\n  groupName: string | null;\n  repoAddress: RepoAddress | null;\n}\n\nexport function useFindAssetLocation() {\n  const apollo = useApolloClient();\n\n  return React.useCallback(\n    async (key: AssetKeyInput): Promise<AssetLocation> => {\n      const {data} = await apollo.query<AssetForNavigationQuery, AssetForNavigationQueryVariables>({\n        query: ASSET_FOR_NAVIGATION_QUERY,\n        variables: {key},\n      });\n      if (data?.assetOrError.__typename === 'Asset' && data?.assetOrError.definition) {\n        const def = data.assetOrError.definition;\n        return {\n          assetKey: key,\n          opNames: def.opNames,\n          jobName: def.jobNames.find((jobName) => !isHiddenAssetGroupJob(jobName)) || null,\n          groupName: def.groupName,\n          repoAddress: def.repository\n            ? buildRepoAddress(def.repository.name, def.repository.location.name)\n            : null,\n        };\n      }\n      return {assetKey: key, opNames: [], jobName: null, groupName: null, repoAddress: null};\n    },\n    [apollo],\n  );\n}\n\nconst ASSET_FOR_NAVIGATION_QUERY = gql`\n  query AssetForNavigationQuery($key: AssetKeyInput!) {\n    assetOrError(assetKey: $key) {\n      __typename\n      ... on Asset {\n        id\n        definition {\n          id\n          opNames\n          jobNames\n          groupName\n          repository {\n            id\n            name\n            location {\n              id\n              name\n            }\n          }\n        }\n      }\n    }\n  }\n`;\n","import {\n  Box,\n  Checkbox,\n  Colors,\n  NonIdealState,\n  SplitPanelContainer,\n  ErrorBoundary,\n} from '@dagster-io/ui';\nimport pickBy from 'lodash/pickBy';\nimport uniq from 'lodash/uniq';\nimport without from 'lodash/without';\nimport React from 'react';\nimport styled from 'styled-components/macro';\n\nimport {QueryRefreshCountdown, QueryRefreshState} from '../app/QueryRefresh';\nimport {LaunchAssetExecutionButton} from '../assets/LaunchAssetExecutionButton';\nimport {LaunchAssetObservationButton} from '../assets/LaunchAssetObservationButton';\nimport {AssetKey} from '../assets/types';\nimport {SVGViewport} from '../graph/SVGViewport';\nimport {useAssetLayout} from '../graph/asyncGraphLayout';\nimport {closestNodeInDirection} from '../graph/common';\nimport {\n  GraphExplorerOptions,\n  OptionsOverlay,\n  QueryOverlay,\n  RightInfoPanel,\n  RightInfoPanelContent,\n} from '../pipelines/GraphExplorer';\nimport {\n  EmptyDAGNotice,\n  EntirelyFilteredDAGNotice,\n  LargeDAGNotice,\n  LoadingNotice,\n} from '../pipelines/GraphNotices';\nimport {ExplorerPath} from '../pipelines/PipelinePathUtils';\nimport {GraphQueryInput} from '../ui/GraphQueryInput';\nimport {Loading} from '../ui/Loading';\n\nimport {AssetEdges} from './AssetEdges';\nimport {AssetGraphJobSidebar} from './AssetGraphJobSidebar';\nimport {AssetGroupNode} from './AssetGroupNode';\nimport {AssetNode, AssetNodeMinimal} from './AssetNode';\nimport {AssetNodeLink} from './ForeignNode';\nimport {SidebarAssetInfo} from './SidebarAssetInfo';\nimport {GraphData, graphHasCycles, LiveData, GraphNode, tokenForAssetKey} from './Utils';\nimport {AssetGraphLayout} from './layout';\nimport {AssetNodeForGraphQueryFragment} from './types/useAssetGraphData.types';\nimport {AssetGraphFetchScope, AssetGraphQueryItem, useAssetGraphData} from './useAssetGraphData';\nimport {AssetLocation, useFindAssetLocation} from './useFindAssetLocation';\nimport {useLiveDataForAssetKeys} from './useLiveDataForAssetKeys';\n\ntype AssetNode = AssetNodeForGraphQueryFragment;\n\ninterface Props {\n  options: GraphExplorerOptions;\n  setOptions?: (options: GraphExplorerOptions) => void;\n\n  fetchOptions: AssetGraphFetchScope;\n  fetchOptionFilters?: React.ReactNode;\n\n  explorerPath: ExplorerPath;\n  onChangeExplorerPath: (path: ExplorerPath, mode: 'replace' | 'push') => void;\n  onNavigateToSourceAssetNode: (node: AssetLocation) => void;\n}\n\nexport const MINIMAL_SCALE = 0.6;\nexport const GROUPS_ONLY_SCALE = 0.15;\n\nexport const AssetGraphExplorer: React.FC<Props> = (props) => {\n  const {\n    fetchResult,\n    assetGraphData,\n    graphQueryItems,\n    graphAssetKeys,\n    allAssetKeys,\n    applyingEmptyDefault,\n  } = useAssetGraphData(props.explorerPath.opsQuery, props.fetchOptions);\n\n  const {liveDataByNode, liveDataRefreshState, runWatchers} = useLiveDataForAssetKeys(\n    graphAssetKeys,\n  );\n\n  return (\n    <Loading allowStaleData queryResult={fetchResult}>\n      {() => {\n        if (!assetGraphData || !allAssetKeys) {\n          return <NonIdealState icon=\"error\" title=\"Query Error\" />;\n        }\n\n        const hasCycles = graphHasCycles(assetGraphData);\n\n        if (hasCycles) {\n          return (\n            <NonIdealState\n              icon=\"error\"\n              title=\"Cycle detected\"\n              description=\"Assets dependencies form a cycle\"\n            />\n          );\n        }\n        return (\n          <>\n            <AssetGraphExplorerWithData\n              key={props.explorerPath.pipelineName}\n              assetGraphData={assetGraphData}\n              allAssetKeys={allAssetKeys}\n              graphQueryItems={graphQueryItems}\n              applyingEmptyDefault={applyingEmptyDefault}\n              liveDataRefreshState={liveDataRefreshState}\n              liveDataByNode={liveDataByNode}\n              {...props}\n            />\n            {runWatchers}\n          </>\n        );\n      }}\n    </Loading>\n  );\n};\n\ntype WithDataProps = {\n  allAssetKeys: AssetKey[];\n  assetGraphData: GraphData;\n  graphQueryItems: AssetGraphQueryItem[];\n  liveDataByNode: LiveData;\n  liveDataRefreshState: QueryRefreshState;\n  applyingEmptyDefault: boolean;\n} & Props;\n\nconst AssetGraphExplorerWithData: React.FC<WithDataProps> = ({\n  options,\n  setOptions,\n  explorerPath,\n  onChangeExplorerPath,\n  onNavigateToSourceAssetNode: onNavigateToSourceAssetNode,\n  liveDataRefreshState,\n  liveDataByNode,\n  assetGraphData,\n  graphQueryItems,\n  applyingEmptyDefault,\n  fetchOptions,\n  fetchOptionFilters,\n}) => {\n  const findAssetLocation = useFindAssetLocation();\n  const {layout, loading, async} = useAssetLayout(assetGraphData);\n  const viewportEl = React.useRef<SVGViewport>();\n\n  const [highlighted, setHighlighted] = React.useState<string | null>(null);\n\n  const selectedAssetValues = explorerPath.opNames[explorerPath.opNames.length - 1].split(',');\n  const selectedGraphNodes = Object.values(assetGraphData.nodes).filter((node) =>\n    selectedAssetValues.includes(tokenForAssetKey(node.definition.assetKey)),\n  );\n  const lastSelectedNode = selectedGraphNodes[selectedGraphNodes.length - 1];\n\n  const selectedDefinitions = selectedGraphNodes.map((a) => a.definition);\n  const allDefinitionsForMaterialize = applyingEmptyDefault\n    ? graphQueryItems.map((a) => a.node)\n    : Object.values(assetGraphData.nodes).map((a) => a.definition);\n\n  const onSelectNode = React.useCallback(\n    async (\n      e: React.MouseEvent<any> | React.KeyboardEvent<any>,\n      assetKey: {path: string[]},\n      node: GraphNode | null,\n    ) => {\n      e.stopPropagation();\n\n      const token = tokenForAssetKey(assetKey);\n      const nodeIsInDisplayedGraph = node?.definition;\n\n      if (!nodeIsInDisplayedGraph) {\n        // The asset's definition was not provided in our query for job.assetNodes. It's either\n        // in another job or asset group, or is a source asset not defined in any repository.\n        return onNavigateToSourceAssetNode(await findAssetLocation(assetKey));\n      }\n\n      // This asset is in a job and we can stay in the job graph explorer!\n      // If it's in our current job, allow shift / meta multi-selection.\n      let nextOpsNameSelection = token;\n\n      if (e.shiftKey || e.metaKey) {\n        let tokensToAdd = [token];\n        if (e.shiftKey && lastSelectedNode && node) {\n          const tokensInRange = opsInRange({\n            graph: assetGraphData,\n            from: lastSelectedNode,\n            to: node,\n          });\n          if (tokensInRange.length) {\n            tokensToAdd = tokensInRange;\n          }\n        }\n\n        const existing = explorerPath.opNames[0].split(',');\n        nextOpsNameSelection = (existing.includes(token)\n          ? without(existing, token)\n          : uniq([...existing, ...tokensToAdd])\n        ).join(',');\n      }\n\n      const nextCenter = layout?.nodes[nextOpsNameSelection[nextOpsNameSelection.length - 1]];\n      if (nextCenter) {\n        viewportEl.current?.zoomToSVGCoords(nextCenter.bounds.x, nextCenter.bounds.y, true);\n      }\n\n      onChangeExplorerPath(\n        {\n          ...explorerPath,\n          opNames: [nextOpsNameSelection],\n          opsQuery: nodeIsInDisplayedGraph\n            ? explorerPath.opsQuery\n            : `${explorerPath.opsQuery},++\"${token}\"++`,\n          pipelineName: explorerPath.pipelineName,\n        },\n        'replace',\n      );\n    },\n    [\n      explorerPath,\n      onChangeExplorerPath,\n      onNavigateToSourceAssetNode,\n      findAssetLocation,\n      lastSelectedNode,\n      assetGraphData,\n      layout,\n    ],\n  );\n\n  const [lastRenderedLayout, setLastRenderedLayout] = React.useState<AssetGraphLayout | null>(null);\n  const renderingNewLayout = lastRenderedLayout !== layout;\n\n  React.useEffect(() => {\n    if (!renderingNewLayout || !layout || !viewportEl.current) {\n      return;\n    }\n    // The first render where we have our layout and viewport, autocenter or\n    // focus on the selected node. (If selection was specified in the URL).\n    // Don't animate this change.\n    if (lastSelectedNode) {\n      // viewportEl.current.zoomToSVGBox(layout.nodes[lastSelectedNode.id].bounds, false);\n      viewportEl.current.focus();\n    } else {\n      viewportEl.current.autocenter(false);\n    }\n    setLastRenderedLayout(layout);\n  }, [renderingNewLayout, lastSelectedNode, layout, viewportEl]);\n\n  const onClickBackground = () =>\n    onChangeExplorerPath(\n      {...explorerPath, pipelineName: explorerPath.pipelineName, opNames: []},\n      'replace',\n    );\n\n  const onArrowKeyDown = (e: React.KeyboardEvent<any>, dir: string) => {\n    if (!layout) {\n      return;\n    }\n    const hasDefinition = (node: {id: string}) => !!assetGraphData.nodes[node.id]?.definition;\n    const layoutWithoutExternalLinks = {...layout, nodes: pickBy(layout.nodes, hasDefinition)};\n\n    const nextId = closestNodeInDirection(layoutWithoutExternalLinks, lastSelectedNode.id, dir);\n    const node = nextId && assetGraphData.nodes[nextId];\n    if (node && viewportEl.current) {\n      onSelectNode(e, node.assetKey, node);\n      viewportEl.current.zoomToSVGBox(layout.nodes[nextId].bounds, true);\n    }\n  };\n\n  const allowGroupsOnlyZoomLevel = !!(layout && Object.keys(layout.groups).length);\n\n  return (\n    <SplitPanelContainer\n      identifier=\"explorer\"\n      firstInitialPercent={70}\n      firstMinSize={400}\n      first={\n        <ErrorBoundary region=\"graph\">\n          {graphQueryItems.length === 0 ? (\n            <EmptyDAGNotice nodeType=\"asset\" isGraph />\n          ) : applyingEmptyDefault ? (\n            <LargeDAGNotice nodeType=\"asset\" />\n          ) : Object.keys(assetGraphData.nodes).length === 0 ? (\n            <EntirelyFilteredDAGNotice nodeType=\"asset\" />\n          ) : undefined}\n          {loading || !layout ? (\n            <LoadingNotice async={async} nodeType=\"asset\" />\n          ) : (\n            <SVGViewport\n              ref={(r) => (viewportEl.current = r || undefined)}\n              interactor={SVGViewport.Interactors.PanAndZoom}\n              graphWidth={layout.width}\n              graphHeight={layout.height}\n              graphHasNoMinimumZoom={allowGroupsOnlyZoomLevel}\n              onClick={onClickBackground}\n              onArrowKeyDown={onArrowKeyDown}\n              onDoubleClick={(e) => {\n                viewportEl.current?.autocenter(true);\n                e.stopPropagation();\n              }}\n              maxZoom={1.2}\n              maxAutocenterZoom={1.0}\n            >\n              {({scale}) => (\n                <SVGContainer width={layout.width} height={layout.height}>\n                  <AssetEdges\n                    highlighted={highlighted}\n                    edges={layout.edges}\n                    strokeWidth={allowGroupsOnlyZoomLevel ? Math.max(4, 3 / scale) : 4}\n                    baseColor={\n                      allowGroupsOnlyZoomLevel && scale < GROUPS_ONLY_SCALE\n                        ? Colors.Gray400\n                        : Colors.KeylineGray\n                    }\n                  />\n\n                  {Object.values(layout.groups)\n                    .sort((a, b) => a.id.length - b.id.length)\n                    .map((group) => (\n                      <foreignObject\n                        key={group.id}\n                        {...group.bounds}\n                        onDoubleClick={(e) => {\n                          if (!viewportEl.current) {\n                            return;\n                          }\n                          const targetScale = viewportEl.current.scaleForSVGBounds(\n                            group.bounds.width,\n                            group.bounds.height,\n                          );\n                          viewportEl.current.zoomToSVGBox(group.bounds, true, targetScale * 0.9);\n                          e.stopPropagation();\n                        }}\n                      >\n                        <AssetGroupNode group={group} scale={scale} />\n                      </foreignObject>\n                    ))}\n\n                  {Object.values(layout.nodes).map(({id, bounds}) => {\n                    const graphNode = assetGraphData.nodes[id];\n                    const path = JSON.parse(id);\n                    if (allowGroupsOnlyZoomLevel && scale < GROUPS_ONLY_SCALE) {\n                      return;\n                    }\n                    return (\n                      <foreignObject\n                        {...bounds}\n                        key={id}\n                        onMouseEnter={() => setHighlighted(id)}\n                        onMouseLeave={() => setHighlighted(null)}\n                        onClick={(e) => onSelectNode(e, {path}, graphNode)}\n                        onDoubleClick={(e) => {\n                          viewportEl.current?.zoomToSVGBox(bounds, true, 1.2);\n                          e.stopPropagation();\n                        }}\n                        style={{overflow: 'visible'}}\n                      >\n                        {!graphNode ? (\n                          <AssetNodeLink assetKey={{path}} />\n                        ) : scale < MINIMAL_SCALE ? (\n                          <AssetNodeMinimal\n                            definition={graphNode.definition}\n                            liveData={liveDataByNode[graphNode.id]}\n                            selected={selectedGraphNodes.includes(graphNode)}\n                          />\n                        ) : (\n                          <AssetNode\n                            definition={graphNode.definition}\n                            liveData={liveDataByNode[graphNode.id]}\n                            selected={selectedGraphNodes.includes(graphNode)}\n                          />\n                        )}\n                      </foreignObject>\n                    );\n                  })}\n                </SVGContainer>\n              )}\n            </SVGViewport>\n          )}\n          {setOptions && (\n            <OptionsOverlay>\n              <Checkbox\n                format=\"switch\"\n                label=\"View as Asset Graph\"\n                checked={options.preferAssetRendering}\n                onChange={() => {\n                  onChangeExplorerPath(\n                    {...explorerPath, opNames: selectedDefinitions[0]?.opNames || []},\n                    'replace',\n                  );\n                  setOptions({\n                    ...options,\n                    preferAssetRendering: !options.preferAssetRendering,\n                  });\n                }}\n              />\n            </OptionsOverlay>\n          )}\n\n          <Box\n            flex={{direction: 'column', alignItems: 'flex-end', gap: 8}}\n            style={{position: 'absolute', right: 12, top: 8}}\n          >\n            <Box flex={{alignItems: 'center', gap: 12}}>\n              <QueryRefreshCountdown\n                refreshState={liveDataRefreshState}\n                dataDescription=\"materializations\"\n              />\n              <LaunchAssetObservationButton\n                preferredJobName={explorerPath.pipelineName}\n                scope={\n                  selectedDefinitions.length\n                    ? {selected: selectedDefinitions.filter((a) => a.isObservable)}\n                    : {all: allDefinitionsForMaterialize.filter((a) => a.isObservable)}\n                }\n              />\n              <LaunchAssetExecutionButton\n                preferredJobName={explorerPath.pipelineName}\n                liveDataForStale={liveDataByNode}\n                scope={\n                  selectedDefinitions.length\n                    ? {selected: selectedDefinitions}\n                    : {all: allDefinitionsForMaterialize}\n                }\n              />\n            </Box>\n          </Box>\n          <QueryOverlay>\n            {fetchOptionFilters}\n\n            <GraphQueryInput\n              items={graphQueryItems}\n              value={explorerPath.opsQuery}\n              placeholder=\"Type an asset subset\"\n              onChange={(opsQuery) => onChangeExplorerPath({...explorerPath, opsQuery}, 'replace')}\n              popoverPosition=\"bottom-left\"\n            />\n          </QueryOverlay>\n        </ErrorBoundary>\n      }\n      second={\n        selectedGraphNodes.length === 1 && selectedGraphNodes[0] ? (\n          <RightInfoPanel>\n            <RightInfoPanelContent>\n              <ErrorBoundary region=\"asset sidebar\" resetErrorOnChange={[selectedGraphNodes[0].id]}>\n                <SidebarAssetInfo\n                  assetNode={selectedGraphNodes[0]}\n                  liveData={liveDataByNode[selectedGraphNodes[0].id]}\n                />\n              </ErrorBoundary>\n            </RightInfoPanelContent>\n          </RightInfoPanel>\n        ) : fetchOptions.pipelineSelector ? (\n          <RightInfoPanel>\n            <RightInfoPanelContent>\n              <ErrorBoundary region=\"asset job sidebar\">\n                <AssetGraphJobSidebar pipelineSelector={fetchOptions.pipelineSelector} />\n              </ErrorBoundary>\n            </RightInfoPanelContent>\n          </RightInfoPanel>\n        ) : null\n      }\n    />\n  );\n};\n\nconst SVGContainer = styled.svg`\n  overflow: visible;\n  border-radius: 0;\n`;\n\n// Helpers\n\nconst graphDirectionOf = ({\n  graph,\n  from,\n  to,\n}: {\n  graph: GraphData;\n  from: GraphNode;\n  to: GraphNode;\n}) => {\n  const stack = [from];\n  while (stack.length) {\n    const node = stack.pop()!;\n\n    const downstream = [...Object.keys(graph.downstream[node.id] || {})]\n      .map((n) => graph.nodes[n])\n      .filter(Boolean);\n    if (downstream.some((d) => d.id === to.id)) {\n      return 'downstream';\n    }\n    stack.push(...downstream);\n  }\n  return 'upstream';\n};\n\nconst opsInRange = (\n  {graph, from, to}: {graph: GraphData; from: GraphNode; to: GraphNode},\n  seen: string[] = [],\n) => {\n  if (!from) {\n    return [];\n  }\n  if (from.id === to.id) {\n    return [...to.definition.opNames];\n  }\n\n  if (seen.length === 0 && graphDirectionOf({graph, from, to}) === 'upstream') {\n    [from, to] = [to, from];\n  }\n\n  const downstream = [...Object.keys(graph.downstream[from.id] || {})]\n    .map((n) => graph.nodes[n])\n    .filter(Boolean);\n\n  const ledToTarget: string[] = [];\n\n  for (const node of downstream) {\n    if (seen.includes(node.id)) {\n      continue;\n    }\n    const result: string[] = opsInRange({graph, from: node, to}, [...seen, from.id]);\n    if (result.length) {\n      ledToTarget.push(...from.definition.opNames, ...result);\n    }\n  }\n  return uniq(ledToTarget);\n};\n","import {Box, Colors, FontFamily, Icon, Mono} from '@dagster-io/ui';\nimport React from 'react';\nimport {Link} from 'react-router-dom';\nimport styled from 'styled-components/macro';\n\nimport {withMiddleTruncation} from '../app/Util';\nimport {buildRepoPathForHuman} from '../workspace/buildRepoAddress';\nimport {workspacePath} from '../workspace/workspacePath';\n\nimport {MINIMAL_SCALE, GROUPS_ONLY_SCALE} from './AssetGraphExplorer';\nimport {GroupLayout} from './layout';\n\nexport const AssetGroupNode: React.FC<{group: GroupLayout; scale: number}> = ({group, scale}) => {\n  const {\n    repositoryLocationName,\n    repositoryDisambiguationRequired,\n    repositoryName,\n    groupName,\n  } = group;\n\n  return (\n    <div style={{position: 'relative', width: '100%', height: '100%'}}>\n      {scale > GROUPS_ONLY_SCALE && (\n        <Box flex={{alignItems: 'flex-end'}} style={{height: 70}}>\n          <Mono\n            style={{\n              fontWeight: 600,\n              userSelect: 'none',\n              fontSize: scale > MINIMAL_SCALE ? '16px' : '32px',\n              display: 'flex',\n              gap: 6,\n            }}\n          >\n            <Icon\n              name=\"asset_group\"\n              color={Colors.Gray400}\n              size={scale > MINIMAL_SCALE ? 20 : 48}\n            />\n            <Box flex={{direction: 'column'}}>\n              <Link\n                style={{color: Colors.Gray400}}\n                onClick={(e) => e.stopPropagation()}\n                to={workspacePath(\n                  repositoryName,\n                  repositoryLocationName,\n                  `/asset-groups/${groupName}`,\n                )}\n              >\n                {groupName}\n              </Link>\n              {repositoryDisambiguationRequired && (\n                <GroupRepoName style={{marginBottom: '0.5em'}}>\n                  {withMiddleTruncation(\n                    buildRepoPathForHuman(repositoryName, repositoryLocationName),\n                    {\n                      maxLength: 45,\n                    },\n                  )}\n                </GroupRepoName>\n              )}\n            </Box>\n          </Mono>\n        </Box>\n      )}\n\n      <GroupOutline\n        style={{\n          inset: 0,\n          top: 75,\n          position: 'absolute',\n          background:\n            scale < GROUPS_ONLY_SCALE ? `rgba(234, 234, 234, 1)` : `rgba(217, 217, 217, 0.25)`,\n        }}\n      />\n\n      {scale < GROUPS_ONLY_SCALE ? (\n        <Box\n          flex={{justifyContent: 'center', alignItems: 'center'}}\n          style={{inset: 0, position: 'absolute', fontSize: `${12 / scale}px`, userSelect: 'none'}}\n        >\n          <Box\n            flex={{direction: 'column', alignItems: 'center'}}\n            style={{fontWeight: 600, fontFamily: FontFamily.monospace}}\n          >\n            {groupName}\n            {repositoryDisambiguationRequired && (\n              <GroupRepoName>\n                {withMiddleTruncation(\n                  buildRepoPathForHuman(repositoryName, repositoryLocationName),\n                  {\n                    maxLength: 45,\n                  },\n                )}\n              </GroupRepoName>\n            )}\n          </Box>\n        </Box>\n      ) : undefined}\n    </div>\n  );\n};\n\nconst GroupOutline = styled.div`\n  width: 100%;\n  border-radius: 10px;\n  pointer-events: none;\n`;\n\nconst GroupRepoName = styled.div`\n  font-size: 0.8em;\n  line-height: 0.6em;\n  white-space: nowrap;\n  color: ${Colors.Gray400};\n`;\n","import LRUCache from 'lru-cache';\nimport {remark} from 'remark';\nimport gfm from 'remark-gfm';\nimport toPlainText from 'remark-plain-text';\n\nconst Remark = remark()\n  .use(gfm)\n  .use(toPlainText as any);\nconst markdownCache = new LRUCache<string, string>({max: 500});\nexport const markdownToPlaintext = (md: string) => {\n  // Compile the Markdown file to plain text:\n  const cached = markdownCache.get(md);\n  if (cached) {\n    return cached;\n  }\n\n  // Clean up escaping left behind.\n  const str = Remark.processSync(md).toString().replace(/\\\\/g, '').trim();\n  markdownCache.set(md, str);\n\n  return str;\n};\n","import {gql} from '@apollo/client';\nimport {Colors, Icon, FontFamily, Box, Spinner, Tooltip, Body} from '@dagster-io/ui';\nimport isEqual from 'lodash/isEqual';\nimport React from 'react';\nimport {Link} from 'react-router-dom';\nimport styled from 'styled-components/macro';\n\nimport {withMiddleTruncation} from '../app/Util';\nimport {\n  PartitionCountTags,\n  StyleForAssetPartitionStatus,\n  partitionCountString,\n} from '../assets/AssetNodePartitionCounts';\nimport {AssetPartitionStatusDot} from '../assets/AssetPartitionList';\nimport {AssetPartitionStatus} from '../assets/AssetPartitionStatus';\nimport {humanizedLateString, isAssetLate} from '../assets/CurrentMinutesLateTag';\nimport {StaleReasonsTags} from '../assets/Stale';\nimport {assetDetailsPathForKey} from '../assets/assetDetailsPathForKey';\nimport {AssetComputeKindTag} from '../graph/OpTags';\nimport {AssetKey} from '../graphql/types';\nimport {TimestampDisplay} from '../schedules/TimestampDisplay';\nimport {markdownToPlaintext} from '../ui/markdownToPlaintext';\n\nimport {AssetLatestRunSpinner, AssetRunLink} from './AssetRunLinking';\nimport {LiveDataForNode} from './Utils';\nimport {ASSET_NODE_NAME_MAX_LENGTH} from './layout';\nimport {AssetNodeFragment} from './types/AssetNode.types';\n\nexport const AssetNode: React.FC<{\n  definition: AssetNodeFragment;\n  liveData?: LiveDataForNode;\n  selected: boolean;\n}> = React.memo(({definition, selected, liveData}) => {\n  const displayName = definition.assetKey.path[definition.assetKey.path.length - 1];\n  const isSource = definition.isSource;\n\n  return (\n    <AssetInsetForHoverEffect>\n      <AssetTopTags definition={definition} liveData={liveData} />\n      <AssetNodeContainer $selected={selected}>\n        <AssetNodeBox $selected={selected} $isSource={isSource}>\n          <Name $isSource={isSource}>\n            <span style={{marginTop: 1}}>\n              <Icon name={isSource ? 'source_asset' : 'asset'} />\n            </span>\n            <div style={{overflow: 'hidden', textOverflow: 'ellipsis'}}>\n              {withMiddleTruncation(displayName, {\n                maxLength: ASSET_NODE_NAME_MAX_LENGTH,\n              })}\n            </div>\n            <div style={{flex: 1}} />\n          </Name>\n          <Box\n            style={{padding: '6px 8px'}}\n            flex={{direction: 'column', gap: 4}}\n            border={{side: 'top', width: 1, color: Colors.KeylineGray}}\n          >\n            {definition.description ? (\n              <Description $color={Colors.Gray800}>\n                {markdownToPlaintext(definition.description).split('\\n')[0]}\n              </Description>\n            ) : (\n              <Description $color={Colors.Gray400}>No description</Description>\n            )}\n            {definition.isPartitioned && (\n              <PartitionCountTags definition={definition} liveData={liveData} />\n            )}\n            <StaleReasonsTags liveData={liveData} assetKey={definition.assetKey} include=\"self\" />\n          </Box>\n\n          {isSource && !definition.isObservable ? null : (\n            <AssetNodeStatusRow definition={definition} liveData={liveData} />\n          )}\n          <AssetComputeKindTag definition={definition} style={{right: -2, paddingTop: 7}} />\n        </AssetNodeBox>\n      </AssetNodeContainer>\n    </AssetInsetForHoverEffect>\n  );\n}, isEqual);\n\nconst AssetTopTags: React.FC<{\n  definition: AssetNodeFragment;\n  liveData?: LiveDataForNode;\n}> = ({definition, liveData}) => (\n  <Box flex={{gap: 4}} padding={{left: 4}} style={{height: 24}}>\n    <StaleReasonsTags liveData={liveData} assetKey={definition.assetKey} include=\"upstream\" />\n  </Box>\n);\n\nconst AssetNodeStatusBox: React.FC<{background: string; children: React.ReactNode}> = ({\n  background,\n  children,\n}) => (\n  <Box\n    padding={{horizontal: 8}}\n    style={{\n      borderBottomLeftRadius: 6,\n      borderBottomRightRadius: 6,\n      whiteSpace: 'nowrap',\n      lineHeight: '12px',\n      fontSize: 12,\n      height: 24,\n    }}\n    flex={{justifyContent: 'space-between', alignItems: 'center', gap: 6}}\n    background={background}\n  >\n    {children}\n  </Box>\n);\n\ninterface StatusRowProps {\n  definition: AssetNodeFragment;\n  liveData: LiveDataForNode | undefined;\n}\n\nconst AssetNodeStatusRow: React.FC<StatusRowProps> = (props) => {\n  const {content, background} = buildAssetNodeStatusContent(props);\n  return <AssetNodeStatusBox background={background}>{content}</AssetNodeStatusBox>;\n};\n\nfunction getStepKey(definition: {opNames: string[]}) {\n  // Used for linking to the run with this step highlighted. We only support highlighting\n  // a single step, so just use the first one.\n  const firstOp = definition.opNames.length ? definition.opNames[0] : null;\n  return firstOp || '';\n}\n\nexport function buildAssetNodeStatusContent({\n  definition,\n  liveData,\n  expanded,\n}: {\n  definition: {assetKey: AssetKey; opNames: string[]; isSource: boolean; isObservable: boolean};\n  liveData: LiveDataForNode | null | undefined;\n  expanded?: boolean;\n}) {\n  if (!liveData) {\n    return {\n      background: Colors.Gray100,\n      border: Colors.Gray300,\n      content: (\n        <>\n          <Spinner purpose=\"caption-text\" />\n          <span style={{flex: 1, color: Colors.Gray800}}>Loading...</span>\n        </>\n      ),\n    };\n  }\n\n  const {\n    lastMaterialization,\n    runWhichFailedToMaterialize,\n    inProgressRunIds,\n    unstartedRunIds,\n  } = liveData;\n\n  const materializingRunId = inProgressRunIds[0] || unstartedRunIds[0];\n  const late = isAssetLate(liveData);\n\n  if (definition.isSource) {\n    if (materializingRunId) {\n      return {\n        background: Colors.Gray100,\n        border: Colors.Gray300,\n        content: (\n          <>\n            <AssetLatestRunSpinner liveData={liveData} />\n            <span style={{flex: 1}} color={Colors.Gray800}>\n              Observing...\n            </span>\n            {expanded && <SpacerDot />}\n            <AssetRunLink runId={materializingRunId} />\n          </>\n        ),\n      };\n    }\n    if (liveData?.lastObservation) {\n      return {\n        background: Colors.Gray100,\n        border: Colors.Gray300,\n        content: (\n          <>\n            {expanded && <AssetPartitionStatusDot status={[AssetPartitionStatus.MISSING]} />}\n            <span>Observed</span>\n            {expanded && <SpacerDot />}\n            <span style={{textAlign: 'right'}}>\n              <AssetRunLink\n                runId={liveData.lastObservation.runId}\n                event={{\n                  stepKey: getStepKey(definition),\n                  timestamp: liveData.lastObservation.timestamp,\n                }}\n              >\n                <TimestampDisplay\n                  timestamp={Number(liveData.lastObservation.timestamp) / 1000}\n                  timeFormat={{showSeconds: false, showTimezone: false}}\n                />\n              </AssetRunLink>\n            </span>\n          </>\n        ),\n      };\n    }\n    if (definition.isObservable) {\n      return {\n        background: Colors.Gray100,\n        border: Colors.Gray300,\n        content: (\n          <>\n            {expanded && (\n              <Icon\n                name=\"partition_missing\"\n                color={Colors.Gray300}\n                style={{marginRight: -2}}\n                size={12}\n              />\n            )}\n            <span>Never observed</span>\n            {!expanded && <span></span>}\n          </>\n        ),\n      };\n    }\n\n    return {\n      background: Colors.Gray100,\n      border: Colors.Gray300,\n      content: <span></span>,\n    };\n  }\n\n  if (materializingRunId) {\n    return {\n      background: Colors.Blue50,\n      border: Colors.Blue500,\n      content: (\n        <>\n          <AssetLatestRunSpinner liveData={liveData} />\n          <span style={{flex: 1}} color={Colors.Gray800}>\n            {liveData.partitionStats?.numMaterializing === 1\n              ? `Materializing 1 partition...`\n              : liveData.partitionStats?.numMaterializing\n              ? `Materializing ${liveData.partitionStats.numMaterializing} partitions...`\n              : `Materializing...`}\n          </span>\n          {expanded && <SpacerDot />}\n          <AssetRunLink runId={materializingRunId} />\n        </>\n      ),\n    };\n  }\n\n  if (liveData.partitionStats) {\n    const {numPartitions, numMaterialized, numFailed} = liveData.partitionStats;\n    const numMissing = numPartitions - numFailed - numMaterialized;\n    const {background, foreground, border} = StyleForAssetPartitionStatus[\n      late || numFailed\n        ? AssetPartitionStatus.FAILED\n        : numMissing\n        ? AssetPartitionStatus.MISSING\n        : AssetPartitionStatus.MATERIALIZED\n    ];\n\n    return {\n      background,\n      border,\n      content: (\n        <span style={{color: foreground}}>\n          <Link\n            to={assetDetailsPathForKey(definition.assetKey, {view: 'partitions'})}\n            target=\"_blank\"\n            rel=\"noreferrer\"\n          >\n            {late\n              ? humanizedLateString(liveData.freshnessInfo.currentMinutesLate)\n              : partitionCountString(numPartitions)}\n          </Link>\n        </span>\n      ),\n    };\n  }\n\n  const lastMaterializationLink = lastMaterialization ? (\n    <span>\n      <AssetRunLink\n        runId={lastMaterialization.runId}\n        event={{stepKey: getStepKey(definition), timestamp: lastMaterialization.timestamp}}\n      >\n        <TimestampDisplay\n          timestamp={Number(lastMaterialization.timestamp) / 1000}\n          timeFormat={{showSeconds: false, showTimezone: false}}\n        />\n      </AssetRunLink>\n    </span>\n  ) : undefined;\n\n  if (runWhichFailedToMaterialize || late) {\n    return {\n      background: Colors.Red50,\n      border: Colors.Red500,\n      content: (\n        <>\n          {expanded && (\n            <Icon\n              name=\"partition_failure\"\n              color={Colors.Red500}\n              style={{marginRight: -2}}\n              size={12}\n            />\n          )}\n\n          <span style={{color: Colors.Red700}}>\n            {runWhichFailedToMaterialize && late\n              ? `Failed (Overdue)`\n              : late\n              ? humanizedLateString(liveData.freshnessInfo.currentMinutesLate)\n              : 'Failed'}\n          </span>\n\n          {expanded && <SpacerDot />}\n\n          {runWhichFailedToMaterialize ? (\n            <span>\n              <AssetRunLink runId={runWhichFailedToMaterialize.id}>\n                <TimestampDisplay\n                  timestamp={Number(runWhichFailedToMaterialize.endTime)}\n                  timeFormat={{showSeconds: false, showTimezone: false}}\n                />\n              </AssetRunLink>\n            </span>\n          ) : (\n            lastMaterializationLink\n          )}\n        </>\n      ),\n    };\n  }\n\n  if (!lastMaterialization) {\n    return {\n      background: Colors.Yellow50,\n      border: Colors.Yellow500,\n      content: (\n        <>\n          {expanded && (\n            <Icon\n              name=\"partition_missing\"\n              color={Colors.Yellow500}\n              style={{marginRight: -2}}\n              size={12}\n            />\n          )}\n          <span style={{color: Colors.Yellow700}}>Never materialized</span>\n        </>\n      ),\n    };\n  }\n\n  return {\n    background: Colors.Green50,\n    border: Colors.Green500,\n    content: (\n      <>\n        {expanded && <AssetPartitionStatusDot status={[AssetPartitionStatus.MATERIALIZED]} />}\n        <span style={{color: Colors.Green700}}>Materialized</span>\n        {expanded && <SpacerDot />}\n        {lastMaterializationLink}\n      </>\n    ),\n  };\n}\n\nexport const AssetNodeMinimal: React.FC<{\n  selected: boolean;\n  liveData?: LiveDataForNode;\n  definition: AssetNodeFragment;\n}> = ({selected, definition, liveData}) => {\n  const {isSource, assetKey} = definition;\n  const {border, background} = buildAssetNodeStatusContent({definition, liveData});\n  const displayName = assetKey.path[assetKey.path.length - 1];\n  return (\n    <AssetInsetForHoverEffect>\n      <MinimalAssetNodeContainer $selected={selected}>\n        <TooltipStyled\n          content={displayName}\n          canShow={displayName.length > 14}\n          targetTagName=\"div\"\n          position=\"top\"\n        >\n          <MinimalAssetNodeBox\n            $selected={selected}\n            $isSource={isSource}\n            $background={background}\n            $border={border}\n          >\n            <div style={{position: 'absolute', bottom: 6, left: 6}}>\n              <AssetLatestRunSpinner liveData={liveData} purpose=\"section\" />\n            </div>\n            <MinimalName style={{fontSize: 30}} $isSource={isSource}>\n              {withMiddleTruncation(displayName, {maxLength: 14})}\n            </MinimalName>\n          </MinimalAssetNodeBox>\n        </TooltipStyled>\n      </MinimalAssetNodeContainer>\n    </AssetInsetForHoverEffect>\n  );\n};\n\nexport const ASSET_NODE_LIVE_FRAGMENT = gql`\n  fragment AssetNodeLiveFragment on AssetNode {\n    id\n    opNames\n    repository {\n      id\n    }\n    assetKey {\n      path\n    }\n    assetMaterializations(limit: 1) {\n      ...AssetNodeLiveMaterialization\n    }\n    freshnessPolicy {\n      ...AssetNodeLiveFreshnessPolicy\n    }\n    freshnessInfo {\n      ...AssetNodeLiveFreshnessInfo\n    }\n    assetObservations(limit: 1) {\n      ...AssetNodeLiveObservation\n    }\n    staleStatus\n    staleCauses {\n      key {\n        path\n      }\n      reason\n      category\n      dependency {\n        path\n      }\n    }\n    partitionStats {\n      numMaterialized\n      numMaterializing\n      numPartitions\n      numFailed\n    }\n  }\n\n  fragment AssetNodeLiveFreshnessPolicy on FreshnessPolicy {\n    maximumLagMinutes\n    cronSchedule\n    cronScheduleTimezone\n  }\n\n  fragment AssetNodeLiveFreshnessInfo on AssetFreshnessInfo {\n    currentMinutesLate\n  }\n\n  fragment AssetNodeLiveMaterialization on MaterializationEvent {\n    timestamp\n    runId\n  }\n\n  fragment AssetNodeLiveObservation on ObservationEvent {\n    timestamp\n    runId\n  }\n`;\n\n// Note: This fragment should only contain fields that are needed for\n// useAssetGraphData and the Asset DAG. Some pages of Dagit request this\n// fragment for every AssetNode on the instance. Add fields with care!\n//\nexport const ASSET_NODE_FRAGMENT = gql`\n  fragment AssetNodeFragment on AssetNode {\n    id\n    graphName\n    hasMaterializePermission\n    jobNames\n    opNames\n    opVersion\n    description\n    computeKind\n    isPartitioned\n    isObservable\n    isSource\n    assetKey {\n      ...AssetNodeKey\n    }\n  }\n\n  fragment AssetNodeKey on AssetKey {\n    path\n  }\n`;\n\nconst AssetInsetForHoverEffect = styled.div`\n  padding: 10px 4px 2px 4px;\n  height: 100%;\n\n  & *:focus {\n    outline: 0;\n  }\n`;\n\nconst AssetNodeContainer = styled.div<{$selected: boolean}>`\n  user-select: none;\n  cursor: default;\n  padding: 4px;\n`;\n\nconst AssetNodeShowOnHover = styled.span`\n  display: none;\n`;\n\nconst AssetNodeBox = styled.div<{$isSource: boolean; $selected: boolean}>`\n  ${(p) =>\n    p.$isSource\n      ? `border: 2px dashed ${p.$selected ? Colors.Gray600 : Colors.Gray300}`\n      : `border: 2px solid ${p.$selected ? Colors.Blue500 : Colors.Blue200}`};\n\n  ${(p) =>\n    p.$isSource\n      ? `outline: 3px solid ${p.$selected ? Colors.Gray300 : 'transparent'}`\n      : `outline: 3px solid ${p.$selected ? Colors.Blue200 : 'transparent'}`};\n\n  background: ${Colors.White};\n  border-radius: 8px;\n  position: relative;\n  &:hover {\n    box-shadow: rgba(0, 0, 0, 0.12) 0px 2px 12px 0px;\n    ${AssetNodeShowOnHover} {\n      display: initial;\n    }\n  }\n`;\nconst Name = styled.div<{$isSource: boolean}>`\n  /** Keep in sync with DISPLAY_NAME_PX_PER_CHAR */\n  display: flex;\n  padding: 3px 6px;\n  background: ${(p) => (p.$isSource ? Colors.Gray100 : Colors.Blue50)};\n  font-family: ${FontFamily.monospace};\n  border-top-left-radius: 7px;\n  border-top-right-radius: 7px;\n  font-weight: 600;\n  gap: 4px;\n`;\n\nconst MinimalAssetNodeContainer = styled(AssetNodeContainer)`\n  padding-top: 30px;\n  padding-bottom: 42px;\n  height: 100%;\n`;\n\nconst MinimalAssetNodeBox = styled.div<{\n  $isSource: boolean;\n  $selected: boolean;\n  $background: string;\n  $border: string;\n}>`\n  background: ${(p) => p.$background};\n  ${(p) =>\n    p.$isSource\n      ? `border: 4px dashed ${p.$selected ? Colors.Gray500 : p.$border}`\n      : `border: 4px solid ${p.$selected ? Colors.Blue500 : p.$border}`};\n\n  ${(p) =>\n    p.$isSource\n      ? `outline: 8px solid ${p.$selected ? Colors.Gray300 : 'transparent'}`\n      : `outline: 8px solid ${p.$selected ? Colors.Blue200 : 'transparent'}`};\n\n  border-radius: 10px;\n  position: relative;\n  padding: 4px;\n  height: 100%;\n  min-height: 46px;\n  &:hover {\n    box-shadow: rgba(0, 0, 0, 0.12) 0px 2px 12px 0px;\n  }\n`;\n\nconst MinimalName = styled(Name)`\n  font-weight: 600;\n  white-space: nowrap;\n  position: absolute;\n  background: none;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n`;\n\nconst Description = styled.div<{$color: string}>`\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  color: ${(p) => p.$color};\n  font-size: 12px;\n`;\n\nconst TooltipStyled = styled(Tooltip)`\n  height: 100%;\n`;\n\nconst SpacerDot = () => (\n  <Body color={Colors.KeylineGray} style={{marginLeft: -3, marginRight: -3}}>\n    \n  </Body>\n);\n","import {Tooltip, Spinner, CaptionMono} from '@dagster-io/ui';\nimport React from 'react';\nimport {Link} from 'react-router-dom';\n\nimport {titleForRun, linkToRunEvent} from '../runs/RunUtils';\n\nimport {LiveDataForNode} from './Utils';\n\nexport const AssetLatestRunSpinner: React.FC<{\n  liveData?: LiveDataForNode;\n  purpose?: 'caption-text' | 'body-text' | 'section';\n}> = ({liveData, purpose = 'body-text'}) => {\n  if (liveData?.inProgressRunIds?.length) {\n    return (\n      <Tooltip content=\"A run is currently rematerializing this asset.\">\n        <Spinner purpose={purpose} />\n      </Tooltip>\n    );\n  }\n  if (liveData?.unstartedRunIds?.length) {\n    return (\n      <Tooltip content=\"A run has started that will rematerialize this asset soon.\">\n        <Spinner purpose={purpose} stopped />\n      </Tooltip>\n    );\n  }\n  return null;\n};\n\nexport const AssetRunLink: React.FC<{\n  children?: React.ReactNode;\n  runId: string;\n  event?: Parameters<typeof linkToRunEvent>[1];\n}> = ({runId, children, event}) => (\n  <Link\n    to={event ? linkToRunEvent({runId}, event) : `/runs/${runId}`}\n    target=\"_blank\"\n    rel=\"noreferrer\"\n  >\n    {children || <CaptionMono>{titleForRun({runId})}</CaptionMono>}\n  </Link>\n);\n","import {Colors, Icon, FontFamily} from '@dagster-io/ui';\nimport React from 'react';\nimport styled from 'styled-components/macro';\n\nimport {withMiddleTruncation} from '../app/Util';\n\nimport {ASSET_LINK_NAME_MAX_LENGTH} from './layout';\n\nexport const AssetNodeLink: React.FC<{\n  assetKey: {path: string[]};\n}> = React.memo(({assetKey}) => {\n  const label = assetKey.path[assetKey.path.length - 1];\n  return (\n    <AssetNodeLinkContainer>\n      <Icon name=\"open_in_new\" color={Colors.Link} />\n      <span className=\"label\" title={label}>\n        {withMiddleTruncation(label, {\n          maxLength: ASSET_LINK_NAME_MAX_LENGTH,\n        })}\n      </span>\n    </AssetNodeLinkContainer>\n  );\n});\n\nconst AssetNodeLinkContainer = styled.div`\n  display: flex;\n  padding: 4px 8px 6px;\n  margin-top: 26px;\n  line-height: 30px;\n  font-family: ${FontFamily.monospace};\n  color: ${Colors.Link};\n  align-items: center;\n  font-weight: 600;\n  gap: 4px;\n  &:hover .label {\n    color: ${Colors.Link};\n    text-decoration: underline;\n  }\n`;\n","import {gql, useQuery} from '@apollo/client';\nimport groupBy from 'lodash/groupBy';\nimport keyBy from 'lodash/keyBy';\nimport reject from 'lodash/reject';\nimport React from 'react';\n\nimport {filterByQuery, GraphQueryItem} from '../app/GraphQueryImpl';\nimport {AssetKey} from '../assets/types';\nimport {AssetGroupSelector, PipelineSelector} from '../graphql/types';\n\nimport {ASSET_NODE_FRAGMENT} from './AssetNode';\nimport {buildGraphData, GraphData, toGraphId, tokenForAssetKey} from './Utils';\nimport {\n  AssetGraphQuery,\n  AssetGraphQueryVariables,\n  AssetNodeForGraphQueryFragment,\n} from './types/useAssetGraphData.types';\n\nexport interface AssetGraphFetchScope {\n  hideEdgesToNodesOutsideQuery?: boolean;\n  hideNodesMatching?: (node: AssetNodeForGraphQueryFragment) => boolean;\n  pipelineSelector?: PipelineSelector;\n  groupSelector?: AssetGroupSelector;\n}\n\nexport type AssetGraphQueryItem = GraphQueryItem & {\n  node: AssetNode;\n};\n\n/** Fetches data for rendering an asset graph:\n *\n * @param pipelineSelector: Optionally scope to an asset job, or pass null for the global graph\n *\n * @param opsQuery: filter the returned graph using selector syntax string (eg: asset_name++)\n *\n * @param filterNodes: filter the returned graph using the provided function. The global graph\n * uses this option to implement the \"3 of 4 repositories\" picker.\n */\nexport function useAssetGraphData(opsQuery: string, options: AssetGraphFetchScope) {\n  const fetchResult = useQuery<AssetGraphQuery, AssetGraphQueryVariables>(ASSET_GRAPH_QUERY, {\n    notifyOnNetworkStatusChange: true,\n    variables: {\n      pipelineSelector: options.pipelineSelector,\n      groupSelector: options.groupSelector,\n    },\n  });\n\n  const nodes = fetchResult.data?.assetNodes;\n\n  const {\n    assetGraphData,\n    graphQueryItems,\n    graphAssetKeys,\n    allAssetKeys,\n    applyingEmptyDefault,\n  } = React.useMemo(() => {\n    if (nodes === undefined) {\n      return {\n        graphAssetKeys: [],\n        graphQueryItems: [],\n        assetGraphData: null,\n        applyingEmptyDefault: false,\n      };\n    }\n\n    // Apply any filters provided by the caller. This is where we do repo filtering\n    let matching = nodes;\n    if (options.hideNodesMatching) {\n      matching = reject(matching, options.hideNodesMatching);\n    }\n\n    // Filter the set of all AssetNodes down to those matching the `opsQuery`.\n    // In the future it might be ideal to move this server-side, but we currently\n    // get to leverage the useQuery cache almost 100% of the time above, making this\n    // super fast after the first load vs a network fetch on every page view.\n    const graphQueryItems = buildGraphQueryItems(matching);\n    const {all, applyingEmptyDefault} = filterByQuery(graphQueryItems, opsQuery);\n\n    // Assemble the response into the data structure used for layout, traversal, etc.\n    const assetGraphData = buildGraphData(all.map((n) => n.node));\n    if (options.hideEdgesToNodesOutsideQuery) {\n      removeEdgesToHiddenAssets(assetGraphData, nodes);\n    }\n\n    return {\n      allAssetKeys: matching.map((n) => n.assetKey),\n      graphAssetKeys: all.map((n) => ({path: n.node.assetKey.path})),\n      assetGraphData,\n      graphQueryItems,\n      applyingEmptyDefault,\n    };\n  }, [nodes, opsQuery, options.hideEdgesToNodesOutsideQuery, options.hideNodesMatching]);\n\n  return {\n    fetchResult,\n    assetGraphData,\n    graphQueryItems,\n    graphAssetKeys,\n    allAssetKeys,\n    applyingEmptyDefault,\n  };\n}\n\ntype AssetNode = AssetNodeForGraphQueryFragment;\n\nconst buildGraphQueryItems = (nodes: AssetNode[]) => {\n  const items: {[name: string]: AssetGraphQueryItem} = {};\n\n  for (const node of nodes) {\n    const name = tokenForAssetKey(node.assetKey);\n    items[name] = {\n      node,\n      name,\n      inputs: node.dependencyKeys.map((key) => ({\n        dependsOn: [{solid: {name: tokenForAssetKey(key)}}],\n      })),\n      outputs: node.dependedByKeys.map((key) => ({\n        dependedBy: [{solid: {name: tokenForAssetKey(key)}}],\n      })),\n    };\n  }\n  return Object.values(items);\n};\n\nconst removeEdgesToHiddenAssets = (graphData: GraphData, allNodes: AssetNode[]) => {\n  const allNodesById = groupBy(allNodes, (n) => toGraphId(n.assetKey));\n  const notSourceAsset = (id: string) => !!allNodesById[id];\n\n  for (const node of Object.keys(graphData.upstream)) {\n    for (const edge of Object.keys(graphData.upstream[node])) {\n      if (!graphData.nodes[edge] && notSourceAsset(node)) {\n        delete graphData.upstream[node][edge];\n        delete graphData.downstream[edge][node];\n      }\n    }\n  }\n\n  for (const node of Object.keys(graphData.downstream)) {\n    for (const edge of Object.keys(graphData.downstream[node])) {\n      if (!graphData.nodes[edge] && notSourceAsset(node)) {\n        delete graphData.upstream[edge][node];\n        delete graphData.downstream[node][edge];\n      }\n    }\n  }\n};\n\nexport const calculateGraphDistances = (items: GraphQueryItem[], assetKey: AssetKey) => {\n  const map = keyBy(items, (g) => g.name);\n  const start = map[tokenForAssetKey(assetKey)];\n  if (!start) {\n    return {upstream: 0, downstream: 0};\n  }\n\n  const dfsUpstream = (name: string, depth: number): number => {\n    const next = map[name].inputs\n      .flatMap((i) => i.dependsOn.map((d) => d.solid.name))\n      .filter((dname) => dname !== name);\n\n    return Math.max(depth, ...next.map((dname) => dfsUpstream(dname, depth + 1)));\n  };\n  const dfsDownstream = (name: string, depth: number): number => {\n    const next = map[name].outputs\n      .flatMap((i) => i.dependedBy.map((d) => d.solid.name))\n      .filter((dname) => dname !== name);\n\n    return Math.max(depth, ...next.map((dname) => dfsDownstream(dname, depth + 1)));\n  };\n\n  return {\n    upstream: dfsUpstream(start.name, 0),\n    downstream: dfsDownstream(start.name, 0),\n  };\n};\n\nexport const ASSET_GRAPH_QUERY = gql`\n  query AssetGraphQuery($pipelineSelector: PipelineSelector, $groupSelector: AssetGroupSelector) {\n    assetNodes(pipeline: $pipelineSelector, group: $groupSelector) {\n      id\n      ...AssetNodeForGraphQuery\n    }\n  }\n\n  fragment AssetNodeForGraphQuery on AssetNode {\n    id\n    groupName\n    hasMaterializePermission\n    repository {\n      id\n      name\n      location {\n        id\n        name\n      }\n    }\n    dependencyKeys {\n      path\n    }\n    dependedByKeys {\n      path\n    }\n    ...AssetNodeFragment\n  }\n\n  ${ASSET_NODE_FRAGMENT}\n`;\n","import {gql, NetworkStatus, useQuery, useSubscription} from '@apollo/client';\nimport uniq from 'lodash/uniq';\nimport React from 'react';\n\nimport {useQueryRefreshAtInterval} from '../app/QueryRefresh';\nimport {AssetKeyInput} from '../graphql/types';\nimport {useDidLaunchEvent} from '../runs/RunUtils';\n\nimport {ASSET_NODE_LIVE_FRAGMENT} from './AssetNode';\nimport {buildLiveData, tokenForAssetKey} from './Utils';\nimport {\n  AssetGraphLiveQuery,\n  AssetGraphLiveQueryVariables,\n  AssetLiveRunLogsSubscription,\n  AssetLiveRunLogsSubscriptionVariables,\n} from './types/useLiveDataForAssetKeys.types';\n\nconst SUBSCRIPTION_IDLE_POLL_RATE = 30 * 1000;\nconst SUBSCRIPTION_MAX_POLL_RATE = 2 * 1000;\n\n/** Fetches the last materialization, \"upstream changed\", and other live state\n * for the assets in the given pipeline or in the given set of asset keys (or both).\n *\n * Note: The \"upstream changed\" flag cascades, so it may not appear if the upstream\n * node that has changed is not in scope.\n */\nexport function useLiveDataForAssetKeys(assetKeys: AssetKeyInput[]) {\n  const liveResult = useQuery<AssetGraphLiveQuery, AssetGraphLiveQueryVariables>(\n    ASSETS_GRAPH_LIVE_QUERY,\n    {\n      skip: assetKeys.length === 0,\n      variables: {assetKeys},\n      notifyOnNetworkStatusChange: true,\n    },\n  );\n\n  const liveDataByNode = React.useMemo(() => {\n    return liveResult.data ? buildLiveData(liveResult.data) : {};\n  }, [liveResult.data]);\n\n  // Track whether the data is being refetched so incoming asset events don't trigger\n  // duplicate requests for live data.\n  const fetching = React.useRef(false);\n  fetching.current = [NetworkStatus.refetch, NetworkStatus.loading].includes(\n    liveResult.networkStatus,\n  );\n\n  const timerRef = React.useRef<NodeJS.Timeout | null>(null);\n\n  const onRefreshDebounced = React.useCallback(() => {\n    // This is a basic `throttle`, except that if it fires and finds the live\n    // query is already refreshing it debounces again.\n    const refetch = liveResult.refetch;\n    const fire = () => {\n      if (fetching.current) {\n        timerRef.current = setTimeout(fire, SUBSCRIPTION_MAX_POLL_RATE);\n      } else {\n        timerRef.current = null;\n        refetch();\n      }\n    };\n    if (!timerRef.current) {\n      timerRef.current = setTimeout(fire, SUBSCRIPTION_MAX_POLL_RATE);\n    }\n  }, [timerRef, liveResult.refetch]);\n\n  React.useEffect(() => {\n    return () => {\n      timerRef.current && clearTimeout(timerRef.current);\n    };\n  }, []);\n\n  // If the event log storage does not support streaming us asset events, fall back to\n  // a polling approach and trigger a single refresh when a run is launched for immediate feedback\n  const liveDataRefreshState = useQueryRefreshAtInterval(liveResult, SUBSCRIPTION_IDLE_POLL_RATE);\n\n  useDidLaunchEvent(liveResult.refetch, SUBSCRIPTION_MAX_POLL_RATE);\n\n  const assetKeyTokens = React.useMemo(() => new Set(assetKeys.map(tokenForAssetKey)), [assetKeys]);\n  const assetStepKeys = React.useMemo(\n    () => new Set(liveResult.data?.assetNodes.flatMap((n) => n.opNames) || []),\n    [liveResult],\n  );\n\n  const runInProgressId = uniq(\n    Object.values(liveDataByNode).flatMap((p) => [...p.unstartedRunIds, ...p.inProgressRunIds]),\n  )\n    .sort()\n    .slice(0, 3);\n\n  const runWatchers = (\n    <>\n      {runInProgressId.map((runId) => (\n        <RunLogObserver\n          runId={runId}\n          key={runId}\n          assetKeyTokens={assetKeyTokens}\n          assetStepKeys={assetStepKeys}\n          callback={onRefreshDebounced}\n        />\n      ))}\n    </>\n  );\n\n  return {\n    liveDataByNode,\n    liveDataRefreshState,\n    runWatchers,\n    assetKeys,\n  };\n}\n\nconst RunLogObserver: React.FC<{\n  runId: string;\n  assetKeyTokens: Set<string>;\n  assetStepKeys: Set<string>;\n  callback: () => void;\n}> = React.memo(({runId, assetKeyTokens, assetStepKeys, callback}) => {\n  // Useful for testing this component:\n  const counter = React.useRef(0);\n  React.useEffect(() => {\n    console.log(`Subscribed to ${runId}`);\n    return () => console.log(`Unsubscribed from ${runId} after ${counter.current} messages`);\n  }, [runId]);\n\n  useSubscription<AssetLiveRunLogsSubscription, AssetLiveRunLogsSubscriptionVariables>(\n    ASSET_LIVE_RUN_LOGS_SUBSCRIPTION,\n    {\n      fetchPolicy: 'no-cache',\n      variables: {runId},\n      onSubscriptionData: (data) => {\n        const logs = data.subscriptionData.data?.pipelineRunLogs;\n        if (logs?.__typename !== 'PipelineRunLogsSubscriptionSuccess') {\n          return;\n        }\n\n        counter.current += logs.messages.length;\n\n        if (\n          logs.messages.some((m) => {\n            if (\n              m.__typename === 'AssetMaterializationPlannedEvent' ||\n              m.__typename === 'MaterializationEvent' ||\n              m.__typename === 'ObservationEvent'\n            ) {\n              return m.assetKey && assetKeyTokens.has(tokenForAssetKey(m.assetKey));\n            }\n            if (\n              m.__typename === 'ExecutionStepFailureEvent' ||\n              m.__typename === 'ExecutionStepStartEvent'\n            ) {\n              return m.stepKey && assetStepKeys.has(m.stepKey);\n            }\n            return false;\n          })\n        ) {\n          callback();\n        }\n      },\n    },\n  );\n\n  return <span />;\n});\n\nexport const ASSET_LATEST_INFO_FRAGMENT = gql`\n  fragment AssetLatestInfoFragment on AssetLatestInfo {\n    assetKey {\n      path\n    }\n    unstartedRunIds\n    inProgressRunIds\n    latestRun {\n      id\n      ...AssetLatestInfoRun\n    }\n  }\n\n  fragment AssetLatestInfoRun on Run {\n    status\n    endTime\n    id\n  }\n`;\n\nconst ASSETS_GRAPH_LIVE_QUERY = gql`\n  query AssetGraphLiveQuery($assetKeys: [AssetKeyInput!]!) {\n    assetNodes(assetKeys: $assetKeys, loadMaterializations: true) {\n      id\n      ...AssetNodeLiveFragment\n    }\n    assetsLatestInfo(assetKeys: $assetKeys) {\n      ...AssetLatestInfoFragment\n    }\n  }\n\n  ${ASSET_NODE_LIVE_FRAGMENT}\n  ${ASSET_LATEST_INFO_FRAGMENT}\n`;\n\nconst ASSET_LIVE_RUN_LOGS_SUBSCRIPTION = gql`\n  subscription AssetLiveRunLogsSubscription($runId: ID!) {\n    pipelineRunLogs(runId: $runId, cursor: \"HEAD\") {\n      __typename\n      ... on PipelineRunLogsSubscriptionSuccess {\n        messages {\n          __typename\n          ... on AssetMaterializationPlannedEvent {\n            assetKey {\n              path\n            }\n          }\n          ... on MaterializationEvent {\n            assetKey {\n              path\n            }\n          }\n          ... on ObservationEvent {\n            assetKey {\n              path\n            }\n          }\n          ... on ExecutionStepStartEvent {\n            stepKey\n          }\n          ... on ExecutionStepFailureEvent {\n            stepKey\n          }\n        }\n      }\n    }\n  }\n`;\n","import {gql} from '@apollo/client';\n\nimport {CONFIG_TYPE_SCHEMA_FRAGMENT} from '../typeexplorer/ConfigTypeSchema';\n\nexport const ASSET_NODE_CONFIG_FRAGMENT = gql`\n  fragment AssetNodeConfigFragment on AssetNode {\n    id\n    configField {\n      name\n      isRequired\n      configType {\n        ...ConfigTypeSchemaFragment\n        recursiveConfigTypes {\n          ...ConfigTypeSchemaFragment\n        }\n      }\n    }\n  }\n\n  ${CONFIG_TYPE_SCHEMA_FRAGMENT}\n`;\n","import {gql, useQuery} from '@apollo/client';\nimport {Alert, Box, ButtonLink, Colors} from '@dagster-io/ui';\nimport React from 'react';\n\nimport {showCustomAlert} from '../app/CustomAlertProvider';\nimport {displayNameForAssetKey} from '../asset-graph/Utils';\nimport {buildRepoPathForHuman} from '../workspace/buildRepoAddress';\nimport {repoAddressAsHumanString} from '../workspace/repoAddressAsString';\nimport {RepoAddress} from '../workspace/types';\n\nimport {AssetKey} from './types';\nimport {\n  AssetDefinitionCollisionQuery,\n  AssetDefinitionCollisionQueryVariables,\n} from './types/AssetDefinedInMultipleReposNotice.types';\n\nexport const MULTIPLE_DEFINITIONS_WARNING = 'Multiple asset definitions found';\n\nexport const AssetDefinedInMultipleReposNotice: React.FC<{\n  assetKey: AssetKey;\n  loadedFromRepo: RepoAddress;\n  padded?: boolean;\n}> = ({assetKey, loadedFromRepo, padded}) => {\n  const {data} = useQuery<AssetDefinitionCollisionQuery, AssetDefinitionCollisionQueryVariables>(\n    ASSET_DEFINITION_COLLISION_QUERY,\n    {\n      variables: {assetKeys: [{path: assetKey.path}]},\n    },\n  );\n\n  const collision = data?.assetNodeDefinitionCollisions[0];\n  if (!collision) {\n    return <span />;\n  }\n\n  const allReposWithAsset = collision.repositories.map((r) =>\n    repoAddressAsHumanString({name: r.name, location: r.location.name}),\n  );\n\n  return (\n    <Box\n      padding={padded ? {vertical: 16, left: 24, right: 12} : {}}\n      border={{side: 'bottom', width: 1, color: Colors.KeylineGray}}\n    >\n      <Alert\n        intent=\"warning\"\n        title={MULTIPLE_DEFINITIONS_WARNING}\n        description={\n          <>\n            This asset was loaded from{' '}\n            {buildRepoPathForHuman(loadedFromRepo.name, loadedFromRepo.location)}, but duplicate\n            definitions were found in{' '}\n            <ButtonLink\n              underline=\"always\"\n              color={Colors.Yellow700}\n              onClick={() =>\n                showCustomAlert({\n                  title: MULTIPLE_DEFINITIONS_WARNING,\n                  body: (\n                    <>\n                      Code locations containing an asset definition for{' '}\n                      <strong>{displayNameForAssetKey(assetKey)}</strong>:\n                      <ul>\n                        {allReposWithAsset.map((addr) => (\n                          <li key={addr}>{addr}</li>\n                        ))}\n                      </ul>\n                    </>\n                  ),\n                })\n              }\n            >\n              {allReposWithAsset.length - 1} other repo{allReposWithAsset.length === 2 ? '' : 's'}\n            </ButtonLink>\n            . You should rename these assets to avoid collisions.\n          </>\n        }\n      />\n    </Box>\n  );\n};\n\nconst ASSET_DEFINITION_COLLISION_QUERY = gql`\n  query AssetDefinitionCollisionQuery($assetKeys: [AssetKeyInput!]!) {\n    assetNodeDefinitionCollisions(assetKeys: $assetKeys) {\n      assetKey {\n        path\n      }\n      repositories {\n        id\n        name\n        location {\n          id\n          name\n        }\n      }\n    }\n  }\n`;\n","import {Box, Caption, Colors, Icon, Tag} from '@dagster-io/ui';\nimport {useVirtualizer} from '@tanstack/react-virtual';\nimport * as React from 'react';\nimport styled from 'styled-components/macro';\n\nimport {Timestamp} from '../app/time/Timestamp';\nimport {AssetRunLink} from '../asset-graph/AssetRunLinking';\nimport {RunStatusWithStats} from '../runs/RunStatusDots';\nimport {titleForRun} from '../runs/RunUtils';\nimport {Container, Inner, Row} from '../ui/VirtualizedTable';\n\nimport {AssetEventGroup} from './groupByPartition';\n\n// This component is on the feature-flagged AssetOverview page and replaces AssetEventTable\n\nexport const AssetEventList: React.FC<{\n  xAxis: 'time' | 'partition';\n  groups: AssetEventGroup[];\n  focused?: AssetEventGroup;\n  setFocused?: (item: AssetEventGroup | undefined) => void;\n}> = ({groups, focused, setFocused, xAxis}) => {\n  const parentRef = React.useRef<HTMLDivElement | null>(null);\n  const focusedRowRef = React.useRef<HTMLDivElement | null>(null);\n\n  const rowVirtualizer = useVirtualizer({\n    count: groups.length,\n    getScrollElement: () => parentRef.current,\n    estimateSize: () => 80,\n    overscan: 10,\n  });\n  const totalHeight = rowVirtualizer.getTotalSize();\n  const items = rowVirtualizer.getVirtualItems();\n\n  React.useEffect(() => {\n    if (focusedRowRef.current) {\n      const el = focusedRowRef.current;\n      if (el && el instanceof HTMLElement && 'scrollIntoView' in el) {\n        el.scrollIntoView({block: 'nearest'});\n      }\n    }\n  }, [focused]);\n\n  return (\n    <AssetListContainer ref={parentRef}>\n      <Inner $totalHeight={totalHeight}>\n        {items.map(({index, key, size, start}) => {\n          const group = groups[index];\n          return (\n            <AssetListRow\n              key={key}\n              $height={size}\n              $start={start}\n              $focused={group === focused}\n              ref={group === focused ? focusedRowRef : undefined}\n              onClick={(e) => {\n                // If you're interacting with something in the row, don't trigger a focus change.\n                // Since focus is stored in the URL bar this overwrites any link click navigation.\n                // We could alternatively e.preventDefault() on every link but it's easy to forget.\n                if (e.target instanceof HTMLElement && e.target.closest('a')) {\n                  return;\n                }\n                setFocused?.(focused !== group ? group : undefined);\n              }}\n            >\n              <Box\n                style={{height: size}}\n                padding={{left: 24, right: 12}}\n                flex={{direction: 'column', justifyContent: 'center', gap: 8}}\n                border={{side: 'bottom', width: 1, color: Colors.KeylineGray}}\n              >\n                {xAxis === 'partition' ? (\n                  <AssetEventListPartitionRow group={group} />\n                ) : (\n                  <AssetEventListEventRow group={group} />\n                )}\n              </Box>\n            </AssetListRow>\n          );\n        })}\n      </Inner>\n    </AssetListContainer>\n  );\n};\n\nexport const AssetListContainer = styled(Container)`\n  outline: none;\n  &:focus {\n    box-shadow: 0 -1px ${Colors.Blue500};\n  }\n`;\n\nexport const AssetListRow = styled(Row)<{$focused: boolean}>`\n  cursor: pointer;\n  user-select: none;\n\n  :focus,\n  :active,\n  :hover {\n    outline: none;\n    background: ${Colors.Gray100};\n  }\n  ${(p) =>\n    p.$focused &&\n    `background: ${Colors.Blue50};\n     color: ${Colors.Blue700};\n     :hover {\n       background: ${Colors.Blue50};\n     }\n    `}\n`;\n\nconst AssetEventListPartitionRow: React.FC<{group: AssetEventGroup}> = ({group}) => {\n  const {partition, latest, timestamp} = group;\n  return (\n    <>\n      <Box flex={{gap: 4, direction: 'row', alignItems: 'flex-start'}}>\n        <Icon name=\"partition\" />\n        {partition}\n        <div style={{flex: 1}} />\n        {!latest ? <Tag intent=\"none\">Missing</Tag> : <Tag intent=\"success\">Materialized</Tag>}\n      </Box>\n\n      <Caption color={Colors.Gray600} style={{userSelect: 'none'}}>\n        {timestamp ? (\n          <span>\n            Materialized <Timestamp timestamp={{ms: Number(timestamp)}} />\n          </span>\n        ) : (\n          'Never materialized'\n        )}\n      </Caption>\n    </>\n  );\n};\n\nconst AssetEventListEventRow: React.FC<{group: AssetEventGroup}> = ({group}) => {\n  const {latest, partition, timestamp} = group;\n  const run = latest?.runOrError.__typename === 'Run' ? latest.runOrError : null;\n\n  return (\n    <>\n      <Box flex={{gap: 4, direction: 'row'}}>\n        {latest?.__typename === 'MaterializationEvent' ? (\n          <Icon name=\"materialization\" />\n        ) : (\n          <Icon name=\"observation\" />\n        )}\n        <Timestamp timestamp={{ms: Number(timestamp)}} />\n      </Box>\n      <Box flex={{gap: 4, direction: 'row'}}>\n        {partition && <Tag>{partition}</Tag>}\n        {latest && run && (\n          <Tag>\n            <AssetRunLink\n              runId={run.runId}\n              event={{stepKey: latest.stepKey, timestamp: latest.timestamp}}\n            >\n              <Box flex={{gap: 4, direction: 'row', alignItems: 'center'}}>\n                <RunStatusWithStats runId={run.runId} status={run.status} size={8} />\n                {titleForRun(run)}\n              </Box>\n            </AssetRunLink>\n          </Tag>\n        )}\n      </Box>\n    </>\n  );\n};\n","import {Box, ButtonLink, Caption, Colors, Icon, Mono} from '@dagster-io/ui';\nimport React from 'react';\nimport styled from 'styled-components/macro';\n\nimport {useStateWithStorage} from '../hooks/useStateWithStorage';\nimport {DagsterTag} from '../runs/RunTag';\n\nimport {AssetEventGroup} from './groupByPartition';\n\n// There can be other keys in the event tags, but we want to show data and code version\n// at the top consistently regardless of their alphabetical / backend ordering.\nconst ORDER = [\n  DagsterTag.AssetEventDataVersion.valueOf(),\n  DagsterTag.AssetEventDataVersionDeprecated.valueOf(),\n  DagsterTag.AssetEventCodeVersion.valueOf(),\n];\n\nexport const AssetEventSystemTags: React.FC<{\n  event: AssetEventGroup['latest'] | null;\n  paddingLeft?: number;\n  collapsible?: boolean;\n}> = ({event, paddingLeft, collapsible}) => {\n  const [shown, setShown] = useStateWithStorage('show-asset-system-tags', Boolean);\n\n  if (collapsible && !shown) {\n    return (\n      <Caption>\n        <ButtonLink onClick={() => setShown(true)}>\n          <Box flex={{alignItems: 'center'}}>\n            <span>Show tags ({event?.tags.length || 0})</span>\n            <Icon name=\"arrow_drop_down\" style={{transform: 'rotate(0deg)'}} />\n          </Box>\n        </ButtonLink>\n      </Caption>\n    );\n  }\n\n  return (\n    <>\n      <AssetEventSystemTagsTable>\n        <tbody>\n          {event?.tags.length ? (\n            [...event.tags]\n              .sort((a, b) => ORDER.indexOf(b.key) - ORDER.indexOf(a.key))\n              .map((t) => (\n                <tr key={t.key}>\n                  <td style={{paddingLeft}}>\n                    <Mono>{t.key.replace(DagsterTag.Namespace, '')}</Mono>\n                  </td>\n                  <td>{t.value}</td>\n                </tr>\n              ))\n          ) : (\n            <tr>\n              <td style={{paddingLeft}}>No tags to display.</td>\n            </tr>\n          )}\n        </tbody>\n      </AssetEventSystemTagsTable>\n      {collapsible && (\n        <Caption>\n          <ButtonLink onClick={() => setShown(false)}>\n            <Box flex={{alignItems: 'center'}}>\n              <span>Hide tags</span>\n              <Icon name=\"arrow_drop_down\" style={{transform: 'rotate(180deg)'}} />\n            </Box>\n          </ButtonLink>\n        </Caption>\n      )}\n    </>\n  );\n};\n\nconst AssetEventSystemTagsTable = styled.table`\n  width: 100%;\n  border-spacing: 0;\n  border-collapse: collapse;\n\n  tr td:first-child {\n    max-width: 300px;\n    word-wrap: break-word;\n    width: 25%;\n  }\n  tr td {\n    border: 1px solid ${Colors.KeylineGray};\n    padding: 8px 12px;\n    font-size: 14px;\n    vertical-align: top;\n  }\n`;\n","import {gql} from '@apollo/client';\nimport {Box, ButtonLink, Tooltip} from '@dagster-io/ui';\nimport React from 'react';\nimport {Link} from 'react-router-dom';\n\nimport {Timestamp} from '../app/time/Timestamp';\n\nimport {assetDetailsPathForKey} from './assetDetailsPathForKey';\nimport {AssetLineageFragment} from './types/AssetLineageElements.types';\n\nconst AssetLineageInfoElement: React.FC<{\n  lineage_info: AssetLineageFragment;\n  timestamp: string;\n}> = ({lineage_info, timestamp}) => {\n  const partition_list_label = lineage_info.partitions.length === 1 ? 'Partition' : 'Partitions';\n  const partition_list_str = lineage_info.partitions\n    .map((partition) => `\"${partition}\"`)\n    .join(', ');\n  const to = assetDetailsPathForKey(lineage_info.assetKey, {asOf: timestamp});\n\n  return (\n    <Box margin={{bottom: 4}}>\n      {lineage_info.partitions.length > 0\n        ? `${partition_list_label} ${partition_list_str} of `\n        : ''}\n      <Tooltip\n        content={\n          <>\n            View snapshot as of{' '}\n            <Timestamp\n              timestamp={{ms: Number(timestamp)}}\n              timeFormat={{showSeconds: true, showTimezone: true}}\n            />\n          </>\n        }\n        modifiers={{offset: {enabled: true, options: {offset: [0, 16]}}}}\n        placement=\"right\"\n      >\n        <Link to={to}>\n          <Box flex={{display: 'inline-flex', alignItems: 'center'}}>\n            {lineage_info.assetKey.path\n              .map((p, i) => <span key={i}>{p}</span>)\n              .reduce(\n                (accum, curr, ii) => [\n                  ...accum,\n                  ii > 0 ? (\n                    <React.Fragment key={`${ii}-space`}>&nbsp;{'>'}&nbsp;</React.Fragment>\n                  ) : null,\n                  curr,\n                ],\n                [] as React.ReactNode[],\n              )}\n          </Box>\n        </Link>\n      </Tooltip>\n    </Box>\n  );\n};\n\nconst MAX_COLLAPSED = 5;\n\nexport const AssetLineageElements: React.FC<{\n  elements: AssetLineageFragment[];\n  timestamp: string;\n}> = ({elements, timestamp}) => {\n  const [collapsed, setCollapsed] = React.useState(true);\n\n  return (\n    <div>\n      {elements.length > MAX_COLLAPSED && (\n        <ButtonLink onClick={() => setCollapsed(!collapsed)}>\n          {collapsed ? 'Show More' : 'Show Less'}\n        </ButtonLink>\n      )}\n      {(collapsed ? elements.slice(elements.length - MAX_COLLAPSED) : elements).map((info, idx) => (\n        <AssetLineageInfoElement key={idx} lineage_info={info} timestamp={timestamp} />\n      ))}\n    </div>\n  );\n};\n\nexport const ASSET_LINEAGE_FRAGMENT = gql`\n  fragment AssetLineageFragment on AssetLineageInfo {\n    assetKey {\n      path\n    }\n    partitions\n  }\n`;\n","import {\n  Box,\n  Colors,\n  NonIdealState,\n  Caption,\n  Subheading,\n  ExternalAnchorButton,\n} from '@dagster-io/ui';\nimport flatMap from 'lodash/flatMap';\nimport uniq from 'lodash/uniq';\nimport * as React from 'react';\n\nimport {AssetValueGraph, AssetValueGraphData} from './AssetValueGraph';\nimport {AssetEventGroup} from './groupByPartition';\n\nexport const AssetMaterializationGraphs: React.FC<{\n  groups: AssetEventGroup[];\n  xAxis: 'partition' | 'time';\n  asSidebarSection?: boolean;\n  columnCount?: number;\n}> = (props) => {\n  const [xHover, setXHover] = React.useState<string | number | null>(null);\n\n  const reversed = React.useMemo(() => {\n    return [...props.groups].reverse();\n  }, [props.groups]);\n\n  const graphDataByMetadataLabel = extractNumericData(reversed, props.xAxis);\n  const graphLabels = Object.keys(graphDataByMetadataLabel).slice(0, 20).sort();\n\n  if (process.env.NODE_ENV === 'test') {\n    return <span />; // chartjs and our useViewport hook don't play nicely with jest\n  }\n\n  return (\n    <>\n      <div\n        style={{\n          display: 'grid',\n          gridTemplateColumns: `1fr `.repeat(props.columnCount || 2),\n          justifyContent: 'stretch',\n        }}\n      >\n        {graphLabels.map((label) => (\n          <Box\n            key={label}\n            style={{width: '100%'}}\n            border={{side: 'bottom', width: 1, color: Colors.KeylineGray}}\n          >\n            <Box\n              style={{width: '100%'}}\n              border={{side: 'right', width: 1, color: Colors.KeylineGray}}\n            >\n              {props.asSidebarSection ? (\n                <Box padding={{horizontal: 24, top: 8}} flex={{justifyContent: 'space-between'}}>\n                  <Caption style={{fontWeight: 700}}>{label}</Caption>\n                </Box>\n              ) : (\n                <Box\n                  padding={{horizontal: 24, vertical: 16}}\n                  border={{side: 'bottom', width: 1, color: Colors.KeylineGray}}\n                  flex={{justifyContent: 'space-between'}}\n                >\n                  <Subheading>{label}</Subheading>\n                </Box>\n              )}\n              <Box padding={{horizontal: 24, vertical: 16}}>\n                <AssetValueGraph\n                  label={label}\n                  width=\"100%\"\n                  data={graphDataByMetadataLabel[label]}\n                  xHover={xHover}\n                  onHoverX={(x) => x !== xHover && setXHover(x)}\n                />\n              </Box>\n            </Box>\n          </Box>\n        ))}\n      </div>\n      {graphLabels.length === 0 ? (\n        props.asSidebarSection ? (\n          <Box\n            margin={{horizontal: 24, vertical: 12}}\n            style={{color: Colors.Gray500, fontSize: '0.8rem'}}\n          >\n            No numeric metadata entries available to be graphed.\n          </Box>\n        ) : (\n          <Box padding={{horizontal: 24, top: 64}}>\n            <NonIdealState\n              shrinkable\n              icon=\"asset_plot\"\n              title=\"Asset plots are automatically generated by metadata\"\n              description=\"Include numeric metadata entries in your materializations and observations to see data graphed by time or partition.\"\n              action={\n                <ExternalAnchorButton href=\"https://docs.dagster.io/concepts/assets/software-defined-assets#recording-materialization-metadata\">\n                  View documentation\n                </ExternalAnchorButton>\n              }\n            />\n          </Box>\n        )\n      ) : (\n        props.xAxis === 'partition' && (\n          <Box padding={{vertical: 16, horizontal: 24}} style={{color: Colors.Gray400}}>\n            When graphing values by partition, the highest data point for each materialized event\n            label is displayed.\n          </Box>\n        )\n      )}\n    </>\n  );\n};\n\n/**\n * Helper function that iterates over the asset materializations and assembles time series data\n * and stats for all numeric metadata entries. This function makes the following guaruntees:\n *\n * - If a metadata entry is sparsely emitted, points are still included for missing x values\n *   with y = NaN. (For compatiblity with react-chartjs-2)\n * - If a metadata entry is generated many times for the same partition, and xAxis = partition,\n *   the MAX value emitted is used as the data point.\n *\n * Assumes that the data is pre-sorted in ascending partition order if using xAxis = partition.\n */\nconst extractNumericData = (datapoints: AssetEventGroup[], xAxis: 'time' | 'partition') => {\n  const series: {\n    [metadataEntryLabel: string]: AssetValueGraphData;\n  } = {};\n\n  // Build a set of the numeric metadata entry labels (note they may be sparsely emitted)\n  const numericMetadataLabels = uniq(\n    flatMap(datapoints, (e) =>\n      (e.latest?.metadataEntries || [])\n        .filter((k) => ['IntMetadataEntry', 'FloatMetadataEntry'].includes(k.__typename))\n        .map((k) => k.label),\n    ),\n  );\n\n  const append = (label: string, {x, y}: {x: number | string; y: number}) => {\n    series[label] = series[label] || {minX: 0, maxX: 0, minY: 0, maxY: 0, values: [], xAxis};\n\n    if (xAxis === 'partition') {\n      // If the xAxis is partition keys, the graph may only contain one value for each partition.\n      // If the existing sample for the partition was null, replace it. Otherwise take the\n      // most recent value.\n      const existingForPartition = series[label].values.find((v) => v.x === x);\n      if (existingForPartition) {\n        if (!isNaN(y)) {\n          existingForPartition.y = y;\n        }\n        return;\n      }\n    }\n    series[label].values.push({\n      xNumeric: typeof x === 'number' ? x : series[label].values.length,\n      x,\n      y,\n    });\n  };\n\n  for (const {partition, latest} of datapoints) {\n    const x = (xAxis === 'partition' ? partition : Number(latest?.timestamp)) || null;\n\n    if (x === null) {\n      // exclude materializations where partition = null from partitioned graphs\n      continue;\n    }\n\n    // Add an entry for every numeric metadata label\n    for (const label of numericMetadataLabels) {\n      const entry = latest?.metadataEntries.find((l) => l.label === label);\n      if (!entry) {\n        append(label, {x, y: NaN});\n        continue;\n      }\n\n      let y = NaN;\n      if (entry.__typename === 'IntMetadataEntry') {\n        if (entry.intValue !== null) {\n          y = entry.intValue;\n        } else {\n          // will incur precision loss here\n          y = parseInt(entry.intRepr);\n        }\n      }\n      if (entry.__typename === 'FloatMetadataEntry' && entry.floatValue !== null) {\n        y = entry.floatValue;\n      }\n      append(label, {x, y});\n    }\n  }\n\n  for (const serie of Object.values(series)) {\n    const xs = serie.values.map((v) => v.xNumeric);\n    const ys = serie.values.map((v) => v.y).filter((v) => !isNaN(v));\n    serie.minXNumeric = Math.min(...xs);\n    serie.maxXNumeric = Math.max(...xs);\n    serie.minY = Math.min(...ys);\n    serie.maxY = Math.max(...ys);\n  }\n  return series;\n};\n","import {gql} from '@apollo/client';\nimport {Box, MetadataTable} from '@dagster-io/ui';\nimport * as React from 'react';\n\nimport {DAGSTER_TYPE_FRAGMENT} from '../dagstertype/DagsterType';\nimport {DagsterTypeFragment} from '../dagstertype/types/DagsterType.types';\nimport {MetadataEntry, METADATA_ENTRY_FRAGMENT} from '../metadata/MetadataEntry';\nimport {MetadataEntryFragment} from '../metadata/types/MetadataEntry.types';\n\nimport {AssetNodeOpMetadataFragment} from './types/AssetMetadata.types';\n\nexport const metadataForAssetNode = (\n  assetNode: AssetNodeOpMetadataFragment,\n): {assetType?: DagsterTypeFragment; assetMetadata: MetadataEntryFragment[]} => {\n  const assetType = assetNode.type ? assetNode.type : undefined;\n  const assetMetadata = assetNode.metadataEntries || [];\n  return {assetType, assetMetadata};\n};\n\nexport const AssetMetadataTable: React.FC<{\n  assetMetadata: MetadataEntryFragment[];\n  repoLocation: string;\n}> = ({assetMetadata, repoLocation}) => {\n  const rows = assetMetadata.map((entry) => {\n    return {\n      key: entry.label,\n      value: <MetadataEntry entry={entry} repoLocation={repoLocation} />,\n    };\n  });\n  return (\n    <Box padding={{vertical: 16, horizontal: 24}}>\n      <MetadataTable rows={rows} />\n    </Box>\n  );\n};\n\nexport const ASSET_NODE_OP_METADATA_FRAGMENT = gql`\n  fragment AssetNodeOpMetadataFragment on AssetNode {\n    id\n    metadataEntries {\n      ...MetadataEntryFragment\n    }\n    type {\n      ...DagsterTypeFragment\n    }\n  }\n\n  ${METADATA_ENTRY_FRAGMENT}\n  ${DAGSTER_TYPE_FRAGMENT}\n`;\n","import {Colors, Icon, Box, Tooltip, IconName} from '@dagster-io/ui';\nimport React from 'react';\nimport styled from 'styled-components/macro';\n\nimport {LiveDataForNode} from '../asset-graph/Utils';\nimport {AssetNodeFragment} from '../asset-graph/types/AssetNode.types';\nimport {AssetPartitionStatus} from '../assets/AssetPartitionStatus';\n\nexport const partitionCountString = (count: number | undefined, adjective = '') =>\n  `${count === undefined ? '-' : count.toLocaleString()} ${adjective}${adjective ? ' ' : ''}${\n    count === 1 ? 'partition' : 'partitions'\n  }`;\n\nconst countMissing = (partitionStats: LiveDataForNode['partitionStats'] | null | undefined) =>\n  partitionStats\n    ? partitionStats.numPartitions -\n      partitionStats.numFailed -\n      partitionStats.numMaterializing -\n      partitionStats.numMaterialized\n    : undefined;\n\nexport const StyleForAssetPartitionStatus: {\n  [state: string]: {\n    background: string;\n    foreground: string;\n    border: string;\n    icon: IconName;\n    adjective: string;\n  };\n} = {\n  [AssetPartitionStatus.FAILED]: {\n    background: Colors.Red50,\n    foreground: Colors.Red700,\n    border: Colors.Red500,\n    icon: 'partition_failure',\n    adjective: 'failed',\n  },\n  [AssetPartitionStatus.MATERIALIZED]: {\n    background: Colors.Green50,\n    foreground: Colors.Green700,\n    border: Colors.Green500,\n    icon: 'partition_success',\n    adjective: 'materialized',\n  },\n  [AssetPartitionStatus.MATERIALIZING]: {\n    background: Colors.Blue50,\n    foreground: Colors.Blue700,\n    border: Colors.Blue500,\n    icon: 'partition_success',\n    adjective: 'materializing',\n  },\n  [AssetPartitionStatus.MISSING]: {\n    background: Colors.Gray100,\n    foreground: Colors.Gray900,\n    border: Colors.Gray500,\n    icon: 'partition_missing',\n    adjective: 'missing',\n  },\n};\n\nexport const PartitionCountTags: React.FC<{\n  definition: AssetNodeFragment;\n  liveData: LiveDataForNode | undefined;\n}> = (props) => {\n  const data = props.liveData?.partitionStats;\n  return (\n    <Box style={{display: 'grid', gridTemplateColumns: '1fr 1fr 1fr', gap: 2}}>\n      <PartitionCountTag\n        status={AssetPartitionStatus.MATERIALIZED}\n        value={data?.numMaterialized}\n        total={data?.numPartitions}\n      />\n      <PartitionCountTag\n        status={AssetPartitionStatus.MISSING}\n        value={countMissing(data)}\n        total={data?.numPartitions}\n      />\n      <PartitionCountTag\n        status={AssetPartitionStatus.FAILED}\n        value={data?.numFailed}\n        total={data?.numPartitions}\n      />\n    </Box>\n  );\n};\n\nconst PartitionCountTag: React.FC<{\n  status: AssetPartitionStatus;\n  value: number | undefined;\n  total: number | undefined;\n}> = ({status, value, total}) => {\n  const style = StyleForAssetPartitionStatus[status];\n  const foreground = value ? style.foreground : Colors.Gray500;\n  const background = value ? style.background : Colors.Gray50;\n\n  return (\n    <Tooltip\n      display=\"block\"\n      position=\"top\"\n      canShow={value !== undefined}\n      content={partitionCountString(value, style.adjective)}\n    >\n      <PartitionCountContainer style={{color: foreground, background}}>\n        <Icon name={style.icon} color={foreground} size={12} />\n        {value === undefined ? '' : value === total ? 'All' : value > 1000 ? '999+' : value}\n      </PartitionCountContainer>\n    </Tooltip>\n  );\n};\n\nexport const PartitionCountLabels: React.FC<{\n  partitionStats: LiveDataForNode['partitionStats'] | null | undefined;\n}> = ({partitionStats}) => {\n  return (\n    <Box style={{display: 'flex', gap: 8}}>\n      <PartitionCountLabel\n        status={AssetPartitionStatus.MATERIALIZED}\n        value={partitionStats?.numMaterialized}\n        total={partitionStats?.numPartitions}\n      />\n      <PartitionCountLabel\n        status={AssetPartitionStatus.MISSING}\n        value={countMissing(partitionStats)}\n        total={partitionStats?.numPartitions}\n      />\n      <PartitionCountLabel\n        status={AssetPartitionStatus.FAILED}\n        value={partitionStats?.numFailed}\n        total={partitionStats?.numPartitions}\n      />\n      <PartitionCountLabel\n        status={AssetPartitionStatus.MATERIALIZING}\n        value={partitionStats?.numMaterializing}\n        total={partitionStats?.numPartitions}\n      />\n    </Box>\n  );\n};\n\nconst PartitionCountLabel: React.FC<{\n  status: AssetPartitionStatus;\n  value: number | undefined;\n  total: number | undefined;\n}> = ({status, value, total}) => {\n  const style = StyleForAssetPartitionStatus[status];\n\n  return (\n    <Tooltip\n      display=\"block\"\n      position=\"top\"\n      canShow={value !== undefined}\n      content={partitionCountString(value, style.adjective)}\n    >\n      <Box\n        flex={{gap: 4, alignItems: 'center'}}\n        style={{color: value === undefined || value === 0 ? Colors.Gray300 : Colors.Dark}}\n      >\n        <Icon name={style.icon} color={value ? style.border : Colors.Gray300} size={12} />\n        {value === undefined ? '' : value === total ? 'All' : value.toLocaleString()}\n      </Box>\n    </Tooltip>\n  );\n};\n\n// Necessary to remove the outline we get with the tooltip applying a tabIndex\nconst PartitionCountContainer = styled.div`\n  width: 100%;\n  border-radius: 6px;\n  font-size: 12px;\n  gap: 4px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 4px;\n`;\n","import {Box, Colors} from '@dagster-io/ui';\nimport {useVirtualizer} from '@tanstack/react-virtual';\nimport * as React from 'react';\n\nimport {Inner} from '../ui/VirtualizedTable';\n\nimport {AssetListRow, AssetListContainer} from './AssetEventList';\nimport {AssetPartitionStatus, assetPartitionStatusesToStyle} from './AssetPartitionStatus';\n\nexport interface AssetPartitionListProps {\n  partitions: string[];\n  statusForPartition: (dimensionKey: string) => AssetPartitionStatus[];\n  focusedDimensionKey?: string;\n  setFocusedDimensionKey?: (dimensionKey: string | undefined) => void;\n}\nexport const AssetPartitionList: React.FC<AssetPartitionListProps> = ({\n  focusedDimensionKey,\n  setFocusedDimensionKey,\n  statusForPartition,\n  partitions,\n}) => {\n  const parentRef = React.useRef<HTMLDivElement | null>(null);\n\n  const rowVirtualizer = useVirtualizer({\n    count: partitions.length,\n    getItemKey: (idx) => partitions[idx],\n    getScrollElement: () => parentRef.current,\n    estimateSize: () => 36,\n    overscan: 10,\n  });\n  const totalHeight = rowVirtualizer.getTotalSize();\n  const items = rowVirtualizer.getVirtualItems();\n\n  React.useEffect(() => {\n    if (focusedDimensionKey) {\n      rowVirtualizer.scrollToIndex(partitions.indexOf(focusedDimensionKey), {\n        smoothScroll: false,\n        align: 'auto',\n      });\n    }\n  }, [focusedDimensionKey, rowVirtualizer, partitions]);\n\n  return (\n    <AssetListContainer\n      ref={parentRef}\n      tabIndex={-1}\n      onKeyDown={(e) => {\n        const shift = {ArrowDown: 1, ArrowUp: -1}[e.key];\n        if (!setFocusedDimensionKey || !shift || !focusedDimensionKey || e.isDefaultPrevented()) {\n          return;\n        }\n        const nextIdx = partitions.indexOf(focusedDimensionKey) + shift;\n        const next = partitions[nextIdx];\n        if (next) {\n          e.preventDefault();\n          setFocusedDimensionKey(next);\n        }\n      }}\n    >\n      <Inner $totalHeight={totalHeight}>\n        {items.map(({index, key, size, start}) => {\n          const dimensionKey = partitions[index];\n          const state = statusForPartition(dimensionKey);\n          return (\n            <AssetListRow\n              key={key}\n              $height={size}\n              $start={start}\n              $focused={dimensionKey === focusedDimensionKey}\n              onClick={(e) => {\n                // If you're interacting with something in the row, don't trigger a focus change.\n                // Since focus is stored in the URL bar this overwrites any link click navigation.\n                // We could alternatively e.preventDefault() on every link but it's easy to forget.\n                if (e.target instanceof HTMLElement && e.target.closest('a')) {\n                  return;\n                }\n                setFocusedDimensionKey?.(\n                  focusedDimensionKey !== dimensionKey ? dimensionKey : undefined,\n                );\n              }}\n            >\n              <Box\n                style={{height: size}}\n                padding={{left: 24, right: 12}}\n                flex={{direction: 'column', justifyContent: 'center', gap: 8}}\n                border={{side: 'bottom', width: 1, color: Colors.KeylineGray}}\n              >\n                <Box flex={{gap: 4, direction: 'row', alignItems: 'center'}}>\n                  {dimensionKey}\n                  <div style={{flex: 1}} />\n                  {/* Note: we could just state.map, but we want these in a particular order*/}\n                  {state.includes(AssetPartitionStatus.MISSING) && (\n                    <AssetPartitionStatusDot status={[AssetPartitionStatus.MISSING]} />\n                  )}\n                  {state.includes(AssetPartitionStatus.FAILED) && (\n                    <AssetPartitionStatusDot status={[AssetPartitionStatus.FAILED]} />\n                  )}\n                  {state.includes(AssetPartitionStatus.MATERIALIZING) && (\n                    <AssetPartitionStatusDot status={[AssetPartitionStatus.MATERIALIZING]} />\n                  )}\n                  {state.includes(AssetPartitionStatus.MATERIALIZED) && (\n                    <AssetPartitionStatusDot status={[AssetPartitionStatus.MATERIALIZED]} />\n                  )}\n                </Box>\n              </Box>\n            </AssetListRow>\n          );\n        })}\n      </Inner>\n    </AssetListContainer>\n  );\n};\n\nexport const AssetPartitionStatusDot = ({status}: {status: AssetPartitionStatus[]}) => (\n  <div\n    style={{\n      width: 10,\n      height: 10,\n      borderRadius: '100%',\n      flexShrink: 0,\n      ...assetPartitionStatusesToStyle(status),\n    }}\n  />\n);\n","import {Tooltip, Tag} from '@dagster-io/ui';\nimport dayjs from 'dayjs';\nimport duration from 'dayjs/plugin/duration';\nimport relativeTime from 'dayjs/plugin/relativeTime';\nimport React from 'react';\n\nimport {LiveDataForNode} from '../asset-graph/Utils';\nimport {AssetNodeLiveFreshnessPolicyFragment} from '../asset-graph/types/AssetNode.types';\nimport {humanCronString} from '../schedules/humanCronString';\n\nconst STALE_OVERDUE_MSG = `A materialization incorporating more recent upstream data is overdue.`;\nconst STALE_UNMATERIALIZED_MSG = `This asset has never been materialized.`;\n\ndayjs.extend(duration);\ndayjs.extend(relativeTime);\n\ntype LiveDataWithMinutesLate = LiveDataForNode & {\n  freshnessInfo: NonNullable<LiveDataForNode['freshnessInfo']> & {currentMinutesLate: number};\n};\n\nexport function isAssetLate(liveData?: LiveDataForNode): liveData is LiveDataWithMinutesLate {\n  return (\n    (liveData?.freshnessInfo && (liveData?.freshnessInfo.currentMinutesLate || 0) > 0) || false\n  );\n}\n\nexport const humanizedLateString = (minLate: number) =>\n  `${dayjs.duration(minLate, 'minutes').humanize(false)} overdue`;\n\nexport const CurrentMinutesLateTag: React.FC<{\n  liveData: LiveDataForNode;\n  policyOnHover?: boolean;\n}> = ({liveData, policyOnHover}) => {\n  const {freshnessInfo, freshnessPolicy} = liveData;\n  const description = policyOnHover ? freshnessPolicyDescription(freshnessPolicy) : '';\n\n  if (!freshnessInfo) {\n    return null;\n  }\n\n  if (freshnessInfo.currentMinutesLate === null) {\n    return (\n      <Tooltip\n        content={<div style={{maxWidth: 400}}>{`${STALE_UNMATERIALIZED_MSG} ${description}`}</div>}\n      >\n        <Tag intent=\"danger\" icon=\"warning\">\n          Overdue\n        </Tag>\n      </Tooltip>\n    );\n  }\n\n  if (freshnessInfo.currentMinutesLate === 0) {\n    return description ? (\n      <Tooltip content={freshnessPolicyDescription(freshnessPolicy)}>\n        <Tag intent=\"success\" icon=\"check_circle\" />\n      </Tooltip>\n    ) : (\n      <Tag intent=\"success\" icon=\"check_circle\" />\n    );\n  }\n\n  return (\n    <Tooltip content={<div style={{maxWidth: 400}}>{`${STALE_OVERDUE_MSG} ${description}`}</div>}>\n      <Tag intent=\"danger\" icon=\"warning\">\n        {humanizedLateString(freshnessInfo.currentMinutesLate)}\n      </Tag>\n    </Tooltip>\n  );\n};\n\nexport const freshnessPolicyDescription = (\n  freshnessPolicy: AssetNodeLiveFreshnessPolicyFragment | null,\n) => {\n  if (!freshnessPolicy) {\n    return '';\n  }\n\n  const {cronSchedule, maximumLagMinutes, cronScheduleTimezone} = freshnessPolicy;\n  const nbsp = '\\xa0';\n  const cronDesc = cronSchedule\n    ? humanCronString(cronSchedule, cronScheduleTimezone ? cronScheduleTimezone : 'UTC').replace(\n        /^At /,\n        '',\n      )\n    : '';\n  const lagDesc =\n    maximumLagMinutes % 30 === 0\n      ? `${maximumLagMinutes / 60} hour${maximumLagMinutes / 60 !== 1 ? 's' : ''}`\n      : `${maximumLagMinutes} min`;\n\n  if (cronDesc) {\n    return `By ${cronDesc}, this asset should incorporate all data up to ${lagDesc} before that${nbsp}time.`;\n  } else {\n    return `At any point in time, this asset should incorporate all data up to ${lagDesc} before that${nbsp}time.`;\n  }\n};\n","import {Alert, Box, Spinner} from '@dagster-io/ui';\nimport {BorderSetting} from '@dagster-io/ui/src/components/types';\nimport React from 'react';\nimport {Link} from 'react-router-dom';\n\nimport {LiveDataForNode} from '../asset-graph/Utils';\nimport {titleForRun} from '../runs/RunUtils';\n\nexport const CurrentRunsBanner: React.FC<{liveData?: LiveDataForNode; border: BorderSetting}> = ({\n  liveData,\n  border,\n}) => {\n  const {inProgressRunIds = [], unstartedRunIds = []} = liveData || {};\n\n  if (inProgressRunIds.length === 0 && unstartedRunIds.length === 0) {\n    return null;\n  }\n  return (\n    <Box padding={{vertical: 16, left: 24, right: 12}} border={border}>\n      <Alert\n        intent=\"info\"\n        icon={<Spinner purpose=\"body-text\" />}\n        title={\n          <div style={{fontWeight: 400}}>\n            {inProgressRunIds.length > 0 && (\n              <>\n                {inProgressRunIds.map((runId) => (\n                  <React.Fragment key={runId}>\n                    Run{' '}\n                    <Link to={`/runs/${runId}`}>\n                      {titleForRun({\n                        runId,\n                      })}\n                    </Link>\n                  </React.Fragment>\n                ))}{' '}\n                {inProgressRunIds.length === 1 ? 'is' : 'are'} currently refreshing this asset.\n              </>\n            )}\n            {unstartedRunIds.length > 0 && (\n              <>\n                {unstartedRunIds.map((runId) => (\n                  <React.Fragment key={runId}>\n                    Run{' '}\n                    <Link to={`/runs/${runId}`}>\n                      {titleForRun({\n                        runId,\n                      })}\n                    </Link>\n                  </React.Fragment>\n                ))}{' '}\n                {unstartedRunIds.length === 1 ? 'has' : 'have'} started and will refresh this asset.\n              </>\n            )}\n          </div>\n        }\n      />\n    </Box>\n  );\n};\n","import {Alert, Box, Colors, Icon} from '@dagster-io/ui';\nimport React from 'react';\n\nexport const DependsOnSelfBanner: React.FC = () => {\n  return (\n    <Box\n      padding={{vertical: 16, left: 24, right: 12}}\n      border={{side: 'bottom', width: 1, color: Colors.KeylineGray}}\n    >\n      <Alert\n        intent=\"info\"\n        icon={\n          <Icon name=\"history_toggle_off\" size={16} color={Colors.Blue700} style={{marginTop: 1}} />\n        }\n        title={\n          <div style={{fontWeight: 400}}>This asset depends on earlier partitions of itself. </div>\n        }\n      />\n    </Box>\n  );\n};\n","import {Alert, Box} from '@dagster-io/ui';\nimport {BorderSetting, DirectionalSpacing} from '@dagster-io/ui/src/components/types';\nimport React from 'react';\nimport {Link} from 'react-router-dom';\n\nimport {AssetLatestInfoRunFragment} from '../asset-graph/types/useLiveDataForAssetKeys.types';\nimport {titleForRun} from '../runs/RunUtils';\n\nexport const FailedRunSinceMaterializationBanner: React.FC<{\n  run: AssetLatestInfoRunFragment | null;\n  padding?: DirectionalSpacing;\n  border?: BorderSetting;\n}> = ({run, border, padding = {vertical: 16, left: 24, right: 12}}) => {\n  if (run) {\n    return (\n      <Box padding={padding} border={border}>\n        <Alert\n          intent=\"error\"\n          title={\n            <div style={{fontWeight: 400}}>\n              Run <Link to={`/runs/${run.id}`}>{titleForRun({runId: run.id})}</Link> failed to\n              materialize this asset.\n            </div>\n          }\n        />\n      </Box>\n    );\n  }\n  return null;\n};\n","import styled from 'styled-components/macro';\n\nimport {Colors} from './Colors';\nimport {IconWrapper} from './Icon';\n\nexport const RadioContainer = styled.div`\n  .bp4-control {\n    margin-bottom: 0;\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    input {\n      display: none;\n    }\n  }\n\n  .bp4-control.bp4-radio {\n    padding: 4px 4px 4px 0;\n  }\n\n  .bp4-control.bp4-radio.bp4-disabled {\n    cursor: default;\n    color: ${Colors.Gray300};\n\n    ${IconWrapper} {\n      opacity: 0.3;\n    }\n  }\n\n  .bp4-control .bp4-control-indicator {\n    margin: 0;\n    margin-right: 8px;\n  }\n\n  .bp4-control input:checked ~ .bp4-control-indicator {\n    background-color: ${Colors.Blue500};\n  }\n\n  .bp4-control.bp4-radio input:disabled ~ .bp4-control-indicator {\n    cursor: default;\n    opacity: 0.7;\n  }\n\n  .bp4-control.bp4-radio input:disabled:checked ~ .bp4-control-indicator {\n    background-color: ${Colors.Blue200};\n  }\n\n  .bp4-control .bp4-control-indicator,\n  .bp4-control .bp4-control-indicator::before {\n    width: 18px;\n    height: 18px;\n  }\n`;\n","import {gql, useQuery} from '@apollo/client';\nimport {Box, Colors, Icon} from '@dagster-io/ui';\nimport React from 'react';\nimport {Link} from 'react-router-dom';\n\nimport {\n  RunningBackfillsNoticeQuery,\n  RunningBackfillsNoticeQueryVariables,\n} from './types/RunningBackfillsNotice.types';\n\nexport const RunningBackfillsNotice: React.FC<{partitionSetName: string}> = ({\n  partitionSetName,\n}) => {\n  const {data} = useQuery<RunningBackfillsNoticeQuery, RunningBackfillsNoticeQueryVariables>(\n    RUNNING_BACKFILLS_NOTICE_QUERY,\n  );\n\n  const runningBackfills =\n    data?.partitionBackfillsOrError.__typename === 'PartitionBackfills'\n      ? data.partitionBackfillsOrError.results\n      : [];\n\n  const runningBackfillCount = runningBackfills.filter(\n    (r) => r.partitionSetName === partitionSetName,\n  ).length;\n\n  if (runningBackfillCount === 0) {\n    return <span />;\n  }\n  return (\n    <div style={{color: Colors.Gray400, maxWidth: 350}}>\n      {runningBackfillCount === 1\n        ? 'Note: A backfill has been requested for this job and may be refreshing displayed assets. '\n        : `Note: ${runningBackfillCount} backfills have been requested for this job and may be refreshing displayed assets. `}\n      <Link to=\"/overview/backfills\" target=\"_blank\">\n        <Box flex={{gap: 4, display: 'inline-flex', alignItems: 'center'}}>\n          View <Icon name=\"open_in_new\" color={Colors.Link} />\n        </Box>\n      </Link>\n    </div>\n  );\n};\n\nexport const RUNNING_BACKFILLS_NOTICE_QUERY = gql`\n  query RunningBackfillsNoticeQuery {\n    partitionBackfillsOrError(status: REQUESTED) {\n      __typename\n      ... on PartitionBackfills {\n        results {\n          partitionSetName\n          backfillId\n        }\n      }\n    }\n  }\n`;\n","import {gql, useApolloClient, useQuery} from '@apollo/client';\n// eslint-disable-next-line no-restricted-imports\nimport {Radio} from '@blueprintjs/core';\nimport {\n  Box,\n  Button,\n  ButtonLink,\n  Colors,\n  Dialog,\n  DialogFooter,\n  DialogHeader,\n  Tooltip,\n  Alert,\n  Checkbox,\n  Icon,\n  Subheading,\n  RadioContainer,\n} from '@dagster-io/ui';\nimport reject from 'lodash/reject';\nimport React from 'react';\nimport {useHistory} from 'react-router-dom';\nimport styled from 'styled-components/macro';\n\nimport {showCustomAlert} from '../app/CustomAlertProvider';\nimport {PipelineRunTag} from '../app/ExecutionSessionStorage';\nimport {usePermissionsForLocation} from '../app/Permissions';\nimport {PythonErrorInfo} from '../app/PythonErrorInfo';\nimport {\n  displayNameForAssetKey,\n  isHiddenAssetGroupJob,\n  itemWithAssetKey,\n} from '../asset-graph/Utils';\nimport {AssetKey} from '../assets/types';\nimport {LaunchBackfillParams, PartitionDefinitionType} from '../graphql/types';\nimport {LAUNCH_PARTITION_BACKFILL_MUTATION} from '../instance/BackfillUtils';\nimport {\n  LaunchPartitionBackfillMutation,\n  LaunchPartitionBackfillMutationVariables,\n} from '../instance/types/BackfillUtils.types';\nimport {CONFIG_PARTITION_SELECTION_QUERY} from '../launchpad/ConfigEditorConfigPicker';\nimport {useLaunchPadHooks} from '../launchpad/LaunchpadHooksContext';\nimport {TagEditor, TagContainer} from '../launchpad/TagEditor';\nimport {\n  ConfigPartitionSelectionQuery,\n  ConfigPartitionSelectionQueryVariables,\n} from '../launchpad/types/ConfigEditorConfigPicker.types';\nimport {\n  DaemonNotRunningAlert,\n  DAEMON_NOT_RUNNING_ALERT_INSTANCE_FRAGMENT,\n  showBackfillErrorToast,\n  showBackfillSuccessToast,\n  UsingDefaultLauncherAlert,\n  USING_DEFAULT_LAUNCH_ERALERT_INSTANCE_FRAGMENT,\n} from '../partitions/BackfillMessaging';\nimport {DimensionRangeWizard} from '../partitions/DimensionRangeWizard';\nimport {assembleIntoSpans, stringForSpan} from '../partitions/SpanRepresentation';\nimport {DagsterTag} from '../runs/RunTag';\nimport {testId} from '../testing/testId';\nimport {RepoAddress} from '../workspace/types';\n\nimport {AssetPartitionStatus} from './AssetPartitionStatus';\nimport {\n  executionParamsForAssetJob,\n  LaunchAssetsChoosePartitionsTarget,\n} from './LaunchAssetExecutionButton';\nimport {\n  explodePartitionKeysInSelection,\n  mergedAssetHealth,\n  partitionDefinitionsEqual,\n} from './MultipartitioningSupport';\nimport {PartitionHealthSummary} from './PartitionHealthSummary';\nimport {RunningBackfillsNotice} from './RunningBackfillsNotice';\nimport {\n  LaunchAssetChoosePartitionsQuery,\n  LaunchAssetChoosePartitionsQueryVariables,\n} from './types/LaunchAssetChoosePartitionsDialog.types';\nimport {PartitionDefinitionForLaunchAssetFragment} from './types/LaunchAssetExecutionButton.types';\nimport {usePartitionDimensionSelections} from './usePartitionDimensionSelections';\nimport {PartitionDimensionSelection, usePartitionHealthData} from './usePartitionHealthData';\n\ninterface Props {\n  open: boolean;\n  setOpen: (open: boolean) => void;\n  repoAddress: RepoAddress;\n  target: LaunchAssetsChoosePartitionsTarget;\n  assets: {\n    assetKey: AssetKey;\n    opNames: string[];\n    partitionDefinition: PartitionDefinitionForLaunchAssetFragment | null;\n  }[];\n  upstreamAssetKeys: AssetKey[]; // single layer of upstream dependencies\n  refetch?: () => Promise<void>;\n}\n\nexport const LaunchAssetChoosePartitionsDialog: React.FC<Props> = (props) => {\n  const displayName =\n    props.assets.length > 1\n      ? `${props.assets.length} assets`\n      : displayNameForAssetKey(props.assets[0].assetKey);\n\n  const title = `Launch runs to materialize ${displayName}`;\n\n  return (\n    <Dialog\n      style={{width: 700}}\n      isOpen={props.open}\n      canEscapeKeyClose\n      canOutsideClickClose\n      onClose={() => props.setOpen(false)}\n    >\n      <DialogHeader icon=\"layers\" label={title} />\n      <LaunchAssetChoosePartitionsDialogBody {...props} />\n    </Dialog>\n  );\n};\n\n// Note: This dialog loads a lot of data - the body is broken into a separate\n// component so we can be *sure* the hooks won't load data until it's opened.\n// (<Dialog> does not render it's children until open=true)\n//\n// Additionally, we want the dialog to reset when it's closed and re-opened so\n// that partition health, etc. is up-to-date.\n//\nconst LaunchAssetChoosePartitionsDialogBody: React.FC<Props> = ({\n  setOpen,\n  assets,\n  repoAddress,\n  target,\n  upstreamAssetKeys,\n  refetch: _refetch,\n}) => {\n  const partitionedAssets = assets.filter((a) => !!a.partitionDefinition);\n\n  const {\n    permissions: {canLaunchPipelineExecution, canLaunchPartitionBackfill},\n    disabledReasons,\n  } = usePermissionsForLocation(repoAddress.location);\n  const [launching, setLaunching] = React.useState(false);\n  const [tagEditorOpen, setTagEditorOpen] = React.useState<boolean>(false);\n  const [tags, setTags] = React.useState<PipelineRunTag[]>([]);\n\n  const [previewCount, setPreviewCount] = React.useState(0);\n  const morePreviewsCount = partitionedAssets.length - previewCount;\n\n  const [lastRefresh, setLastRefresh] = React.useState(Date.now());\n\n  const refetch = async () => {\n    await _refetch?.();\n    setLastRefresh(Date.now());\n  };\n\n  const assetHealth = usePartitionHealthData(\n    partitionedAssets.map((a) => a.assetKey),\n    lastRefresh.toString(),\n    'immediate',\n  );\n\n  const assetHealthLoading = assetHealth.length === 0;\n\n  const displayedHealth = React.useMemo(() => {\n    if (target.type === 'job' || assetHealthLoading) {\n      return mergedAssetHealth(assetHealth);\n    }\n    return assetHealth.find(itemWithAssetKey(target.anchorAssetKey)) || mergedAssetHealth([]);\n  }, [assetHealth, assetHealthLoading, target]);\n\n  const displayedBaseAsset =\n    target.type === 'job'\n      ? partitionedAssets[0]\n      : partitionedAssets.find(itemWithAssetKey(target.anchorAssetKey));\n\n  const displayedPartitionDefinition = displayedBaseAsset?.partitionDefinition;\n\n  const knownDimensions = partitionedAssets[0].partitionDefinition?.dimensionTypes || [];\n  const [missingFailedOnly, setMissingFailedOnly] = React.useState(true);\n\n  const [selections, setSelections] = usePartitionDimensionSelections({\n    knownDimensionNames: knownDimensions.map((d) => d.name),\n    modifyQueryString: false,\n    assetHealth: displayedHealth,\n    skipPartitionKeyValidation:\n      displayedPartitionDefinition?.type === PartitionDefinitionType.DYNAMIC,\n    shouldReadPartitionQueryStringParam: true,\n  });\n\n  const keysInSelection = React.useMemo(\n    () =>\n      explodePartitionKeysInSelection(selections, (dimensionKeys: string[]) => {\n        let states = displayedHealth.stateForKey(dimensionKeys);\n        if (!(states instanceof Array)) {\n          states = [states];\n        }\n        return states;\n      }),\n    [selections, displayedHealth],\n  );\n\n  const [launchWithRangesAsTags, setLaunchWithRangesAsTags] = React.useState(false);\n  const canLaunchWithRangesAsTags =\n    selections.every((s) => s.selectedRanges.length === 1) &&\n    selections.some((s) => s.selectedKeys.length > 1);\n  const keysFiltered = React.useMemo(\n    () =>\n      missingFailedOnly\n        ? keysInSelection.filter((key) =>\n            [AssetPartitionStatus.MISSING, AssetPartitionStatus.FAILED].some((state) =>\n              key.state.includes(state),\n            ),\n          )\n        : keysInSelection,\n    [keysInSelection, missingFailedOnly],\n  );\n\n  const client = useApolloClient();\n  const history = useHistory();\n\n  const {useLaunchWithTelemetry} = useLaunchPadHooks();\n  const launchWithTelemetry = useLaunchWithTelemetry();\n  const launchAsBackfill =\n    target.type === 'pureWithAnchorAsset' || (!launchWithRangesAsTags && keysFiltered.length !== 1);\n\n  React.useEffect(() => {\n    !canLaunchWithRangesAsTags && setLaunchWithRangesAsTags(false);\n  }, [canLaunchWithRangesAsTags]);\n\n  React.useEffect(() => {\n    launchWithRangesAsTags && setMissingFailedOnly(false);\n  }, [launchWithRangesAsTags]);\n\n  React.useEffect(() => {\n    target.type === 'pureWithAnchorAsset' && setMissingFailedOnly(false);\n  }, [target]);\n\n  const onLaunch = async () => {\n    setLaunching(true);\n\n    if (launchAsBackfill) {\n      await onLaunchAsBackfill();\n    } else {\n      await onLaunchAsSingleRun();\n    }\n    setLaunching(false);\n  };\n\n  const onLaunchAsSingleRun = async () => {\n    if (!('jobName' in target)) {\n      // Should never happen, this is essentially an assertion failure\n      showCustomAlert({\n        title: 'Unable to launch as single run',\n        body:\n          'This selection is not valid for a single run launch. ' +\n          'Please report this error to the Dagster team.',\n      });\n      return;\n    }\n\n    if (!canLaunchPipelineExecution) {\n      // Should never happen, this is essentially an assertion failure\n      showCustomAlert({\n        title: 'Unable to launch as single run',\n        body: 'You do not have permission to launch this job.',\n      });\n    }\n\n    const {data: tagAndConfigData} = await client.query<\n      ConfigPartitionSelectionQuery,\n      ConfigPartitionSelectionQueryVariables\n    >({\n      query: CONFIG_PARTITION_SELECTION_QUERY,\n      fetchPolicy: 'network-only',\n      variables: {\n        repositorySelector: {\n          repositoryLocationName: repoAddress.location,\n          repositoryName: repoAddress.name,\n        },\n        partitionSetName: target.partitionSetName,\n        partitionName: keysFiltered[0].partitionKey,\n      },\n    });\n\n    if (\n      !tagAndConfigData ||\n      !tagAndConfigData.partitionSetOrError ||\n      tagAndConfigData.partitionSetOrError.__typename !== 'PartitionSet' ||\n      !tagAndConfigData.partitionSetOrError.partition\n    ) {\n      return;\n    }\n\n    const {partition} = tagAndConfigData.partitionSetOrError;\n\n    if (partition.tagsOrError.__typename === 'PythonError') {\n      showCustomAlert({\n        title: 'Unable to load tags',\n        body: <PythonErrorInfo error={partition.tagsOrError} />,\n      });\n      return;\n    }\n    if (partition.runConfigOrError.__typename === 'PythonError') {\n      showCustomAlert({\n        title: 'Unable to load tags',\n        body: <PythonErrorInfo error={partition.runConfigOrError} />,\n      });\n      return;\n    }\n\n    const runConfigData = partition.runConfigOrError.yaml || '';\n    let allTags = [...partition.tagsOrError.results, ...tags];\n\n    if (launchWithRangesAsTags) {\n      allTags = allTags.filter((t) => !t.key.startsWith(DagsterTag.Partition));\n      allTags.push({\n        key: DagsterTag.AssetPartitionRangeStart,\n        value: keysInSelection[0].partitionKey,\n      });\n      allTags.push({\n        key: DagsterTag.AssetPartitionRangeEnd,\n        value: keysInSelection[keysInSelection.length - 1].partitionKey,\n      });\n    }\n\n    const result = await launchWithTelemetry(\n      {\n        executionParams: {\n          ...executionParamsForAssetJob(repoAddress, target.jobName, assets, allTags),\n          runConfigData,\n          mode: partition.mode,\n        },\n      },\n      'toast',\n    );\n\n    if (result?.__typename === 'LaunchRunSuccess') {\n      setOpen(false);\n    }\n  };\n\n  const onLaunchAsBackfill = async () => {\n    const selectorIfJobPage: LaunchBackfillParams['selector'] | undefined =\n      'jobName' in target && !isHiddenAssetGroupJob(target.jobName)\n        ? {\n            partitionSetName: target.partitionSetName,\n            repositorySelector: {\n              repositoryLocationName: repoAddress.location,\n              repositoryName: repoAddress.name,\n            },\n          }\n        : undefined;\n\n    const {data: launchBackfillData} = await client.mutate<\n      LaunchPartitionBackfillMutation,\n      LaunchPartitionBackfillMutationVariables\n    >({\n      mutation: LAUNCH_PARTITION_BACKFILL_MUTATION,\n      variables: {\n        backfillParams: {\n          selector: selectorIfJobPage,\n          assetSelection: assets.map((a) => ({path: a.assetKey.path})),\n          partitionNames: keysFiltered.map((k) => k.partitionKey),\n          fromFailure: false,\n          tags,\n        },\n      },\n    });\n\n    if (launchBackfillData?.launchPartitionBackfill.__typename === 'LaunchBackfillSuccess') {\n      showBackfillSuccessToast(\n        history,\n        launchBackfillData?.launchPartitionBackfill.backfillId,\n        true,\n      );\n      setOpen(false);\n    } else {\n      showBackfillErrorToast(launchBackfillData);\n    }\n  };\n\n  const launchButton = () => {\n    if (launchAsBackfill && !canLaunchPartitionBackfill) {\n      return (\n        <Tooltip content={disabledReasons.canLaunchPartitionBackfill}>\n          <Button disabled>\n            {target.type === 'job'\n              ? `Launch ${keysFiltered.length}-run backfill`\n              : 'Launch backfill'}\n          </Button>\n        </Tooltip>\n      );\n    }\n\n    if (!launchAsBackfill && !canLaunchPipelineExecution) {\n      return (\n        <Tooltip content={disabledReasons.canLaunchPipelineExecution}>\n          <Button disabled>Launch 1 run</Button>\n        </Tooltip>\n      );\n    }\n\n    return (\n      <Button\n        data-testid={testId('launch-button')}\n        intent=\"primary\"\n        onClick={onLaunch}\n        disabled={keysFiltered.length === 0}\n        loading={launching}\n      >\n        {launching\n          ? 'Launching...'\n          : launchAsBackfill\n          ? target.type === 'job'\n            ? `Launch ${keysFiltered.length}-run backfill`\n            : 'Launch backfill'\n          : `Launch 1 run`}\n      </Button>\n    );\n  };\n\n  return (\n    <>\n      <div data-testid={testId('choose-partitions-dialog')}>\n        <Warnings\n          launchAsBackfill={launchAsBackfill}\n          isPureAssetBackfill={target.type === 'pureWithAnchorAsset'}\n          upstreamAssetKeys={upstreamAssetKeys}\n          selections={selections}\n          setSelections={setSelections}\n        />\n        <ToggleableSection\n          title={<Subheading>Partition selection</Subheading>}\n          isInitiallyOpen={true}\n        >\n          {selections.map((range, idx) => (\n            <Box\n              key={range.dimension.name}\n              border={{\n                side: 'bottom',\n                width: 1,\n                color: Colors.KeylineGray,\n              }}\n              padding={{vertical: 12, horizontal: 24}}\n            >\n              {target.type === 'pureWithAnchorAsset' && (\n                <Box flex={{gap: 8}} data-testid={testId('anchor-asset-label')}>\n                  <Icon name=\"asset\" size={20} />\n                  <Subheading>{displayNameForAssetKey(target.anchorAssetKey)}</Subheading>\n                </Box>\n              )}\n              <Box as={Subheading} flex={{alignItems: 'center', gap: 8}}>\n                <Icon name=\"partition\" />\n                {range.dimension.name}\n              </Box>\n              <Box>\n                Select partitions to materialize.{' '}\n                {range.dimension.type === PartitionDefinitionType.TIME_WINDOW\n                  ? 'Click and drag to select a range on the timeline.'\n                  : null}\n              </Box>\n              <DimensionRangeWizard\n                partitionKeys={range.dimension.partitionKeys}\n                health={{\n                  ranges: displayedHealth.rangesForSingleDimension(\n                    idx,\n                    selections.length === 2 ? selections[1 - idx].selectedRanges : undefined,\n                  ),\n                }}\n                dimensionType={range.dimension.type}\n                selected={range.selectedKeys}\n                setSelected={(selectedKeys) =>\n                  setSelections((selections) =>\n                    selections.map((r) =>\n                      r.dimension === range.dimension ? {...r, selectedKeys} : r,\n                    ),\n                  )\n                }\n                partitionDefinitionName={\n                  displayedPartitionDefinition?.name ||\n                  displayedBaseAsset?.partitionDefinition?.dimensionTypes.find(\n                    (d) => d.name === range.dimension.name,\n                  )?.dynamicPartitionsDefinitionName\n                }\n                repoAddress={repoAddress}\n                refetch={refetch}\n              />\n            </Box>\n          ))}\n        </ToggleableSection>\n        <ToggleableSection\n          title={\n            <Box flex={{direction: 'row', justifyContent: 'space-between'}}>\n              <Subheading>Tags</Subheading>\n              <span>{tags.length} tags</span>\n            </Box>\n          }\n          isInitiallyOpen={false}\n        >\n          <Box padding={{vertical: 16, horizontal: 24}} flex={{direction: 'column', gap: 12}}>\n            <TagEditor\n              tagsFromSession={tags}\n              onChange={setTags}\n              open={tagEditorOpen}\n              onRequestClose={() => setTagEditorOpen(false)}\n            />\n            <div>Tags will be applied to all backfill runs</div>\n            {tags.length ? (\n              <TagContainer\n                tagsFromSession={tags}\n                onRequestEdit={() => setTagEditorOpen(true)}\n                actions={[\n                  {\n                    label: 'Remove',\n                    onClick: (tag) => {\n                      setTags(tags.filter((t) => t.key !== tag.key));\n                    },\n                  },\n                ]}\n              />\n            ) : null}\n            <div>\n              <Button onClick={() => setTagEditorOpen(true)}>\n                {`${tags.length ? 'Edit' : 'Add'} tags`}\n              </Button>\n            </div>\n          </Box>\n        </ToggleableSection>\n        <ToggleableSection\n          title={<Subheading data-testid={testId('backfill-options')}>Backfill options</Subheading>}\n          isInitiallyOpen={true}\n        >\n          {target.type === 'job' && (\n            <Box padding={{vertical: 16, horizontal: 24}} flex={{direction: 'column', gap: 12}}>\n              <Checkbox\n                data-testid={testId('missing-only-checkbox')}\n                label=\"Backfill only failed and missing partitions within selection\"\n                checked={missingFailedOnly}\n                disabled={launchWithRangesAsTags}\n                onChange={() => setMissingFailedOnly(!missingFailedOnly)}\n              />\n              <RadioContainer>\n                <Subheading>Launch as...</Subheading>\n                <Radio\n                  data-testid={testId('ranges-as-tags-true-radio')}\n                  checked={canLaunchWithRangesAsTags && launchWithRangesAsTags}\n                  disabled={!canLaunchWithRangesAsTags}\n                  onChange={() => setLaunchWithRangesAsTags(!launchWithRangesAsTags)}\n                >\n                  <Box flex={{direction: 'row', alignItems: 'center', gap: 8}}>\n                    <span>Single run</span>\n                    <Tooltip\n                      targetTagName=\"div\"\n                      position=\"top-left\"\n                      content={\n                        <div style={{maxWidth: 300}}>\n                          This option requires that your assets are written to operate on a\n                          partition key range via context.asset_partition_key_range_for_output or\n                          context.asset_partitions_time_window_for_output.\n                        </div>\n                      }\n                    >\n                      <Icon name=\"info\" color={Colors.Gray500} />\n                    </Tooltip>\n                  </Box>\n                </Radio>\n                <Radio\n                  data-testid={testId('ranges-as-tags-false-radio')}\n                  checked={!canLaunchWithRangesAsTags || !launchWithRangesAsTags}\n                  disabled={!canLaunchWithRangesAsTags}\n                  onChange={() => setLaunchWithRangesAsTags(!launchWithRangesAsTags)}\n                >\n                  Multiple runs (One per selected partition)\n                </Radio>\n              </RadioContainer>\n            </Box>\n          )}\n        </ToggleableSection>\n\n        <Box padding={{horizontal: 24}}>\n          {previewCount > 0 && (\n            <Box\n              margin={{top: 16}}\n              flex={{direction: 'column', gap: 8}}\n              padding={{vertical: 16, horizontal: 20}}\n              border={{side: 'horizontal', width: 1, color: Colors.KeylineGray}}\n              background={Colors.Gray100}\n              style={{\n                marginLeft: -20,\n                marginRight: -20,\n                overflowY: 'auto',\n                overflowX: 'visible',\n                maxHeight: '35vh',\n              }}\n            >\n              {partitionedAssets.slice(0, previewCount).map((a) => (\n                <PartitionHealthSummary\n                  key={displayNameForAssetKey(a.assetKey)}\n                  assetKey={a.assetKey}\n                  showAssetKey\n                  data={assetHealth}\n                  selections={\n                    a.partitionDefinition &&\n                    displayedPartitionDefinition &&\n                    partitionDefinitionsEqual(a.partitionDefinition, displayedPartitionDefinition)\n                      ? selections\n                      : undefined\n                  }\n                />\n              ))}\n              {morePreviewsCount > 0 && (\n                <Box margin={{vertical: 8}}>\n                  <ButtonLink onClick={() => setPreviewCount(partitionedAssets.length)}>\n                    Show {morePreviewsCount} more {morePreviewsCount > 1 ? 'previews' : 'preview'}\n                  </ButtonLink>\n                </Box>\n              )}\n            </Box>\n          )}\n\n          {previewCount === 0 && partitionedAssets.length > 1 && (\n            <Box margin={{top: 16, bottom: 8}}>\n              <ButtonLink onClick={() => setPreviewCount(5)}>\n                Show per-asset partition health\n              </ButtonLink>\n            </Box>\n          )}\n        </Box>\n      </div>\n\n      <DialogFooter\n        topBorder\n        left={\n          'partitionSetName' in target && (\n            <RunningBackfillsNotice partitionSetName={target.partitionSetName} />\n          )\n        }\n      >\n        <Button intent=\"none\" onClick={() => setOpen(false)}>\n          Cancel\n        </Button>\n        {launchButton()}\n      </DialogFooter>\n    </>\n  );\n};\n\nconst UpstreamUnavailableWarning: React.FC<{\n  upstreamAssetKeys: AssetKey[];\n  selections: PartitionDimensionSelection[];\n  setSelections: (next: PartitionDimensionSelection[]) => void;\n}> = ({upstreamAssetKeys, selections, setSelections}) => {\n  // We want to warn if an immediately upstream asset 1) has the same partitioning and\n  // 2) is missing materializations for keys in `allSelected`. We only offer this feature\n  // for single-dimensional partitioned assets because it's difficult to express the\n  // unavailable partitions in the multi-dimensional case and our \"two range inputs\" won't\n  // allow us to remove missing individual pairs.\n  const upstreamAssetHealth = usePartitionHealthData(upstreamAssetKeys);\n  if (upstreamAssetHealth.length === 0) {\n    return null;\n  }\n\n  const upstreamUnavailable = (singleDimensionKey: string) =>\n    upstreamAssetHealth.some((a) => {\n      // If the key is not undefined, it's present in the partition key space of the asset\n      return (\n        a.dimensions.length && a.stateForKey([singleDimensionKey]) === AssetPartitionStatus.MISSING\n      );\n    });\n\n  const upstreamUnavailableSpans =\n    selections.length === 1\n      ? assembleIntoSpans(selections[0].selectedKeys, upstreamUnavailable).filter(\n          (s) => s.status === true,\n        )\n      : [];\n\n  if (upstreamUnavailableSpans.length === 0) {\n    return null;\n  }\n\n  const onRemoveUpstreamUnavailable = () => {\n    if (selections.length > 1) {\n      throw new Error('Assertion failed, this feature is only available for 1 dimensional assets');\n    }\n    setSelections([\n      {...selections[0], selectedKeys: reject(selections[0].selectedKeys, upstreamUnavailable)},\n    ]);\n  };\n\n  return (\n    <Alert\n      intent=\"warning\"\n      title=\"Upstream data missing\"\n      description={\n        <>\n          {upstreamUnavailableSpans\n            .map((span) => stringForSpan(span, selections[0].selectedKeys))\n            .join(', ')}\n          {\n            ' cannot be materialized because upstream materializations are missing. Consider materializing upstream assets or '\n          }\n          <ButtonLink underline=\"always\" onClick={onRemoveUpstreamUnavailable}>\n            remove these partitions\n          </ButtonLink>\n          {` to avoid failures.`}\n        </>\n      }\n    />\n  );\n};\n\nexport const LAUNCH_ASSET_CHOOSE_PARTITIONS_QUERY = gql`\n  query LaunchAssetChoosePartitionsQuery {\n    instance {\n      ...DaemonNotRunningAlertInstanceFragment\n      ...UsingDefaultLauncherAlertInstanceFragment\n    }\n  }\n\n  ${DAEMON_NOT_RUNNING_ALERT_INSTANCE_FRAGMENT}\n  ${USING_DEFAULT_LAUNCH_ERALERT_INSTANCE_FRAGMENT}\n`;\n\nconst Warnings = ({\n  isPureAssetBackfill,\n  launchAsBackfill,\n  upstreamAssetKeys,\n  selections,\n  setSelections,\n}: {\n  launchAsBackfill: boolean;\n  isPureAssetBackfill: boolean;\n  upstreamAssetKeys: AssetKey[];\n  selections: PartitionDimensionSelection[];\n  setSelections: (next: PartitionDimensionSelection[]) => void;\n}) => {\n  const instanceResult = useQuery<\n    LaunchAssetChoosePartitionsQuery,\n    LaunchAssetChoosePartitionsQueryVariables\n  >(LAUNCH_ASSET_CHOOSE_PARTITIONS_QUERY);\n  const instance = instanceResult.data?.instance;\n\n  const alerts = [\n    isPureAssetBackfill ? (\n      <Alert\n        key=\"alert\"\n        intent=\"info\"\n        title=\"Dagster will materialize all partitions downstream of the selected partitions for the selected assets, using separate runs as needed.\"\n      />\n    ) : null,\n    UpstreamUnavailableWarning({\n      upstreamAssetKeys,\n      selections,\n      setSelections,\n    }),\n    instance && launchAsBackfill && DaemonNotRunningAlert({instance}),\n    instance && launchAsBackfill && UsingDefaultLauncherAlert({instance}),\n  ]\n    .filter((a) => !!a)\n    .map((a, index) => <Box key={index}>{a}</Box>);\n\n  if (!instance || !alerts.length) {\n    return null;\n  }\n\n  return (\n    <ToggleableSection\n      background={Colors.Yellow50}\n      isInitiallyOpen={false}\n      title={\n        <Box\n          flex={{direction: 'row', justifyContent: 'space-between', alignItems: 'center'}}\n          style={{color: Colors.Yellow700}}\n        >\n          <Box flex={{alignItems: 'center', gap: 12}}>\n            <Icon name=\"warning\" color={Colors.Yellow700} />\n            <Subheading>Warnings</Subheading>\n          </Box>\n          <span>{alerts.length} warnings</span>{' '}\n        </Box>\n      }\n    >\n      <Box flex={{direction: 'column', gap: 16}} padding={{vertical: 12, horizontal: 24}}>\n        {alerts}\n      </Box>\n    </ToggleableSection>\n  );\n};\n\nconst ToggleableSection = ({\n  isInitiallyOpen,\n  title,\n  children,\n  background,\n}: {\n  isInitiallyOpen: boolean;\n  title: React.ReactNode;\n  children: React.ReactNode;\n  background?: string;\n}) => {\n  const [isOpen, setIsOpen] = React.useState(isInitiallyOpen);\n  return (\n    <Box>\n      <Box\n        onClick={() => setIsOpen(!isOpen)}\n        background={background ?? Colors.Gray50}\n        border={{side: 'bottom', color: Colors.KeylineGray, width: 1}}\n        flex={{alignItems: 'center', direction: 'row'}}\n        padding={{vertical: 12, horizontal: 24}}\n        style={{cursor: 'pointer'}}\n      >\n        <Rotateable $rotate={!isOpen}>\n          <Icon name=\"arrow_drop_down\" />\n        </Rotateable>\n        <div style={{flex: 1}}>{title}</div>\n      </Box>\n      {isOpen && <Box>{children}</Box>}\n    </Box>\n  );\n};\n\nconst Rotateable = styled.span<{$rotate: boolean}>`\n  ${({$rotate}) => ($rotate ? 'transform: rotate(-90deg);' : '')}\n`;\n","import {ApolloClient, gql, useApolloClient} from '@apollo/client';\nimport {Box, Button, Icon, Menu, MenuItem, Popover, Spinner, Tooltip} from '@dagster-io/ui';\nimport pick from 'lodash/pick';\nimport uniq from 'lodash/uniq';\nimport React from 'react';\n\nimport {showCustomAlert} from '../app/CustomAlertProvider';\nimport {useConfirmation} from '../app/CustomConfirmationProvider';\nimport {IExecutionSession} from '../app/ExecutionSessionStorage';\nimport {\n  displayNameForAssetKey,\n  isHiddenAssetGroupJob,\n  LiveData,\n  toGraphId,\n  tokenForAssetKey,\n} from '../asset-graph/Utils';\nimport {useLaunchPadHooks} from '../launchpad/LaunchpadHooksContext';\nimport {AssetLaunchpad} from '../launchpad/LaunchpadRoot';\nimport {LaunchPipelineExecutionMutationVariables} from '../runs/types/RunUtils.types';\nimport {testId} from '../testing/testId';\nimport {CONFIG_TYPE_SCHEMA_FRAGMENT} from '../typeexplorer/ConfigTypeSchema';\nimport {buildRepoAddress} from '../workspace/buildRepoAddress';\nimport {repoAddressAsHumanString} from '../workspace/repoAddressAsString';\nimport {RepoAddress} from '../workspace/types';\n\nimport {ASSET_NODE_CONFIG_FRAGMENT} from './AssetConfig';\nimport {MULTIPLE_DEFINITIONS_WARNING} from './AssetDefinedInMultipleReposNotice';\nimport {LaunchAssetChoosePartitionsDialog} from './LaunchAssetChoosePartitionsDialog';\nimport {partitionDefinitionsEqual} from './MultipartitioningSupport';\nimport {isAssetMissing, isAssetStale} from './Stale';\nimport {AssetKey} from './types';\nimport {\n  LaunchAssetExecutionAssetNodeFragment,\n  LaunchAssetLoaderQuery,\n  LaunchAssetLoaderQueryVariables,\n  LaunchAssetLoaderResourceQuery,\n  LaunchAssetLoaderResourceQueryVariables,\n  LaunchAssetCheckUpstreamQuery,\n  LaunchAssetCheckUpstreamQueryVariables,\n} from './types/LaunchAssetExecutionButton.types';\n\nexport type LaunchAssetsChoosePartitionsTarget =\n  | {type: 'job'; jobName: string; partitionSetName: string}\n  | {type: 'pureWithAnchorAsset'; anchorAssetKey: AssetKey};\n\ntype LaunchAssetsState =\n  | {type: 'none'}\n  | {type: 'loading'}\n  | {type: 'error'; error: string}\n  | {\n      type: 'launchpad';\n      jobName: string;\n      sessionPresets: Partial<IExecutionSession>;\n      repoAddress: RepoAddress;\n    }\n  | {\n      type: 'partitions';\n      target: LaunchAssetsChoosePartitionsTarget;\n      assets: LaunchAssetExecutionAssetNodeFragment[];\n      upstreamAssetKeys: AssetKey[];\n      repoAddress: RepoAddress;\n    }\n  | {\n      type: 'single-run';\n      executionParams: LaunchPipelineExecutionMutationVariables['executionParams'];\n    };\n\nconst countOrBlank = (k: unknown[]) => (k.length > 1 ? ` (${k.length})` : '');\n\ntype Asset =\n  | {\n      assetKey: AssetKey;\n      hasMaterializePermission: boolean;\n      partitionDefinition: {__typename: string} | null;\n      isSource: boolean;\n    }\n  | {\n      assetKey: AssetKey;\n      hasMaterializePermission: boolean;\n      isPartitioned: boolean;\n      isSource: boolean;\n    };\n\nexport type AssetsInScope = {all: Asset[]; skipAllTerm?: boolean} | {selected: Asset[]};\n\ntype LaunchOption = {\n  assetKeys: AssetKey[];\n  label: string;\n  hasMaterializePermission: boolean;\n  icon?: JSX.Element;\n};\n\nconst isAnyPartitioned = (assets: Asset[]) =>\n  assets.some(\n    (a) =>\n      ('partitionDefinition' in a && !!a.partitionDefinition) ||\n      ('isPartitioned' in a && a.isPartitioned),\n  );\n\nexport const ERROR_INVALID_ASSET_SELECTION =\n  `Assets can only be materialized together if they are defined in` +\n  ` the same code location and share a partition space, or form a connected` +\n  ` graph in which root assets share the same partitioning.`;\n\nfunction optionsForButton(scope: AssetsInScope, liveDataForStale?: LiveData): LaunchOption[] {\n  // If you pass a set of selected assets, we always show just one option\n  // to materialize that selection.\n  if ('selected' in scope) {\n    const assets = scope.selected.filter((a) => !a.isSource);\n    const hasMaterializePermission = scope.selected.every(\n      (assetNode) => assetNode.hasMaterializePermission,\n    );\n\n    return [\n      {\n        assetKeys: assets.map((a) => a.assetKey),\n        label: `Materialize selected${countOrBlank(assets)}${isAnyPartitioned(assets) ? '' : ''}`,\n        hasMaterializePermission,\n      },\n    ];\n  }\n\n  const options: LaunchOption[] = [];\n  const assets = scope.all.filter((a) => !a.isSource);\n  const hasMaterializePermission = assets.every((assetNode) => assetNode.hasMaterializePermission);\n\n  options.push({\n    assetKeys: assets.map((a) => a.assetKey),\n    label:\n      assets.length > 1 && !scope.skipAllTerm\n        ? `Materialize all${isAnyPartitioned(assets) ? '' : ''}`\n        : `Materialize${isAnyPartitioned(assets) ? '' : ''}`,\n    hasMaterializePermission,\n  });\n\n  if (liveDataForStale) {\n    const missingOrStale = assets.filter(\n      (a) =>\n        isAssetMissing(liveDataForStale[toGraphId(a.assetKey)]) ||\n        isAssetStale(liveDataForStale[toGraphId(a.assetKey)]),\n    );\n\n    options.push({\n      assetKeys: missingOrStale.map((a) => a.assetKey),\n      label: `Propagate changes${countOrBlank(missingOrStale)}`,\n      hasMaterializePermission,\n      icon: <Icon name=\"changes_present\" />,\n    });\n  }\n\n  return options;\n}\n\nexport const LaunchAssetExecutionButton: React.FC<{\n  scope: AssetsInScope;\n  liveDataForStale?: LiveData; // For \"stale\" dropdown options\n  intent?: 'primary' | 'none';\n  preferredJobName?: string;\n}> = ({scope, liveDataForStale, preferredJobName, intent = 'primary'}) => {\n  const {onClick, loading, launchpadElement} = useMaterializationAction(preferredJobName);\n  const [isOpen, setIsOpen] = React.useState(false);\n\n  const options = optionsForButton(scope, liveDataForStale);\n  const firstOption = options[0];\n  const hasMaterializePermission = firstOption.hasMaterializePermission;\n\n  const {MaterializeButton} = useLaunchPadHooks();\n\n  if (!firstOption) {\n    return <span />;\n  }\n\n  if (!hasMaterializePermission) {\n    return (\n      <Tooltip content=\"You do not have permission to materialize assets\" position=\"bottom-right\">\n        <Button intent={intent} icon={<Icon name=\"materialization\" />} disabled>\n          {firstOption.label}\n        </Button>\n      </Tooltip>\n    );\n  }\n\n  return (\n    <>\n      <Box flex={{alignItems: 'center'}}>\n        <Tooltip\n          content=\"Shift+click to add configuration\"\n          position=\"bottom-right\"\n          useDisabledButtonTooltipFix\n        >\n          <MaterializeButton\n            intent={intent}\n            data-testid={testId('materialize-button')}\n            onClick={(e) => onClick(firstOption.assetKeys, e)}\n            style={{\n              borderTopRightRadius: 0,\n              borderBottomRightRadius: 0,\n              borderRight: `1px solid rgba(255,255,255,0.2)`,\n            }}\n            disabled={!firstOption.assetKeys.length}\n            icon={loading ? <Spinner purpose=\"body-text\" /> : <Icon name=\"materialization\" />}\n          >\n            {firstOption.label}\n          </MaterializeButton>\n        </Tooltip>\n\n        <Popover\n          isOpen={isOpen}\n          onInteraction={(nextOpen) => setIsOpen(nextOpen)}\n          position=\"bottom-right\"\n          content={\n            <Menu>\n              <MenuItem\n                text=\"Open in launchpad\"\n                icon={<Icon name=\"open_in_new\" />}\n                onClick={(e: React.MouseEvent<any>) => {\n                  onClick(firstOption.assetKeys, e, true);\n                }}\n              />\n              {options.slice(1).map((option) => (\n                <MenuItem\n                  key={option.label}\n                  text={option.label}\n                  icon={option.icon || 'materialization'}\n                  disabled={option.assetKeys.length === 0}\n                  onClick={(e) => onClick(option.assetKeys, e)}\n                />\n              ))}\n            </Menu>\n          }\n        >\n          <Button\n            role=\"button\"\n            style={{minWidth: 'initial', borderTopLeftRadius: 0, borderBottomLeftRadius: 0}}\n            icon={<Icon name=\"arrow_drop_down\" />}\n            disabled={!firstOption.assetKeys.length}\n            intent={intent}\n          />\n        </Popover>\n      </Box>\n      {launchpadElement}\n    </>\n  );\n};\n\nexport const useMaterializationAction = (preferredJobName?: string) => {\n  const {useLaunchWithTelemetry} = useLaunchPadHooks();\n  const launchWithTelemetry = useLaunchWithTelemetry();\n\n  const client = useApolloClient();\n  const confirm = useConfirmation();\n\n  const [state, setState] = React.useState<LaunchAssetsState>({type: 'none'});\n\n  const onClick = async (\n    assetKeys: AssetKey[],\n    e: React.MouseEvent<any>,\n    _forceLaunchpad = false,\n  ) => {\n    if (state.type === 'loading') {\n      return;\n    }\n    setState({type: 'loading'});\n\n    const result = await client.query<LaunchAssetLoaderQuery, LaunchAssetLoaderQueryVariables>({\n      query: LAUNCH_ASSET_LOADER_QUERY,\n      variables: {assetKeys: assetKeys.map(({path}) => ({path}))},\n    });\n\n    if (result.data.assetNodeDefinitionCollisions.length) {\n      showCustomAlert(buildAssetCollisionsAlert(result.data));\n      setState({type: 'none'});\n      return;\n    }\n\n    const assets = result.data.assetNodes;\n    const forceLaunchpad = e.shiftKey || _forceLaunchpad;\n\n    const next = await stateForLaunchingAssets(client, assets, forceLaunchpad, preferredJobName);\n\n    if (next.type === 'error') {\n      showCustomAlert({\n        title: 'Unable to Materialize',\n        body: next.error,\n      });\n      setState({type: 'none'});\n      return;\n    }\n\n    const missing = await upstreamAssetsWithNoMaterializations(client, assets);\n    if (missing.length) {\n      setState({type: 'none'});\n      try {\n        await confirm({\n          title: 'Are you sure?',\n          description: (\n            <>\n              <div>\n                Materializing these assets may fail because the upstream assets listed below have\n                not been materialized yet.\n              </div>\n              <ul>\n                {missing.map((assetKey, idx) => (\n                  <li key={idx}>{displayNameForAssetKey(assetKey)}</li>\n                ))}\n              </ul>\n            </>\n          ),\n        });\n        setState({type: 'loading'});\n      } catch {\n        return;\n      }\n    }\n\n    if (next.type === 'single-run') {\n      await launchWithTelemetry({executionParams: next.executionParams}, 'toast');\n      setState({type: 'none'});\n    } else {\n      setState(next);\n    }\n  };\n\n  const launchpad = () => {\n    if (state.type === 'launchpad') {\n      return (\n        <AssetLaunchpad\n          assetJobName={state.jobName}\n          repoAddress={state.repoAddress}\n          sessionPresets={state.sessionPresets}\n          open={true}\n          setOpen={() => setState({type: 'none'})}\n        />\n      );\n    }\n\n    if (state.type === 'partitions') {\n      return (\n        <LaunchAssetChoosePartitionsDialog\n          assets={state.assets}\n          upstreamAssetKeys={state.upstreamAssetKeys}\n          repoAddress={state.repoAddress}\n          target={state.target}\n          open={true}\n          setOpen={() => setState({type: 'none'})}\n          refetch={async () => {\n            const result = await client.query<\n              LaunchAssetLoaderQuery,\n              LaunchAssetLoaderQueryVariables\n            >({\n              query: LAUNCH_ASSET_LOADER_QUERY,\n              variables: {assetKeys: state.assets.map(({assetKey}) => ({path: assetKey.path}))},\n            });\n            const assets = result.data.assetNodes;\n            const next = await stateForLaunchingAssets(client, assets, false, preferredJobName);\n            if (next.type === 'error') {\n              showCustomAlert({\n                title: 'Unable to Materialize',\n                body: next.error,\n              });\n              setState({type: 'none'});\n              return;\n            }\n            setState(next);\n          }}\n        />\n      );\n    }\n\n    return null;\n  };\n\n  return {onClick, loading: state.type === 'loading', launchpadElement: launchpad()};\n};\n\nasync function stateForLaunchingAssets(\n  client: ApolloClient<any>,\n  assets: LaunchAssetExecutionAssetNodeFragment[],\n  forceLaunchpad: boolean,\n  preferredJobName?: string,\n): Promise<LaunchAssetsState> {\n  if (assets.some((x) => x.isSource)) {\n    return {\n      type: 'error',\n      error: 'One or more source assets are selected and cannot be materialized.',\n    };\n  }\n\n  const repoAddress = buildRepoAddress(\n    assets[0]?.repository.name || '',\n    assets[0]?.repository.location.name || '',\n  );\n  const jobName = getCommonJob(assets, preferredJobName);\n  const partitionDefinition = assets.find((a) => !!a.partitionDefinition)?.partitionDefinition;\n\n  const inSameRepo = assets.every(\n    (a) =>\n      a.repository.name === repoAddress.name && a.repository.location.name === repoAddress.location,\n  );\n  const inSameOrNoPartitionSpace = assets.every(\n    (a) =>\n      !a.partitionDefinition ||\n      !partitionDefinition ||\n      partitionDefinitionsEqual(a.partitionDefinition, partitionDefinition),\n  );\n\n  if (!inSameRepo || !inSameOrNoPartitionSpace || !jobName) {\n    const anchorAsset = getAnchorAssetForPartitionMappedBackfill(assets);\n    if (!anchorAsset) {\n      return {\n        type: 'error',\n        error: ERROR_INVALID_ASSET_SELECTION,\n      };\n    }\n    return {\n      type: 'partitions',\n      assets,\n      target: {type: 'pureWithAnchorAsset', anchorAssetKey: anchorAsset.assetKey},\n      upstreamAssetKeys: getUpstreamAssetKeys(assets),\n      repoAddress,\n    };\n  }\n\n  const resourceResult = await client.query<\n    LaunchAssetLoaderResourceQuery,\n    LaunchAssetLoaderResourceQueryVariables\n  >({\n    query: LAUNCH_ASSET_LOADER_RESOURCE_QUERY,\n    variables: {\n      pipelineName: jobName,\n      repositoryName: assets[0].repository.name,\n      repositoryLocationName: assets[0].repository.location.name,\n    },\n  });\n  const pipeline = resourceResult.data.pipelineOrError;\n  if (pipeline.__typename !== 'Pipeline') {\n    return {type: 'error', error: pipeline.message};\n  }\n  const partitionSets = resourceResult.data.partitionSetsOrError;\n  if (partitionSets.__typename !== 'PartitionSets') {\n    return {type: 'error', error: partitionSets.message};\n  }\n\n  const partitionSetName = partitionSets.results[0]?.name;\n  const requiredResourceKeys = assets.flatMap((a) => a.requiredResources.map((r) => r.resourceKey));\n  const resources = pipeline.modes[0].resources.filter((r) =>\n    requiredResourceKeys.includes(r.name),\n  );\n  const anyResourcesHaveRequiredConfig = resources.some((r) => r.configField?.isRequired);\n  const anyAssetsHaveRequiredConfig = assets.some((a) => a.configField?.isRequired);\n\n  // Note: If a partition definition is present and we're launching a user-defined job,\n  // we assume that any required config will be provided by a PartitionedConfig function\n  // attached to the job. Otherwise backfills won't work and you'll know to add one!\n  const assumeConfigPresent = partitionDefinition && !isHiddenAssetGroupJob(jobName);\n\n  const needLaunchpad =\n    !assumeConfigPresent && (anyAssetsHaveRequiredConfig || anyResourcesHaveRequiredConfig);\n\n  if (needLaunchpad || forceLaunchpad) {\n    const assetOpNames = assets.flatMap((a) => a.opNames || []);\n    return {\n      type: 'launchpad',\n      jobName,\n      repoAddress,\n      sessionPresets: {\n        flattenGraphs: true,\n        assetSelection: assets.map((a) => ({assetKey: a.assetKey, opNames: a.opNames})),\n        solidSelectionQuery: assetOpNames.map((name) => `\"${name}\"`).join(', '),\n        base: partitionSetName\n          ? {partitionsSetName: partitionSetName, partitionName: null, tags: []}\n          : undefined,\n      },\n    };\n  }\n  if (partitionDefinition) {\n    return {\n      type: 'partitions',\n      assets,\n      target: {type: 'job', jobName, partitionSetName},\n      upstreamAssetKeys: getUpstreamAssetKeys(assets),\n      repoAddress,\n    };\n  }\n  return {\n    type: 'single-run',\n    executionParams: executionParamsForAssetJob(repoAddress, jobName, assets, []),\n  };\n}\n\nexport function getCommonJob(\n  assets: LaunchAssetExecutionAssetNodeFragment[],\n  preferredJobName?: string,\n) {\n  const everyAssetHasJob = (jobName: string) => assets.every((a) => a.jobNames.includes(jobName));\n  const jobsInCommon = assets[0] ? assets[0].jobNames.filter(everyAssetHasJob) : [];\n  return jobsInCommon.find((name) => name === preferredJobName) || jobsInCommon[0] || null;\n}\n\nfunction getAnchorAssetForPartitionMappedBackfill(assets: LaunchAssetExecutionAssetNodeFragment[]) {\n  // We have the ability to launch a pure asset backfill which will infer the partitions\n  // of downstream assets IFF the selection's root assets (at the top of the tree) ALL\n  // share a partition definition\n\n  // First, get the roots of the selection. The root assets are the ones with none\n  // of their dependencyKeys selected.\n  const roots = assets.filter((a) => {\n    const aDeps = a.dependencyKeys.map(tokenForAssetKey);\n    return !assets.some((b) => aDeps.includes(tokenForAssetKey(b.assetKey)));\n  });\n\n  const partitionedRoots = roots\n    .filter((r) => !!r.partitionDefinition)\n    .sort((a, b) =>\n      displayNameForAssetKey(a.assetKey).localeCompare(displayNameForAssetKey(b.assetKey)),\n    );\n\n  if (!partitionedRoots.length) {\n    return null;\n  }\n\n  // Next, see if they all share a partition set. If they do, any random root can be\n  // the anchor asset but we do it alphabetically so that it is deterministic.\n  const first = partitionedRoots[0];\n  if (\n    !partitionedRoots.every((r) =>\n      partitionDefinitionsEqual(first.partitionDefinition!, r.partitionDefinition!),\n    )\n  ) {\n    return null;\n  }\n\n  return first;\n}\n\nfunction getUpstreamAssetKeys(assets: LaunchAssetExecutionAssetNodeFragment[]) {\n  const assetKeys = new Set(assets.map((a) => JSON.stringify({path: a.assetKey.path})));\n  return uniq(assets.flatMap((a) => a.dependencyKeys.map(({path}) => JSON.stringify({path}))))\n    .filter((key) => !assetKeys.has(key))\n    .map((key) => JSON.parse(key));\n}\n\nasync function upstreamAssetsWithNoMaterializations(\n  client: ApolloClient<any>,\n  assets: LaunchAssetExecutionAssetNodeFragment[],\n) {\n  const upstreamAssetKeys = getUpstreamAssetKeys(assets);\n  if (upstreamAssetKeys.length === 0) {\n    return [];\n  }\n\n  const result = await client.query<\n    LaunchAssetCheckUpstreamQuery,\n    LaunchAssetCheckUpstreamQueryVariables\n  >({\n    query: LAUNCH_ASSET_CHECK_UPSTREAM_QUERY,\n    variables: {assetKeys: upstreamAssetKeys},\n  });\n\n  return result.data.assetNodes\n    .filter((a) => !a.isSource && a.assetMaterializations.length === 0)\n    .map((a) => a.assetKey);\n}\n\nexport function executionParamsForAssetJob(\n  repoAddress: RepoAddress,\n  jobName: string,\n  assets: {assetKey: AssetKey; opNames: string[]}[],\n  tags: {key: string; value: string}[],\n): LaunchPipelineExecutionMutationVariables['executionParams'] {\n  return {\n    mode: 'default',\n    executionMetadata: {\n      tags: tags.map((t) => pick(t, ['key', 'value'])),\n    },\n    runConfigData: '{}',\n    selector: {\n      repositoryLocationName: repoAddress.location,\n      repositoryName: repoAddress.name,\n      pipelineName: jobName,\n      assetSelection: assets.map((asset) => ({\n        path: asset.assetKey.path,\n      })),\n    },\n  };\n}\n\nexport function buildAssetCollisionsAlert(data: LaunchAssetLoaderQuery) {\n  return {\n    title: MULTIPLE_DEFINITIONS_WARNING,\n    body: (\n      <div style={{overflow: 'auto'}}>\n        One or more of the selected assets are defined in multiple code locations. Rename these\n        assets to avoid collisions and then try again.\n        <ul>\n          {data.assetNodeDefinitionCollisions.map((collision, idx) => (\n            <li key={idx}>\n              <strong>{displayNameForAssetKey(collision.assetKey)}</strong>\n              <ul>\n                {collision.repositories.map((r, ridx) => (\n                  <li key={ridx}>\n                    {repoAddressAsHumanString({name: r.name, location: r.location.name})}\n                  </li>\n                ))}\n              </ul>\n            </li>\n          ))}\n        </ul>\n      </div>\n    ),\n  };\n}\n\nconst LAUNCH_ASSET_EXECUTION_ASSET_NODE_FRAGMENT = gql`\n  fragment LaunchAssetExecutionAssetNodeFragment on AssetNode {\n    id\n    opNames\n    jobNames\n    graphName\n    hasMaterializePermission\n    partitionDefinition {\n      ...PartitionDefinitionForLaunchAsset\n    }\n    isObservable\n    isSource\n    assetKey {\n      path\n    }\n    dependencyKeys {\n      path\n    }\n    repository {\n      id\n      name\n      location {\n        id\n        name\n      }\n    }\n    requiredResources {\n      resourceKey\n    }\n    ...AssetNodeConfigFragment\n  }\n\n  fragment PartitionDefinitionForLaunchAsset on PartitionDefinition {\n    description\n    type\n    name\n    dimensionTypes {\n      name\n      dynamicPartitionsDefinitionName\n    }\n  }\n\n  ${ASSET_NODE_CONFIG_FRAGMENT}\n`;\n\nexport const LAUNCH_ASSET_LOADER_QUERY = gql`\n  query LaunchAssetLoaderQuery($assetKeys: [AssetKeyInput!]!) {\n    assetNodes(assetKeys: $assetKeys) {\n      id\n      ...LaunchAssetExecutionAssetNodeFragment\n    }\n    assetNodeDefinitionCollisions(assetKeys: $assetKeys) {\n      assetKey {\n        path\n      }\n      repositories {\n        id\n        name\n        location {\n          id\n          name\n        }\n      }\n    }\n  }\n\n  ${LAUNCH_ASSET_EXECUTION_ASSET_NODE_FRAGMENT}\n`;\n\nexport const LAUNCH_ASSET_LOADER_RESOURCE_QUERY = gql`\n  query LaunchAssetLoaderResourceQuery(\n    $pipelineName: String!\n    $repositoryLocationName: String!\n    $repositoryName: String!\n  ) {\n    partitionSetsOrError(\n      pipelineName: $pipelineName\n      repositorySelector: {\n        repositoryName: $repositoryName\n        repositoryLocationName: $repositoryLocationName\n      }\n    ) {\n      ... on PythonError {\n        message\n      }\n      ... on PipelineNotFoundError {\n        message\n      }\n      ... on PartitionSets {\n        results {\n          id\n          name\n        }\n      }\n    }\n\n    pipelineOrError(\n      params: {\n        pipelineName: $pipelineName\n        repositoryName: $repositoryName\n        repositoryLocationName: $repositoryLocationName\n      }\n    ) {\n      ... on PythonError {\n        message\n      }\n      ... on InvalidSubsetError {\n        message\n      }\n      ... on PipelineNotFoundError {\n        message\n      }\n      ... on Pipeline {\n        id\n        modes {\n          id\n          resources {\n            name\n            description\n            configField {\n              name\n              isRequired\n              configType {\n                ...ConfigTypeSchemaFragment\n                recursiveConfigTypes {\n                  ...ConfigTypeSchemaFragment\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n\n  ${CONFIG_TYPE_SCHEMA_FRAGMENT}\n`;\n\nexport const LAUNCH_ASSET_CHECK_UPSTREAM_QUERY = gql`\n  query LaunchAssetCheckUpstreamQuery($assetKeys: [AssetKeyInput!]!) {\n    assetNodes(assetKeys: $assetKeys, loadMaterializations: true) {\n      id\n      assetKey {\n        path\n      }\n      isSource\n      opNames\n      graphName\n      assetMaterializations(limit: 1) {\n        runId\n      }\n    }\n  }\n`;\n","import {ApolloClient, useApolloClient} from '@apollo/client';\nimport {Button, Spinner, Tooltip, Icon} from '@dagster-io/ui';\nimport React from 'react';\n\nimport {showCustomAlert} from '../app/CustomAlertProvider';\nimport {useLaunchPadHooks} from '../launchpad/LaunchpadHooksContext';\nimport {LaunchPipelineExecutionMutationVariables} from '../runs/types/RunUtils.types';\nimport {buildRepoAddress} from '../workspace/buildRepoAddress';\nimport {repoAddressAsHumanString} from '../workspace/repoAddressAsString';\n\nimport {\n  AssetsInScope,\n  buildAssetCollisionsAlert,\n  executionParamsForAssetJob,\n  getCommonJob,\n  LAUNCH_ASSET_LOADER_QUERY,\n} from './LaunchAssetExecutionButton';\nimport {\n  LaunchAssetExecutionAssetNodeFragment,\n  LaunchAssetLoaderQuery,\n  LaunchAssetLoaderQueryVariables,\n} from './types/LaunchAssetExecutionButton.types';\n\ntype ObserveAssetsState =\n  | {type: 'none'}\n  | {type: 'loading'}\n  | {type: 'error'; error: string}\n  | {\n      type: 'single-run';\n      executionParams: LaunchPipelineExecutionMutationVariables['executionParams'];\n    };\n\nexport const LaunchAssetObservationButton: React.FC<{\n  scope: AssetsInScope;\n  intent?: 'primary' | 'none';\n  preferredJobName?: string;\n}> = ({scope, preferredJobName, intent = 'none'}) => {\n  const {useLaunchWithTelemetry} = useLaunchPadHooks();\n  const launchWithTelemetry = useLaunchWithTelemetry();\n\n  const [state, setState] = React.useState<ObserveAssetsState>({type: 'none'});\n  const client = useApolloClient();\n\n  const scopeAssets = 'selected' in scope ? scope.selected : scope.all;\n  if (!scopeAssets.length) {\n    return <span />;\n  }\n\n  const count = scopeAssets.length > 1 ? ` (${scopeAssets.length})` : '';\n  const label =\n    'selected' in scope\n      ? `Observe selected${count}`\n      : scope.skipAllTerm\n      ? `Observe${count}`\n      : `Observe sources ${count}`;\n\n  const hasMaterializePermission = scopeAssets.every((a) => a.hasMaterializePermission);\n  if (!hasMaterializePermission) {\n    return (\n      <Tooltip content=\"You do not have permission to observe source assets\">\n        <Button intent={intent} icon={<Icon name=\"observation\" />} disabled>\n          {label}\n        </Button>\n      </Tooltip>\n    );\n  }\n\n  const onClick = async (e: React.MouseEvent<any>) => {\n    if (state.type === 'loading') {\n      return;\n    }\n    setState({type: 'loading'});\n\n    const result = await client.query<LaunchAssetLoaderQuery, LaunchAssetLoaderQueryVariables>({\n      query: LAUNCH_ASSET_LOADER_QUERY,\n      variables: {assetKeys: scopeAssets.map((a) => ({path: a.assetKey.path}))},\n    });\n\n    if (result.data.assetNodeDefinitionCollisions.length) {\n      showCustomAlert(buildAssetCollisionsAlert(result.data));\n      setState({type: 'none'});\n      return;\n    }\n\n    const assets = result.data.assetNodes;\n    const forceLaunchpad = e.shiftKey;\n\n    const next = await stateForObservingAssets(client, assets, forceLaunchpad, preferredJobName);\n\n    if (next.type === 'error') {\n      showCustomAlert({\n        title: 'Unable to observe',\n        body: next.error,\n      });\n      setState({type: 'none'});\n      return;\n    }\n\n    if (next.type === 'single-run') {\n      await launchWithTelemetry({executionParams: next.executionParams}, 'toast');\n      setState({type: 'none'});\n    } else {\n      setState(next);\n    }\n  };\n\n  return (\n    <Button\n      intent={intent}\n      onClick={onClick}\n      icon={\n        state.type === 'loading' ? <Spinner purpose=\"body-text\" /> : <Icon name=\"observation\" />\n      }\n    >\n      {label}\n    </Button>\n  );\n};\n\nasync function stateForObservingAssets(\n  _client: ApolloClient<any>,\n  assets: LaunchAssetExecutionAssetNodeFragment[],\n  _forceLaunchpad: boolean,\n  preferredJobName?: string,\n): Promise<ObserveAssetsState> {\n  if (assets.some((x) => !x.isSource)) {\n    return {\n      type: 'error',\n      error: 'One or more non-source assets are selected and cannot be observed.',\n    };\n  }\n\n  if (assets.some((x) => !x.isObservable)) {\n    return {\n      type: 'error',\n      error: 'One or more of the selected source assets are unversioned and cannot be observed.',\n    };\n  }\n  const repoAddress = buildRepoAddress(\n    assets[0]?.repository.name || '',\n    assets[0]?.repository.location.name || '',\n  );\n  const repoName = repoAddressAsHumanString(repoAddress);\n\n  if (\n    !assets.every(\n      (a) =>\n        a.repository.name === repoAddress.name &&\n        a.repository.location.name === repoAddress.location,\n    )\n  ) {\n    return {\n      type: 'error',\n      error: `Assets must be in ${repoName} to be materialized together.`,\n    };\n  }\n\n  const jobName = getCommonJob(assets, preferredJobName);\n  if (!jobName) {\n    return {\n      type: 'error',\n      error: 'Assets must be in the same job to be observed together.',\n    };\n  }\n\n  return {\n    type: 'single-run',\n    executionParams: executionParamsForAssetJob(repoAddress, jobName, assets, []),\n  };\n}\n","import {Spinner, Box, Colors, Caption} from '@dagster-io/ui';\nimport React from 'react';\n\nimport {displayNameForAssetKey} from '../asset-graph/Utils';\nimport {PartitionStatus} from '../partitions/PartitionStatus';\n\nimport {AssetPartitionStatus} from './AssetPartitionStatus';\nimport {isTimeseriesDimension} from './MultipartitioningSupport';\nimport {AssetKey} from './types';\nimport {PartitionHealthData, PartitionDimensionSelection} from './usePartitionHealthData';\n\nexport const PartitionHealthSummary: React.FC<{\n  assetKey: AssetKey;\n  showAssetKey?: boolean;\n  data: PartitionHealthData[];\n  selections?: PartitionDimensionSelection[];\n}> = React.memo(({showAssetKey, assetKey, data, selections}) => {\n  const assetData = data.find((d) => JSON.stringify(d.assetKey) === JSON.stringify(assetKey));\n\n  if (!assetData) {\n    return (\n      <div style={{minHeight: 55, position: 'relative'}}>\n        <Spinner purpose=\"section\" />\n      </div>\n    );\n  }\n\n  const keysForTotals = selections\n    ? selections.map((r) => r.selectedKeys)\n    : assetData.dimensions.map((d) => d.partitionKeys);\n\n  const total = keysForTotals.reduce((total, d) => d.length * total, 1);\n\n  const success = keysForTotals\n    .reduce(\n      (combinations, d) =>\n        combinations.length\n          ? combinations.flatMap((keys) => d.map((key) => [...keys, key]))\n          : d.map((key) => [key]),\n      [] as string[][],\n    )\n    .filter((dkeys) => assetData.stateForKey(dkeys) === AssetPartitionStatus.MATERIALIZED).length;\n\n  return (\n    <Box color={Colors.Gray500}>\n      <Box flex={{justifyContent: 'space-between'}} style={{fontWeight: 600}} margin={{bottom: 4}}>\n        <Caption>{showAssetKey ? displayNameForAssetKey(assetKey) : 'Materialized'}</Caption>\n        <Caption>{`${success.toLocaleString()}/${total.toLocaleString()}`}</Caption>\n      </Box>\n      {assetData.dimensions.map((dimension, dimensionIdx) => (\n        <Box key={dimensionIdx} margin={{bottom: 4}}>\n          {assetData.dimensions.length > 1 && <Caption>{dimension.name}</Caption>}\n          <PartitionStatus\n            small\n            partitionNames={dimension.partitionKeys}\n            splitPartitions={!isTimeseriesDimension(dimension)}\n            selected={selections ? selections[dimensionIdx].selectedKeys : undefined}\n            health={{\n              ranges: assetData.rangesForSingleDimension(\n                dimensionIdx,\n                selections?.length === 2 ? selections[1 - dimensionIdx].selectedRanges : undefined,\n              ),\n            }}\n          />\n        </Box>\n      ))}\n    </Box>\n  );\n});\n","import {Colors, Box, BaseTag, Tooltip, Icon, Body, ButtonLink} from '@dagster-io/ui';\nimport groupBy from 'lodash/groupBy';\nimport isEqual from 'lodash/isEqual';\nimport React from 'react';\n\nimport {displayNameForAssetKey, LiveDataForNode} from '../asset-graph/Utils';\nimport {AssetKeyInput, StaleCauseCategory, StaleStatus} from '../graphql/types';\n\nexport const isAssetMissing = (liveData?: LiveDataForNode) =>\n  liveData && liveData.staleStatus === StaleStatus.MISSING;\n\nexport const isAssetStale = (liveData?: LiveDataForNode) =>\n  liveData && liveData.staleStatus === StaleStatus.STALE;\n\nconst NO_CAUSES = 'No reasons available.';\n\nconst LABELS = {\n  self: {\n    [StaleCauseCategory.CODE]: 'Code version',\n    [StaleCauseCategory.DATA]: 'Data version',\n    [StaleCauseCategory.DEPENDENCIES]: 'Dependencies',\n  },\n  upstream: {\n    [StaleCauseCategory.CODE]: 'Upstream code version',\n    [StaleCauseCategory.DATA]: 'Upstream data',\n    [StaleCauseCategory.DEPENDENCIES]: 'Upstream dependencies',\n  },\n};\n\nexport const StaleReasonsLabel: React.FC<{\n  assetKey: AssetKeyInput;\n  include: 'all' | 'upstream' | 'self';\n  liveData?: LiveDataForNode;\n}> = ({liveData, include, assetKey}) => {\n  if (!isAssetStale(liveData) || !liveData?.staleCauses.length) {\n    return null;\n  }\n\n  return (\n    <Body color={Colors.Yellow700}>\n      <Tooltip position=\"top\" content={<StaleCausesSummary causes={liveData.staleCauses} />}>\n        {Object.keys(groupedCauses(assetKey, include, liveData)).join(', ')}\n      </Tooltip>\n    </Body>\n  );\n};\n\nexport const StaleReasonsTags: React.FC<{\n  assetKey: AssetKeyInput;\n  include: 'all' | 'upstream' | 'self';\n  liveData?: LiveDataForNode;\n  onClick?: () => void;\n}> = ({liveData, include, assetKey, onClick}) => {\n  if (!isAssetStale(liveData) || !liveData?.staleCauses.length) {\n    return null;\n  }\n\n  return (\n    <>\n      {Object.entries(groupedCauses(assetKey, include, liveData)).map(([label, causes]) => (\n        <Tooltip key={label} position=\"top\" content={<StaleCausesSummary causes={causes} />}>\n          <BaseTag\n            fillColor={Colors.Yellow50}\n            textColor={Colors.Yellow700}\n            interactive={!!onClick}\n            icon={<Icon name=\"changes_present\" color={Colors.Yellow700} />}\n            label={\n              onClick ? (\n                <ButtonLink underline=\"never\" onClick={onClick} color={Colors.Yellow700}>\n                  {label}\n                </ButtonLink>\n              ) : (\n                label\n              )\n            }\n          />\n        </Tooltip>\n      ))}\n    </>\n  );\n};\n\nconst MAX_DISPLAYED_REASONS = 4;\n\nfunction groupedCauses(\n  assetKey: AssetKeyInput,\n  include: 'all' | 'upstream' | 'self',\n  liveData?: LiveDataForNode,\n) {\n  const all = (liveData?.staleCauses || [])\n    .map((cause) => {\n      const target = isEqual(assetKey.path, cause.key.path) ? 'self' : 'upstream';\n      return {...cause, target, label: LABELS[target][cause.category]};\n    })\n    .filter((cause) => include === 'all' || include === cause.target);\n\n  return groupBy(all, (cause) => cause.label);\n}\n\nexport const StaleCausesInfoDot: React.FC<{causes: LiveDataForNode['staleCauses']}> = ({\n  causes,\n}) => (\n  <Tooltip\n    position=\"top\"\n    content={causes && causes.length > 0 ? <StaleCausesSummary causes={causes} /> : NO_CAUSES}\n  >\n    <Icon name=\"info\" size={12} color={Colors.Yellow700} />\n  </Tooltip>\n);\n\nconst StaleCausesSummary: React.FC<{causes: LiveDataForNode['staleCauses']}> = ({causes}) => (\n  <Box>\n    <strong>This asset has unpropagated changes:</strong>\n    <ul style={{margin: 0, padding: '4px 12px'}}>\n      {causes.slice(0, MAX_DISPLAYED_REASONS).map((cause, idx) => (\n        <li key={idx}>\n          [{displayNameForAssetKey(cause.key)}] {cause.reason}{' '}\n          {cause.dependency ? `(${displayNameForAssetKey(cause.dependency)})` : ''}\n        </li>\n      ))}\n      {causes.length > MAX_DISPLAYED_REASONS ? (\n        <span style={{color: Colors.Gray400}}>{`and ${\n          causes.length - MAX_DISPLAYED_REASONS\n        } more...`}</span>\n      ) : (\n        ''\n      )}\n    </ul>\n  </Box>\n);\n","import groupBy from 'lodash/groupBy';\nimport React from 'react';\n\nimport {\n  AssetMaterializationFragment,\n  AssetObservationFragment,\n} from './types/useRecentAssetEvents.types';\n\nconst NO_PARTITION_KEY = '__NO_PARTITION__';\n\ntype Event = AssetMaterializationFragment | AssetObservationFragment;\n\nexport type AssetEventGroup = {\n  latest: Event | null;\n  all: Event[];\n  timestamp: string;\n  partition?: string;\n};\n\nconst sortByEventTimestamp = (a: Event, b: Event) => Number(b?.timestamp) - Number(a?.timestamp);\n\n/**\n * A hook that can bucket a list of materializations by partition, if any, with the `latest`\n * materialization separated from predecessor materializations.\n */\nconst groupByPartition = (events: Event[], definedPartitionKeys: string[]): AssetEventGroup[] => {\n  const grouped = groupBy(events, (m) => m.partition || NO_PARTITION_KEY);\n  const orderedPartitionKeys = [...definedPartitionKeys].reverse();\n\n  if (NO_PARTITION_KEY in grouped) {\n    orderedPartitionKeys.push(NO_PARTITION_KEY);\n  }\n\n  return orderedPartitionKeys\n    .filter((key) => key !== NO_PARTITION_KEY)\n    .map((key) => {\n      const sorted = [...(grouped[key] || [])].sort(sortByEventTimestamp);\n      const latestMaterialization = sorted.find((a) => a.__typename === 'MaterializationEvent');\n      const latest = latestMaterialization || sorted[0] || null;\n\n      return {\n        all: sorted,\n        latest,\n        timestamp: latest?.timestamp,\n        partition: key,\n      };\n    });\n};\n\nexport function useGroupedEvents(\n  xAxis: 'partition' | 'time',\n  materializations: Event[],\n  observations: Event[],\n  loadedPartitionKeys: string[] | undefined,\n) {\n  return React.useMemo<AssetEventGroup[]>(() => {\n    const events = [...materializations, ...observations].sort(\n      (b, a) => Number(a.timestamp) - Number(b.timestamp),\n    );\n    if (xAxis === 'partition' && loadedPartitionKeys) {\n      return groupByPartition(events, loadedPartitionKeys);\n    } else {\n      // return a group for every materialization to achieve un-grouped rendering\n      return events.map((event) => ({\n        latest: event,\n        partition: event.partition || undefined,\n        timestamp: event.timestamp,\n        all: [],\n      }));\n    }\n  }, [loadedPartitionKeys, materializations, observations, xAxis]);\n}\n","import React from 'react';\n\n/**\n * Allows you to easily support updating state based on previous state.\n *\n * usage:\n * function useMyCustomStateHook() {\n *   const [state, setState] = useState(initialState);\n *   const update = (nextState: T) => {\n *     setState(doSomeFancyCalculation(nextState));\n *   };\n *   return [state, useSetStateUpdateCallback(state, update)];\n * }\n */\nexport function useSetStateUpdateCallback<T>(\n  currentState: T,\n  updateCallback: (next: T) => void,\n): (next: React.SetStateAction<T>) => void {\n  const stateRef = React.useRef<T>(currentState);\n  stateRef.current = currentState;\n\n  const updateCallbackRef = React.useRef(updateCallback);\n  updateCallbackRef.current = updateCallback;\n\n  const update = React.useCallback((next: React.SetStateAction<T>) => {\n    if (next instanceof Function) {\n      stateRef.current = next(stateRef.current);\n    } else {\n      stateRef.current = next;\n    }\n    updateCallbackRef.current(stateRef.current);\n  }, []);\n\n  return update;\n}\n","import React from 'react';\n\nimport {QueryPersistedStateConfig, useQueryPersistedState} from '../hooks/useQueryPersistedState';\nimport {useSetStateUpdateCallback} from '../hooks/useSetStateUpdateCallback';\nimport {\n  allPartitionsSpan,\n  partitionsToText,\n  allPartitionsRange,\n  spanTextToSelections,\n} from '../partitions/SpanRepresentation';\n\nimport {placeholderDimensionSelection} from './MultipartitioningSupport';\nimport {PartitionHealthData, PartitionDimensionSelection} from './usePartitionHealthData';\n\ntype DimensionQueryState = {\n  name: string;\n  rangeText: string | undefined;\n  isFromPartitionQueryStringParam: boolean;\n};\n\nfunction buildSerializer(assetHealth: Pick<PartitionHealthData, 'dimensions'>) {\n  const serializer: QueryPersistedStateConfig<DimensionQueryState[]> = {\n    defaults: {},\n    encode: (state) => {\n      return Object.fromEntries(state.map((s) => [`${s.name}_range`, s.rangeText]));\n    },\n    decode: (qs) => {\n      const results: Record<string, {text: string; isFromPartitionQueryStringParam: boolean}> = {};\n      for (const key in qs) {\n        if (key.endsWith('_range')) {\n          const name = key.replace(/_range$/, '');\n          results[name] = {text: qs[key], isFromPartitionQueryStringParam: false};\n        } else if (key === 'partition') {\n          const partitions = qs[key].split('|');\n          for (let i = 0; i < partitions.length; i++) {\n            const partitionText = partitions[i];\n            const name = assetHealth?.dimensions[i]?.name;\n            if (name) {\n              results[name] = {text: partitionText, isFromPartitionQueryStringParam: true};\n            }\n          }\n        }\n      }\n      return Object.entries(results).map(([name, {text, isFromPartitionQueryStringParam}]) => ({\n        name,\n        rangeText: text,\n        isFromPartitionQueryStringParam,\n      }));\n    },\n  };\n  return serializer;\n}\n\n/**\n * This hook behaves like useState and manages the user's selected partition key\n * ranges on each partition dimension.\n *\n * Internally, this hook reads initial state from the query string and (optionally)\n * writes changes back to the query string using the compacted \"spans\" format.\n */\nexport const usePartitionDimensionSelections = (opts: {\n  assetHealth: Pick<PartitionHealthData, 'dimensions'>;\n  modifyQueryString: boolean;\n  knownDimensionNames?: string[]; // improves loading state if available\n  skipPartitionKeyValidation?: boolean;\n  shouldReadPartitionQueryStringParam?: boolean; // This hook is used in 2 different cases\n  // The first use case (AssetPartitions.tsx) uses this state to filter the available partitions to select from when filtering using time based partitions.\n  // The second use case (LaunchAssetChoosePartitionsDialog.tsx) uses this state to store the user's selections, which includes non-time based partitions.\n  //   For the second use case we rely on the \"partition\" query string param in addition to the existing \"{dimension}_range\" query string params.\n}) => {\n  const {\n    assetHealth,\n    knownDimensionNames = [],\n    modifyQueryString,\n    skipPartitionKeyValidation,\n    shouldReadPartitionQueryStringParam = false,\n  } = opts;\n\n  const serializer = React.useMemo(() => buildSerializer(assetHealth), [assetHealth]);\n  const [query, setQuery] = useQueryPersistedState<DimensionQueryState[]>(serializer);\n  const [local, setLocal] = React.useState<DimensionQueryState[]>([]);\n\n  const knownDimensionNamesJSON = JSON.stringify(knownDimensionNames);\n\n  const inflated = React.useMemo((): PartitionDimensionSelection[] => {\n    if (!assetHealth || !assetHealth.dimensions.length) {\n      return JSON.parse(knownDimensionNamesJSON).map(placeholderDimensionSelection);\n    }\n    return assetHealth.dimensions.map((dimension) => {\n      const saved =\n        local.find((s) => s.name === dimension.name) ||\n        query.find((s) => s.name === dimension.name);\n\n      // Note: It's valid for the user to clear the range to \"\", so it's\n      // important that we persist \"\" and specifically check for `undefined`\n      // when filling in the default value (all keys)\n      if (\n        saved?.rangeText !== undefined &&\n        (shouldReadPartitionQueryStringParam || !saved?.isFromPartitionQueryStringParam)\n      ) {\n        return {\n          dimension,\n          ...spanTextToSelections(\n            dimension.partitionKeys,\n            saved.rangeText,\n            skipPartitionKeyValidation,\n          ),\n        };\n      } else {\n        return {\n          dimension,\n          selectedRanges: [allPartitionsRange(dimension)],\n          selectedKeys: [...dimension.partitionKeys],\n        };\n      }\n    });\n  }, [\n    assetHealth,\n    knownDimensionNamesJSON,\n    local,\n    query,\n    shouldReadPartitionQueryStringParam,\n    skipPartitionKeyValidation,\n  ]);\n\n  const setInflated = (ranges: PartitionDimensionSelection[]) => {\n    const next = ranges.map((r) => {\n      const rangeText = partitionsToText(\n        r.selectedKeys,\n        skipPartitionKeyValidation ? undefined : r.dimension.partitionKeys,\n      );\n\n      const saved =\n        local.find((s) => s.name === r.dimension.name) ||\n        query.find((s) => s.name === r.dimension.name);\n\n      return {\n        name: r.dimension.name,\n        rangeText: rangeText !== allPartitionsSpan(r.dimension) ? rangeText : undefined,\n        isFromPartitionQueryStringParam:\n          saved?.rangeText === rangeText ? saved.isFromPartitionQueryStringParam : false,\n      };\n    });\n    if (modifyQueryString) {\n      setQuery(next);\n    } else {\n      setLocal(next);\n    }\n  };\n\n  return [inflated, useSetStateUpdateCallback(inflated, setInflated)] as const;\n};\n","import {gql, useQuery} from '@apollo/client';\nimport uniq from 'lodash/uniq';\nimport * as React from 'react';\n\nimport {METADATA_ENTRY_FRAGMENT} from '../metadata/MetadataEntry';\n\nimport {ASSET_LINEAGE_FRAGMENT} from './AssetLineageElements';\nimport {AssetViewParams} from './AssetView';\nimport {AssetKey} from './types';\nimport {AssetEventsQuery, AssetEventsQueryVariables} from './types/useRecentAssetEvents.types';\n\n/**\n * If the asset has a defined partition space, we load all materializations in the\n * last 100 partitions. This ensures that if you run a huge backfill of old partitions,\n * you still see accurate info for the last 100 partitions in the UI. A count-based\n * limit could cause random partitions to disappear if materializations were out of order.\n */\nexport function useRecentAssetEvents(\n  assetKey: AssetKey,\n  params: AssetViewParams,\n  {assetHasDefinedPartitions}: {assetHasDefinedPartitions: boolean},\n) {\n  // The params behavior on this page is a bit nuanced - there are two main query\n  // params: ?timestamp= and ?partition= and only one is set at a time. They can\n  // be undefined, an empty string or a value and all three states are used.\n  //\n  // - If both are undefined, we expand the first item in the table by default\n  // - If one is present, it determines which xAxis is used (partition grouping)\n  // - If one is present and set to a value, that item in the table is expanded.\n  // - If one is present but an empty string, no items in the table is expanded.\n\n  const before = params.asOf ? `${Number(params.asOf) + 1}` : undefined;\n  const xAxisDefault = assetHasDefinedPartitions ? 'partition' : 'time';\n  const xAxis: 'partition' | 'time' =\n    params.partition !== undefined\n      ? 'partition'\n      : params.time !== undefined || before\n      ? 'time'\n      : xAxisDefault;\n\n  const loadUsingPartitionKeys = assetHasDefinedPartitions && xAxis === 'partition';\n\n  const {data, loading, refetch} = useQuery<AssetEventsQuery, AssetEventsQueryVariables>(\n    ASSET_EVENTS_QUERY,\n    {\n      variables: loadUsingPartitionKeys\n        ? {\n            assetKey: {path: assetKey.path},\n            before,\n            partitionInLast: 120,\n          }\n        : {\n            assetKey: {path: assetKey.path},\n            before,\n            limit: 100,\n          },\n    },\n  );\n\n  return React.useMemo(() => {\n    const asset = data?.assetOrError.__typename === 'Asset' ? data?.assetOrError : null;\n    const materializations = asset?.assetMaterializations || [];\n    const observations = asset?.assetObservations || [];\n\n    const allPartitionKeys = asset?.definition?.partitionKeys;\n    const loadedPartitionKeys =\n      loadUsingPartitionKeys && allPartitionKeys\n        ? allPartitionKeys.slice(allPartitionKeys.length - 120)\n        : uniq(\n            [...materializations, ...observations].map((p) => p.partition!).filter(Boolean),\n          ).sort();\n\n    return {\n      asset,\n      loadedPartitionKeys,\n      materializations,\n      observations,\n      loading,\n      refetch,\n      xAxis,\n    };\n  }, [data, loading, refetch, loadUsingPartitionKeys, xAxis]);\n}\n\nexport const ASSET_MATERIALIZATION_FRAGMENT = gql`\n  fragment AssetMaterializationFragment on MaterializationEvent {\n    partition\n    tags {\n      key\n      value\n    }\n    runOrError {\n      ... on PipelineRun {\n        id\n        runId\n        mode\n        repositoryOrigin {\n          id\n          repositoryName\n          repositoryLocationName\n        }\n        status\n        pipelineName\n        pipelineSnapshotId\n      }\n    }\n    runId\n    timestamp\n    stepKey\n    label\n    description\n    metadataEntries {\n      ...MetadataEntryFragment\n    }\n    assetLineage {\n      ...AssetLineageFragment\n    }\n  }\n\n  ${METADATA_ENTRY_FRAGMENT}\n  ${ASSET_LINEAGE_FRAGMENT}\n`;\n\nexport const ASSET_OBSERVATION_FRAGMENT = gql`\n  fragment AssetObservationFragment on ObservationEvent {\n    partition\n    tags {\n      key\n      value\n    }\n    runOrError {\n      ... on PipelineRun {\n        id\n        runId\n        mode\n        repositoryOrigin {\n          id\n          repositoryName\n          repositoryLocationName\n        }\n        status\n        pipelineName\n        pipelineSnapshotId\n      }\n    }\n    runId\n    timestamp\n    stepKey\n    label\n    description\n    metadataEntries {\n      ...MetadataEntryFragment\n    }\n  }\n\n  ${METADATA_ENTRY_FRAGMENT}\n`;\n\nconst ASSET_EVENTS_QUERY = gql`\n  query AssetEventsQuery(\n    $assetKey: AssetKeyInput!\n    $limit: Int\n    $before: String\n    $partitionInLast: Int\n  ) {\n    assetOrError(assetKey: $assetKey) {\n      ... on Asset {\n        id\n        key {\n          path\n        }\n        assetObservations(\n          limit: $limit\n          beforeTimestampMillis: $before\n          partitionInLast: $partitionInLast\n        ) {\n          ...AssetObservationFragment\n        }\n        assetMaterializations(\n          limit: $limit\n          beforeTimestampMillis: $before\n          partitionInLast: $partitionInLast\n        ) {\n          ...AssetMaterializationFragment\n        }\n\n        definition {\n          id\n          partitionKeys\n        }\n      }\n    }\n  }\n\n  ${ASSET_OBSERVATION_FRAGMENT}\n  ${ASSET_MATERIALIZATION_FRAGMENT}\n`;\n","import {gql, useQuery} from '@apollo/client';\n// eslint-disable-next-line no-restricted-imports\nimport {HTMLInputProps, InputGroupProps2, Intent} from '@blueprintjs/core';\nimport {\n  Box,\n  Button,\n  Colors,\n  Icon,\n  IconWrapper,\n  MenuDivider,\n  MenuItem,\n  Menu,\n  Select,\n  Spinner,\n  Suggest,\n} from '@dagster-io/ui';\nimport * as React from 'react';\nimport styled from 'styled-components/macro';\n\nimport {AppContext} from '../app/AppContext';\nimport {showCustomAlert} from '../app/CustomAlertProvider';\nimport {IExecutionSession} from '../app/ExecutionSessionStorage';\nimport {PYTHON_ERROR_FRAGMENT} from '../app/PythonErrorFragment';\nimport {PythonErrorInfo} from '../app/PythonErrorInfo';\nimport {ShortcutHandler} from '../app/ShortcutHandler';\nimport {PartitionDefinitionType, RepositorySelector} from '../graphql/types';\nimport {useStateWithStorage} from '../hooks/useStateWithStorage';\nimport {CreatePartitionDialog} from '../partitions/CreatePartitionDialog';\nimport {repoAddressAsHumanString} from '../workspace/repoAddressAsString';\nimport {repoAddressToSelector} from '../workspace/repoAddressToSelector';\nimport {RepoAddress} from '../workspace/types';\n\nimport {\n  ConfigEditorGeneratorPipelineFragment,\n  ConfigEditorPipelinePresetFragment,\n  PartitionSetForConfigEditorFragment,\n  ConfigPartitionResultFragment,\n  ConfigPartitionsQuery,\n  ConfigPartitionsQueryVariables,\n} from './types/ConfigEditorConfigPicker.types';\n\ntype Pipeline = ConfigEditorGeneratorPipelineFragment;\ntype Preset = ConfigEditorPipelinePresetFragment;\ntype PartitionSet = PartitionSetForConfigEditorFragment;\ntype Partition = ConfigPartitionResultFragment;\ntype ConfigGenerator = Preset | PartitionSet;\n\ninterface ConfigEditorConfigPickerProps {\n  base: IExecutionSession['base'];\n  pipeline: Pipeline;\n  pipelineMode?: string;\n  partitionSets: PartitionSet[];\n  onSaveSession: (updates: Partial<IExecutionSession>) => void;\n  onSelectPreset: (preset: Preset) => Promise<void>;\n  onSelectPartition: (\n    repositorySelector: RepositorySelector,\n    partitionSetName: string,\n    partitionName: string,\n  ) => Promise<void>;\n  repoAddress: RepoAddress;\n  assetSelection?: IExecutionSession['assetSelection'];\n}\n\nexport const ConfigEditorConfigPicker: React.FC<ConfigEditorConfigPickerProps> = (props) => {\n  const {\n    pipeline,\n    base,\n    onSaveSession,\n    onSelectPreset,\n    onSelectPartition,\n    partitionSets,\n    repoAddress,\n    assetSelection,\n  } = props;\n\n  const {isJob, presets} = pipeline;\n\n  const configGenerators: ConfigGenerator[] = React.useMemo(() => {\n    const byName = (a: {name: string}, b: {name: string}) => a.name.localeCompare(b.name);\n    return [...presets, ...partitionSets].sort(byName);\n  }, [presets, partitionSets]);\n\n  const label = () => {\n    if (!base) {\n      if (presets.length && !partitionSets.length) {\n        return 'Preset';\n      }\n      if (!presets.length && partitionSets.length) {\n        return 'Partition Set';\n      }\n      return 'Preset / Partition Set';\n    }\n\n    if ('presetName' in base) {\n      return `Preset: ${base.presetName}`;\n    }\n\n    return `Partition Set: ${base.partitionsSetName}`;\n  };\n\n  const onSelect = (item: ConfigGenerator) => {\n    if (item.__typename === 'PartitionSet') {\n      onSaveSession({\n        mode: item.mode,\n        base: {\n          partitionsSetName: item.name,\n          partitionName: null,\n          tags: base ? base.tags : null,\n        },\n      });\n    } else {\n      onSelectPreset(item);\n    }\n  };\n\n  return (\n    <PickerContainer>\n      {isJob || configGenerators.length < 1 ? null : (\n        <ConfigEditorConfigGeneratorPicker\n          label={label()}\n          configGenerators={configGenerators}\n          onSelect={onSelect}\n        />\n      )}\n      {base && 'partitionsSetName' in base ? (\n        <ConfigEditorPartitionPicker\n          pipeline={pipeline}\n          partitionSetName={base.partitionsSetName}\n          value={base.partitionName}\n          onSelect={onSelectPartition}\n          repoAddress={repoAddress}\n          assetSelection={assetSelection}\n        />\n      ) : null}\n    </PickerContainer>\n  );\n};\n\ninterface ConfigEditorPartitionPickerProps {\n  pipeline: Pipeline;\n  partitionSetName: string;\n  value: string | null;\n  onSelect: (\n    repositorySelector: RepositorySelector,\n    partitionSetName: string,\n    partitionName: string,\n  ) => void;\n  repoAddress: RepoAddress;\n  assetSelection?: IExecutionSession['assetSelection'];\n}\n\nconst SORT_ORDER_KEY_BASE = 'dagit.partition-sort-order';\ntype SortOrder = 'asc' | 'desc';\n\nconst ConfigEditorPartitionPicker: React.FC<ConfigEditorPartitionPickerProps> = React.memo(\n  (props) => {\n    const {partitionSetName, value, onSelect, repoAddress, assetSelection} = props;\n    const {basePath} = React.useContext(AppContext);\n    const repositorySelector = repoAddressToSelector(repoAddress);\n\n    const {data, refetch, loading} = useQuery<\n      ConfigPartitionsQuery,\n      ConfigPartitionsQueryVariables\n    >(CONFIG_PARTITIONS_QUERY, {\n      variables: {\n        repositorySelector,\n        partitionSetName,\n        assetKeys: assetSelection?.map((selection) => ({path: selection.assetKey.path})),\n      },\n      fetchPolicy: 'network-only',\n    });\n\n    const sortOrderKey = `${SORT_ORDER_KEY_BASE}-${basePath}-${repoAddressAsHumanString(\n      repoAddress,\n    )}-${partitionSetName}`;\n\n    const [sortOrder, setSortOrder] = useStateWithStorage<SortOrder>(sortOrderKey, (value: any) =>\n      value === undefined ? 'asc' : value,\n    );\n\n    const partitions: Partition[] = React.useMemo(() => {\n      const retrieved =\n        data?.partitionSetOrError.__typename === 'PartitionSet' &&\n        data?.partitionSetOrError.partitionsOrError.__typename === 'Partitions'\n          ? data.partitionSetOrError.partitionsOrError.results\n          : [];\n      return sortOrder === 'asc' ? retrieved : [...retrieved].reverse();\n    }, [data, sortOrder]);\n\n    const error =\n      data?.partitionSetOrError.__typename === 'PartitionSet' &&\n      data?.partitionSetOrError.partitionsOrError.__typename !== 'Partitions'\n        ? data.partitionSetOrError.partitionsOrError\n        : null;\n\n    const selected = partitions.find((p) => p.name === value);\n\n    const onClickSort = React.useCallback(\n      (event) => {\n        event.preventDefault();\n        setSortOrder((order) => (order === 'asc' ? 'desc' : 'asc'));\n      },\n      [setSortOrder],\n    );\n\n    const rightElement = partitions.length ? (\n      <SortButton onMouseDown={onClickSort}>\n        <Icon name=\"sort_by_alpha\" color={Colors.Gray400} />\n      </SortButton>\n    ) : undefined;\n\n    const inputProps: InputGroupProps2 & HTMLInputProps = {\n      placeholder: 'Partition',\n      style: {width: 180},\n      intent: (loading ? !!value : !!selected) ? Intent.NONE : Intent.DANGER,\n      rightElement,\n    };\n\n    const {isDynamicPartition, partitionDefinitionName} = React.useMemo(() => {\n      const assetNodes = data?.assetNodes;\n      const definition = assetNodes?.find((a) => !!a.partitionDefinition)?.partitionDefinition;\n      if (\n        !definition ||\n        assetNodes?.some(\n          (node) =>\n            node?.partitionDefinition?.name && node?.partitionDefinition?.name !== definition?.name,\n        )\n      ) {\n        return {isDynamicPartition: false, partitionDefinitionName: undefined};\n      }\n      return {\n        isDynamicPartition: definition.type === PartitionDefinitionType.DYNAMIC,\n        partitionDefinitionName: definition.name,\n      };\n    }, [data?.assetNodes]);\n\n    const [showCreatePartition, setShowCreatePartition] = React.useState(false);\n\n    // If we are loading the partitions and do NOT have any cached data to display,\n    // show the component in a loading state with a spinner and fill it with the\n    // current partition's name so it doesn't flicker (if one is set already.)\n    if (loading && partitions.length === 0) {\n      return (\n        <Suggest<string>\n          key=\"loading\"\n          inputProps={{\n            ...inputProps,\n            rightElement: !value ? (\n              <Box\n                flex={{direction: 'column', justifyContent: 'center'}}\n                padding={{right: 4}}\n                style={{height: '30px'}}\n              >\n                <Spinner purpose=\"body-text\" />\n              </Box>\n            ) : undefined,\n          }}\n          items={[]}\n          itemRenderer={() => null}\n          noResults={<MenuItem disabled={true} text=\"Loading...\" />}\n          inputValueRenderer={(str) => str}\n          selectedItem={value}\n          onItemSelect={() => {}}\n        />\n      );\n    }\n\n    if (error) {\n      showCustomAlert({\n        body: <PythonErrorInfo error={error} />,\n      });\n    }\n\n    // Note: We don't want this Suggest to be a fully \"controlled\" React component.\n    // Keeping it's state is annoyign and we only want to update our data model on\n    // selection change. However, we need to set an initial value (defaultSelectedItem)\n    // and ensure it is re-applied to the internal state when it changes (via `key` below).\n    return (\n      <>\n        <Suggest<Partition>\n          key={selected ? selected.name : 'none'}\n          defaultSelectedItem={selected}\n          items={partitions}\n          inputProps={inputProps}\n          inputValueRenderer={(partition) => partition.name}\n          itemPredicate={(query, partition) => query.length === 0 || partition.name.includes(query)}\n          itemRenderer={(partition, props) => (\n            <MenuItem\n              active={props.modifiers.active}\n              onClick={props.handleClick}\n              key={partition.name}\n              text={partition.name}\n            />\n          )}\n          noResults={<MenuItem disabled={true} text=\"No presets.\" />}\n          onItemSelect={(item) => {\n            onSelect(repositorySelector, partitionSetName, item.name);\n          }}\n        />\n        {isDynamicPartition ? (\n          <Button\n            onClick={() => {\n              setShowCreatePartition(true);\n            }}\n          >\n            Add new partition\n          </Button>\n        ) : null}\n        <CreatePartitionDialog\n          key={showCreatePartition ? '1' : '0'}\n          isOpen={showCreatePartition}\n          partitionDefinitionName={partitionDefinitionName}\n          repoAddress={repoAddress}\n          close={() => {\n            setShowCreatePartition(false);\n          }}\n          refetch={async () => {\n            await refetch();\n          }}\n          onCreated={(partitionName) => {\n            onSelect(repositorySelector, partitionSetName, partitionName);\n          }}\n        />\n      </>\n    );\n  },\n);\n\ninterface ConfigEditorConfigGeneratorPickerProps {\n  label: string;\n  configGenerators: ConfigGenerator[];\n  onSelect: (configGenerator: ConfigGenerator) => void;\n}\n\nconst ConfigEditorConfigGeneratorPicker: React.FC<ConfigEditorConfigGeneratorPickerProps> = React.memo(\n  (props) => {\n    const {configGenerators, label, onSelect} = props;\n    const button = React.useRef<HTMLButtonElement>(null);\n\n    return (\n      <div>\n        <ShortcutHandler\n          shortcutLabel=\"E\"\n          shortcutFilter={(e) => e.code === 'KeyE' && e.altKey}\n          onShortcut={() => button.current?.click()}\n        >\n          <Select<ConfigGenerator>\n            items={configGenerators}\n            itemPredicate={(query, configGenerator) =>\n              query.length === 0 || configGenerator.name.includes(query)\n            }\n            itemListRenderer={({itemsParentRef, renderItem, filteredItems}) => {\n              const renderedPresetItems = filteredItems\n                .filter((item) => item.__typename === 'PipelinePreset')\n                .map(renderItem)\n                .filter(Boolean);\n\n              const renderedPartitionSetItems = filteredItems\n                .filter((item) => item.__typename === 'PartitionSet')\n                .map(renderItem)\n                .filter(Boolean);\n\n              const bothTypesPresent =\n                renderedPresetItems.length > 0 && renderedPartitionSetItems.length > 0;\n\n              return (\n                <Menu ulRef={itemsParentRef}>\n                  {bothTypesPresent && <MenuItem disabled={true} text=\"Presets\" />}\n                  {renderedPresetItems}\n                  {bothTypesPresent && <MenuDivider />}\n                  {bothTypesPresent && <MenuItem disabled={true} text=\"Partition Sets\" />}\n                  {renderedPartitionSetItems}\n                </Menu>\n              );\n            }}\n            itemRenderer={(item, props) => (\n              <MenuItem\n                active={props.modifiers.active}\n                onClick={props.handleClick}\n                key={item.name}\n                text={\n                  <div>\n                    {item.name}\n                    <div style={{opacity: 0.4, fontSize: '0.75rem'}}>\n                      {[\n                        item.solidSelection\n                          ? item.solidSelection.length === 1\n                            ? `Ops: ${item.solidSelection[0]}`\n                            : `Ops: ${item.solidSelection.length}`\n                          : `Ops: All`,\n                        `Mode: ${item.mode}`,\n                      ].join(' - ')}\n                    </div>\n                  </div>\n                }\n              />\n            )}\n            noResults={<MenuItem disabled={true} text=\"No presets.\" />}\n            onItemSelect={onSelect}\n          >\n            <Button\n              ref={button}\n              data-test-id=\"preset-selector-button\"\n              rightIcon={<Icon name=\"expand_more\" />}\n            >\n              {label}\n            </Button>\n          </Select>\n        </ShortcutHandler>\n      </div>\n    );\n  },\n);\n\nexport const SortButton = styled.button`\n  border: 0;\n  cursor: pointer;\n  padding: 4px;\n  margin: 3px 3px 0 0;\n  background-color: ${Colors.White};\n  border-radius: 4px;\n  transition: background-color 100ms;\n\n  :focus {\n    background-color: ${Colors.Gray100};\n    outline: none;\n  }\n  :hover {\n    ${IconWrapper} {\n      background-color: ${Colors.Gray700};\n    }\n  }\n`;\n\nconst PickerContainer = styled.div`\n  display: flex;\n  justify: space-between;\n  align-items: center;\n  gap: 6px;\n`;\n\nconst CONFIG_PARTITIONS_QUERY = gql`\n  query ConfigPartitionsQuery(\n    $repositorySelector: RepositorySelector!\n    $partitionSetName: String!\n    $assetKeys: [AssetKeyInput!]\n  ) {\n    partitionSetOrError(\n      repositorySelector: $repositorySelector\n      partitionSetName: $partitionSetName\n    ) {\n      __typename\n      ... on PartitionSet {\n        id\n        partitionsOrError {\n          ... on Partitions {\n            results {\n              ...ConfigPartitionResult\n            }\n          }\n          ...PythonErrorFragment\n        }\n      }\n    }\n    assetNodes(assetKeys: $assetKeys) {\n      id\n      partitionDefinition {\n        name\n        type\n      }\n    }\n  }\n\n  fragment ConfigPartitionResult on Partition {\n    name\n  }\n\n  ${PYTHON_ERROR_FRAGMENT}\n`;\n\nexport const CONFIG_PARTITION_SELECTION_QUERY = gql`\n  query ConfigPartitionSelectionQuery(\n    $repositorySelector: RepositorySelector!\n    $partitionSetName: String!\n    $partitionName: String!\n  ) {\n    partitionSetOrError(\n      repositorySelector: $repositorySelector\n      partitionSetName: $partitionSetName\n    ) {\n      __typename\n      ... on PartitionSet {\n        id\n        partition(partitionName: $partitionName) {\n          name\n          solidSelection\n          runConfigOrError {\n            ... on PartitionRunConfig {\n              yaml\n            }\n            ...PythonErrorFragment\n          }\n          mode\n          tagsOrError {\n            ... on PartitionTags {\n              results {\n                key\n                value\n              }\n            }\n            ...PythonErrorFragment\n          }\n        }\n      }\n    }\n  }\n\n  ${PYTHON_ERROR_FRAGMENT}\n`;\n\nexport const CONFIG_EDITOR_GENERATOR_PIPELINE_FRAGMENT = gql`\n  fragment ConfigEditorGeneratorPipelineFragment on Pipeline {\n    id\n    isJob\n    name\n    presets {\n      ...ConfigEditorPipelinePreset\n    }\n    tags {\n      key\n      value\n    }\n  }\n\n  fragment ConfigEditorPipelinePreset on PipelinePreset {\n    name\n    mode\n    solidSelection\n    runConfigYaml\n    tags {\n      key\n      value\n    }\n  }\n`;\n\nexport const CONFIG_EDITOR_GENERATOR_PARTITION_SETS_FRAGMENT = gql`\n  fragment ConfigEditorGeneratorPartitionSetsFragment on PartitionSets {\n    results {\n      id\n      ...PartitionSetForConfigEditor\n    }\n  }\n\n  fragment PartitionSetForConfigEditor on PartitionSet {\n    id\n    name\n    mode\n    solidSelection\n  }\n`;\n","import * as React from 'react';\nimport {createGlobalStyle} from 'styled-components/macro';\n\nimport {Box} from './Box';\nimport {ConfigEditor, ConfigSchema} from './ConfigEditor';\nimport {Spinner} from './Spinner';\nimport {SplitPanelContainer} from './SplitPanelContainer';\nimport {ConfigEditorHelp} from './configeditor/ConfigEditorHelp';\nimport {isHelpContextEqual} from './configeditor/isHelpContextEqual';\nimport {ConfigEditorHelpContext} from './configeditor/types/ConfigEditorHelpContext';\n\ninterface Props {\n  onConfigChange: (config: string) => void;\n  config?: string;\n  configSchema?: ConfigSchema | null;\n  isLoading: boolean;\n  identifier: string;\n}\n\n// Force code editor hints to appear above the dialog modal\nexport const CodeMirrorInDialogStyle = createGlobalStyle`\n  .CodeMirror-hints,\n  .CodeMirror-hints.dagit {\n    z-index: 100;\n  }\n`;\n\nexport const ConfigEditorWithSchema: React.FC<Props> = ({\n  isLoading,\n  identifier,\n  config,\n  onConfigChange,\n  configSchema,\n}) => {\n  const editorSplitPanelContainer = React.useRef<SplitPanelContainer | null>(null);\n  const [editorHelpContext, setEditorHelpContext] = React.useState<ConfigEditorHelpContext | null>(\n    null,\n  );\n  const editor = React.useRef<ConfigEditor | null>(null);\n\n  return (\n    <>\n      <CodeMirrorInDialogStyle />\n      <SplitPanelContainer\n        ref={editorSplitPanelContainer}\n        axis=\"horizontal\"\n        identifier={identifier}\n        firstMinSize={100}\n        firstInitialPercent={70}\n        first={\n          !isLoading ? (\n            <ConfigEditor\n              ref={editor}\n              configCode={config!}\n              onConfigChange={onConfigChange}\n              onHelpContextChange={(next) => {\n                if (next && !isHelpContextEqual(editorHelpContext, next)) {\n                  setEditorHelpContext(next);\n                }\n              }}\n              readOnly={false}\n              checkConfig={async (_j) => {\n                return {isValid: true};\n              }}\n              configSchema={configSchema}\n            />\n          ) : (\n            <Box style={{height: '100%'}} flex={{alignItems: 'center', justifyContent: 'center'}}>\n              <Spinner purpose=\"section\" />\n            </Box>\n          )\n        }\n        second={\n          <Box style={{height: 500}}>\n            <ConfigEditorHelp\n              context={editorHelpContext}\n              allInnerTypes={configSchema?.allConfigTypes || []}\n            />\n          </Box>\n        }\n      />\n    </>\n  );\n};\n","import * as React from 'react';\n\nimport {\n  createSingleSession,\n  IExecutionSession,\n  IExecutionSessionChanges,\n  useInitialDataForMode,\n} from '../app/ExecutionSessionStorage';\nimport {RepoAddress} from '../workspace/types';\n\nimport {LaunchpadType} from './LaunchpadRoot';\nimport LaunchpadSession from './LaunchpadSession';\nimport {\n  LaunchpadSessionPartitionSetsFragment,\n  LaunchpadSessionPipelineFragment,\n} from './types/LaunchpadRoot.types';\n\ninterface Props {\n  launchpadType: LaunchpadType;\n  pipeline: LaunchpadSessionPipelineFragment;\n  partitionSets: LaunchpadSessionPartitionSetsFragment;\n  repoAddress: RepoAddress;\n  sessionPresets: Partial<IExecutionSession>;\n}\n\nexport const LaunchpadTransientSessionContainer = (props: Props) => {\n  const {launchpadType, pipeline, partitionSets, repoAddress, sessionPresets} = props;\n\n  const initialData = useInitialDataForMode(pipeline, partitionSets);\n  const initialSessionComplete = createSingleSession({\n    ...sessionPresets,\n    runConfigYaml: initialData.runConfigYaml,\n  });\n\n  const [session, setSession] = React.useState<IExecutionSession>(initialSessionComplete);\n\n  const onSaveSession = (changes: IExecutionSessionChanges) => {\n    const newSession = {...session, ...changes};\n    setSession(newSession);\n  };\n\n  return (\n    <LaunchpadSession\n      launchpadType={launchpadType}\n      session={session}\n      onSave={onSaveSession}\n      pipeline={pipeline}\n      partitionSets={partitionSets}\n      repoAddress={repoAddress}\n    />\n  );\n};\n","import {gql, useQuery} from '@apollo/client';\nimport {CodeMirrorInDialogStyle, Dialog, DialogHeader} from '@dagster-io/ui';\nimport * as React from 'react';\nimport {Redirect, useParams} from 'react-router-dom';\n\nimport {IExecutionSession} from '../app/ExecutionSessionStorage';\nimport {usePermissionsForLocation} from '../app/Permissions';\nimport {PYTHON_ERROR_FRAGMENT} from '../app/PythonErrorFragment';\nimport {useTrackPageView} from '../app/analytics';\nimport {explorerPathFromString, useStripSnapshotFromPath} from '../pipelines/PipelinePathUtils';\nimport {useJobTitle} from '../pipelines/useJobTitle';\nimport {isThisThingAJob, useRepository} from '../workspace/WorkspaceContext';\nimport {RepoAddress} from '../workspace/types';\n\nimport {\n  CONFIG_EDITOR_GENERATOR_PARTITION_SETS_FRAGMENT,\n  CONFIG_EDITOR_GENERATOR_PIPELINE_FRAGMENT,\n} from './ConfigEditorConfigPicker';\nimport {LaunchpadSessionError} from './LaunchpadSessionError';\nimport {LaunchpadSessionLoading} from './LaunchpadSessionLoading';\nimport {LaunchpadTransientSessionContainer} from './LaunchpadTransientSessionContainer';\nimport {LaunchpadRootQuery, LaunchpadRootQueryVariables} from './types/LaunchpadRoot.types';\n\nconst LaunchpadStoredSessionsContainer = React.lazy(\n  () => import('./LaunchpadStoredSessionsContainer'),\n);\n\nexport type LaunchpadType = 'asset' | 'job';\n\n// ########################\n// ##### LAUNCHPAD ROOTS\n// ########################\n\nexport const AssetLaunchpad: React.FC<{\n  repoAddress: RepoAddress;\n  sessionPresets?: Partial<IExecutionSession>;\n  assetJobName: string;\n  open: boolean;\n  setOpen: (open: boolean) => void;\n}> = ({repoAddress, sessionPresets, assetJobName, open, setOpen}) => {\n  const title = 'Launchpad (configure assets)';\n\n  return (\n    <Dialog\n      style={{height: '90vh', width: '80%'}}\n      isOpen={open}\n      canEscapeKeyClose={true}\n      canOutsideClickClose={true}\n      onClose={() => setOpen(false)}\n    >\n      <DialogHeader icon=\"layers\" label={title} />\n      <CodeMirrorInDialogStyle />\n      <LaunchpadAllowedRoot\n        launchpadType=\"asset\"\n        pipelinePath={assetJobName}\n        repoAddress={repoAddress}\n        sessionPresets={sessionPresets}\n      />\n    </Dialog>\n  );\n};\n\nexport const JobLaunchpad: React.FC<{repoAddress: RepoAddress}> = (props) => {\n  const {repoAddress} = props;\n  const {pipelinePath, repoPath} = useParams<{repoPath: string; pipelinePath: string}>();\n  const {\n    permissions: {canLaunchPipelineExecution},\n  } = usePermissionsForLocation(repoAddress.location);\n\n  if (!canLaunchPipelineExecution) {\n    return <Redirect to={`/locations/${repoPath}/pipeline_or_job/${pipelinePath}`} />;\n  }\n\n  return (\n    <LaunchpadAllowedRoot\n      launchpadType=\"job\"\n      pipelinePath={pipelinePath}\n      repoAddress={repoAddress}\n    />\n  );\n};\n\n// ########################\n// ##### LAUNCHPAD ALLOWED ROOT\n// ########################\n\ninterface Props {\n  launchpadType: LaunchpadType;\n  pipelinePath: string;\n  repoAddress: RepoAddress;\n  sessionPresets?: Partial<IExecutionSession>;\n}\n\nconst LaunchpadAllowedRoot: React.FC<Props> = (props) => {\n  useTrackPageView();\n\n  const {pipelinePath, repoAddress, launchpadType, sessionPresets} = props;\n  const explorerPath = explorerPathFromString(pipelinePath);\n  const {pipelineName} = explorerPath;\n\n  const repo = useRepository(repoAddress);\n  const isJob = isThisThingAJob(repo, pipelineName);\n\n  useJobTitle(explorerPath, isJob);\n  useStripSnapshotFromPath(props);\n\n  const {name: repositoryName, location: repositoryLocationName} = repoAddress;\n\n  const result = useQuery<LaunchpadRootQuery, LaunchpadRootQueryVariables>(\n    PIPELINE_EXECUTION_ROOT_QUERY,\n    {\n      variables: {repositoryName, repositoryLocationName, pipelineName},\n      partialRefetch: true,\n    },\n  );\n\n  const pipelineOrError = result?.data?.pipelineOrError;\n  const partitionSetsOrError = result?.data?.partitionSetsOrError;\n\n  if (!pipelineOrError || !partitionSetsOrError) {\n    return <LaunchpadSessionLoading />;\n  }\n\n  if (\n    partitionSetsOrError.__typename === 'PipelineNotFoundError' ||\n    pipelineOrError.__typename === 'PipelineNotFoundError'\n  ) {\n    const message =\n      pipelineOrError.__typename === 'PipelineNotFoundError'\n        ? pipelineOrError.message\n        : 'No data returned from GraphQL';\n\n    return pipelineName !== '' ? (\n      <LaunchpadSessionError\n        icon=\"error\"\n        title={isJob ? 'Job not found' : 'Pipeline not found'}\n        description={message}\n      />\n    ) : (\n      <LaunchpadSessionError\n        icon=\"no-results\"\n        title={isJob ? 'Select a job' : 'Select a pipeline'}\n        description={message}\n      />\n    );\n  }\n\n  if (pipelineOrError.__typename === 'InvalidSubsetError') {\n    throw new Error(`Should never happen because we do not request a subset`);\n  }\n\n  if (pipelineOrError.__typename === 'PythonError') {\n    return (\n      <LaunchpadSessionError\n        icon=\"error\"\n        title=\"Python Error\"\n        description={pipelineOrError.message}\n      />\n    );\n  }\n  if (partitionSetsOrError && partitionSetsOrError.__typename === 'PythonError') {\n    return (\n      <LaunchpadSessionError\n        icon=\"error\"\n        title=\"Python Error\"\n        description={partitionSetsOrError.message}\n      />\n    );\n  }\n\n  if (launchpadType === 'asset') {\n    return (\n      <LaunchpadTransientSessionContainer\n        launchpadType={launchpadType}\n        pipeline={pipelineOrError}\n        partitionSets={partitionSetsOrError}\n        repoAddress={repoAddress}\n        sessionPresets={sessionPresets || {}}\n      />\n    );\n  } else {\n    // job\n    return (\n      <React.Suspense fallback={<div />}>\n        <LaunchpadStoredSessionsContainer\n          launchpadType={launchpadType}\n          pipeline={pipelineOrError}\n          partitionSets={partitionSetsOrError}\n          repoAddress={repoAddress}\n        />\n      </React.Suspense>\n    );\n  }\n};\n\nconst PIPELINE_EXECUTION_ROOT_QUERY = gql`\n  query LaunchpadRootQuery(\n    $pipelineName: String!\n    $repositoryName: String!\n    $repositoryLocationName: String!\n  ) {\n    pipelineOrError(\n      params: {\n        pipelineName: $pipelineName\n        repositoryName: $repositoryName\n        repositoryLocationName: $repositoryLocationName\n      }\n    ) {\n      ... on PipelineNotFoundError {\n        message\n      }\n      ... on Pipeline {\n        id\n        ...LaunchpadSessionPipelineFragment\n      }\n      ...PythonErrorFragment\n    }\n    partitionSetsOrError(\n      pipelineName: $pipelineName\n      repositorySelector: {\n        repositoryName: $repositoryName\n        repositoryLocationName: $repositoryLocationName\n      }\n    ) {\n      __typename\n      ... on PipelineNotFoundError {\n        message\n      }\n      ...LaunchpadSessionPartitionSetsFragment\n      ...PythonErrorFragment\n    }\n  }\n\n  fragment LaunchpadSessionPartitionSetsFragment on PartitionSets {\n    ...ConfigEditorGeneratorPartitionSetsFragment\n  }\n\n  fragment LaunchpadSessionPipelineFragment on Pipeline {\n    id\n    isJob\n    isAssetJob\n    ...ConfigEditorGeneratorPipelineFragment\n    modes {\n      id\n      name\n      description\n    }\n  }\n\n  ${PYTHON_ERROR_FRAGMENT}\n  ${CONFIG_EDITOR_GENERATOR_PARTITION_SETS_FRAGMENT}\n  ${CONFIG_EDITOR_GENERATOR_PIPELINE_FRAGMENT}\n`;\n","// Patched lint mode that won't constantly lint\nimport CodeMirror from 'codemirror';\n\nconst GUTTER_ID = 'CodeMirror-lint-markers';\n\nfunction showTooltip(e, content, node) {\n  const tt = document.createElement('div');\n  const nodeRect = node.getBoundingClientRect();\n\n  tt.className = 'CodeMirror-lint-tooltip';\n  tt.appendChild(content.cloneNode(true));\n  document.body.appendChild(tt);\n  if (nodeRect.top > tt.clientHeight) {\n    // position on the top\n    tt.style.top = nodeRect.top - tt.clientHeight - 5 + 'px';\n    tt.style.left = nodeRect.left + 5 + 'px';\n  } else {\n    // positon on the right if top would be off-screen\n    tt.style.top = nodeRect.top + 5 + 'px';\n    tt.style.left = nodeRect.right + 10 + 'px';\n  }\n  if (tt.style.opacity != null) {\n    tt.style.opacity = 1;\n  }\n  return tt;\n}\nfunction rm(elt) {\n  if (elt.parentNode) {\n    elt.parentNode.removeChild(elt);\n  }\n}\nfunction hideTooltip(tt) {\n  if (!tt.parentNode) {\n    return;\n  }\n  if (tt.style.opacity == null) {\n    rm(tt);\n  }\n  tt.style.opacity = 0;\n  setTimeout(function () {\n    rm(tt);\n  }, 600);\n}\n\nfunction showTooltipFor(e, content, node) {\n  let tooltip = showTooltip(e, content, node);\n  function hide() {\n    CodeMirror.off(node, 'mouseout', hide);\n    if (tooltip) {\n      hideTooltip(tooltip);\n      tooltip = null;\n    }\n  }\n  const poll = setInterval(function () {\n    if (tooltip) {\n      for (let n = node; ; n = n.parentNode) {\n        if (n && n.nodeType === 11) {\n          n = n.host;\n        }\n        if (n === document.body) {\n          return;\n        }\n        if (!n) {\n          hide();\n          break;\n        }\n      }\n    }\n    if (!tooltip) {\n      return clearInterval(poll);\n    }\n  }, 400);\n  CodeMirror.on(node, 'mouseout', hide);\n}\n\nfunction parseOptions(_cm, options) {\n  if (options instanceof Function) {\n    return {getAnnotations: options};\n  }\n  if (!options || options === true) {\n    options = {};\n  }\n  return options;\n}\n\nfunction clearMarks(cm) {\n  const state = cm.state.lint;\n  if (state.hasGutter) {\n    cm.clearGutter(GUTTER_ID);\n  }\n  for (let i = 0; i < state.marked.length; ++i) {\n    state.marked[i].clear();\n  }\n  state.marked.length = 0;\n}\n\nfunction makeMarker(labels, severity, multiple, tooltips) {\n  const marker = document.createElement('div');\n  let inner = marker;\n  marker.className = 'CodeMirror-lint-marker CodeMirror-lint-marker-' + severity;\n  if (multiple) {\n    inner = marker.appendChild(document.createElement('div'));\n    inner.className = 'CodeMirror-lint-marker CodeMirror-lint-marker-multiple';\n  }\n\n  if (tooltips !== false) {\n    CodeMirror.on(inner, 'mouseover', function (e) {\n      showTooltipFor(e, labels, inner);\n    });\n  }\n  return marker;\n}\n\nfunction getMaxSeverity(a, b) {\n  if (a === 'error') {\n    return a;\n  } else {\n    return b;\n  }\n}\n\nfunction groupByLine(annotations) {\n  const lines = [];\n  for (let i = 0; i < annotations.length; ++i) {\n    const ann = annotations[i],\n      line = ann.from.line;\n    (lines[line] || (lines[line] = [])).push(ann);\n  }\n  return lines;\n}\n\nfunction annotationTooltip(ann) {\n  let severity = ann.severity;\n  if (!severity) {\n    severity = 'error';\n  }\n  const tip = document.createElement('div');\n  tip.className = 'CodeMirror-lint-message CodeMirror-lint-message-' + severity;\n  if (typeof ann.messageHTML !== 'undefined') {\n    tip.innerHTML = ann.messageHTML;\n  } else {\n    tip.appendChild(document.createTextNode(ann.message));\n  }\n  return tip;\n}\n\nfunction updateLinting(cm, annotationsNotSorted) {\n  clearMarks(cm);\n  const state = cm.state.lint,\n    options = state.options;\n\n  const annotations = groupByLine(annotationsNotSorted);\n\n  for (let line = 0; line < annotations.length; ++line) {\n    const anns = annotations[line];\n    if (!anns) {\n      continue;\n    }\n\n    let maxSeverity = null;\n    const tipLabel = state.hasGutter && document.createDocumentFragment();\n\n    for (let i = 0; i < anns.length; ++i) {\n      let ann = anns[i];\n      let severity = ann.severity;\n      if (!severity) {\n        severity = 'error';\n      }\n      maxSeverity = getMaxSeverity(maxSeverity, severity);\n\n      if (options.formatAnnotation) {\n        ann = options.formatAnnotation(ann);\n      }\n      if (state.hasGutter) {\n        tipLabel.appendChild(annotationTooltip(ann));\n      }\n\n      if (ann.to) {\n        state.marked.push(\n          cm.markText(ann.from, ann.to, {\n            className: 'CodeMirror-lint-mark CodeMirror-lint-mark-' + severity,\n            __annotation: ann,\n          }),\n        );\n      }\n    }\n\n    if (state.hasGutter) {\n      cm.setGutterMarker(\n        line,\n        GUTTER_ID,\n        makeMarker(tipLabel, maxSeverity, anns.length > 1, state.options.tooltips),\n      );\n    }\n  }\n  if (options.onUpdateLinting) {\n    options.onUpdateLinting(annotationsNotSorted, annotations, cm);\n  }\n}\n\nfunction lintAsync(cm, getAnnotations, passOptions) {\n  const state = cm.state.lint;\n  let id = ++state.waitingFor;\n  function abort() {\n    id = -1;\n    cm.off('change', abort);\n  }\n  cm.on('change', abort);\n  getAnnotations(\n    cm.getValue(),\n    function (annotations, arg2) {\n      cm.off('change', abort);\n      if (state.waitingFor !== id) {\n        return;\n      }\n      if (arg2 && annotations instanceof CodeMirror) {\n        annotations = arg2;\n      }\n      cm.operation(function () {\n        updateLinting(cm, annotations);\n      });\n    },\n    passOptions,\n    cm,\n  );\n}\n\nfunction startLinting(cm) {\n  const state = cm.state.lint,\n    options = state.options;\n  /*\n   * Passing rules in `options` property prevents JSHint (and other linters) from complaining\n   * about unrecognized rules like `onUpdateLinting`, `delay`, `lintOnChange`, etc.\n   */\n  const passOptions = options.options || options;\n  const getAnnotations = options.getAnnotations || cm.getHelper(CodeMirror.Pos(0, 0), 'lint');\n  if (!getAnnotations) {\n    return;\n  }\n  if (options.async || getAnnotations.async) {\n    lintAsync(cm, getAnnotations, passOptions);\n  } else {\n    const annotations = getAnnotations(cm.getValue(), passOptions, cm);\n    if (!annotations) {\n      return;\n    }\n    if (annotations.then) {\n      annotations.then(function (issues) {\n        cm.operation(function () {\n          updateLinting(cm, issues);\n        });\n      });\n    } else {\n      cm.operation(function () {\n        updateLinting(cm, annotations);\n      });\n    }\n  }\n}\n\nfunction onChange(cm) {\n  const state = cm.state.lint;\n  if (!state) {\n    return;\n  }\n  clearTimeout(state.timeout);\n  state.timeout = setTimeout(function () {\n    startLinting(cm);\n  }, state.options.delay || 500);\n}\n\nfunction popupTooltip(docs, annotations, e) {\n  const target = e.target || e.srcElement;\n\n  const tooltip = document.createDocumentFragment();\n\n  if (docs) {\n    const docsEl = document.createElement('div');\n    docsEl.textContent = docs;\n    tooltip.appendChild(docsEl);\n    if (annotations.length) {\n      docsEl.style.paddingBottom = '4px';\n      docsEl.style.marginBottom = '4px';\n      docsEl.style.borderBottom = '1px solid rgba(0,0,0,0.25)';\n    }\n  }\n\n  for (let i = 0; i < annotations.length; i++) {\n    const ann = annotations[i];\n    tooltip.appendChild(annotationTooltip(ann));\n  }\n  showTooltipFor(e, tooltip, target);\n}\n\nfunction onMouseOver(cm, e) {\n  const target = e.target || e.srcElement;\n  const box = target.getBoundingClientRect(),\n    x = (box.left + box.right) / 2,\n    y = (box.top + box.bottom) / 2;\n  const pos = cm.coordsChar({left: x, top: y}, 'client');\n  const spans = cm.findMarksAt(pos);\n\n  const getDocs = cm.getHelper(CodeMirror.Pos(0, 0), 'dagster-docs');\n  const docs = getDocs(cm, pos);\n\n  const annotations = [];\n  for (let i = 0; i < spans.length; ++i) {\n    const ann = spans[i].__annotation;\n    if (ann) {\n      annotations.push(ann);\n    }\n  }\n\n  if (docs || annotations.length) {\n    popupTooltip(docs, annotations, e);\n  }\n}\n\nfunction LintState(cm, options, hasGutter) {\n  this.marked = [];\n  this.options = options;\n  this.timeout = null;\n  this.hasGutter = hasGutter;\n  this.onMouseOver = function (e) {\n    onMouseOver(cm, e);\n  };\n  this.waitingFor = 0;\n}\n\nexport const patchLint = () => {\n  CodeMirror.defineOption('lint', false, function (cm, val, old) {\n    if (old && old !== CodeMirror.Init) {\n      clearMarks(cm);\n      if (cm.state.lint.options.lintOnChange !== false) {\n        cm.off('change', onChange);\n      }\n      CodeMirror.off(cm.getWrapperElement(), 'mouseover', cm.state.lint.onMouseOver);\n      clearTimeout(cm.state.lint.timeout);\n      delete cm.state.lint;\n    }\n\n    if (val) {\n      const gutters = cm.getOption('gutters');\n      let hasLintGutter = false;\n      for (let i = 0; i < gutters.length; ++i) {\n        if (gutters[i] === GUTTER_ID) {\n          hasLintGutter = true;\n        }\n      }\n      const state = (cm.state.lint = new LintState(cm, parseOptions(cm, val), hasLintGutter));\n      if (state.options.lintOnChange !== false) {\n        cm.on('change', onChange);\n      }\n      if (state.options.tooltips !== false && state.options.tooltips !== 'gutter') {\n        CodeMirror.on(cm.getWrapperElement(), 'mouseover', state.onMouseOver);\n      }\n    }\n  });\n\n  CodeMirror.defineExtension('performLint', function () {\n    if (this.state.lint) {\n      startLinting(this);\n    }\n  });\n};\n","import 'codemirror/addon/comment/comment';\nimport 'codemirror/addon/dialog/dialog';\nimport 'codemirror/addon/fold/foldgutter';\nimport 'codemirror/addon/fold/foldgutter.css';\nimport 'codemirror/addon/fold/indent-fold';\nimport 'codemirror/addon/hint/show-hint';\nimport 'codemirror/addon/hint/show-hint.css';\nimport 'codemirror/addon/lint/lint.css';\nimport 'codemirror/addon/search/jump-to-line';\nimport 'codemirror/addon/search/search';\nimport 'codemirror/addon/search/searchcursor';\nimport 'codemirror/keymap/sublime';\n\nimport {Editor} from 'codemirror';\nimport debounce from 'lodash/debounce';\nimport * as React from 'react';\nimport {createGlobalStyle} from 'styled-components/macro';\nimport * as yaml from 'yaml';\n\nimport {StyledCodeMirror} from './CodeMirror';\nimport {patchLint} from './configeditor/codemirror-yaml/lint';\nimport {\n  YamlModeValidateFunction,\n  expandAutocompletionContextAtCursor,\n  findRangeInDocumentFromPath,\n  YamlModeValidationResult,\n} from './configeditor/codemirror-yaml/mode'; // eslint-disable-line import/no-duplicates\nimport {ConfigEditorHelpContext} from './configeditor/types/ConfigEditorHelpContext';\nimport {ConfigSchema} from './configeditor/types/ConfigSchema';\n\nexport {isHelpContextEqual} from './configeditor/isHelpContextEqual';\nexport {ConfigEditorHelp} from './configeditor/ConfigEditorHelp';\n\nexport type {ConfigEditorHelpContext, ConfigSchema, YamlModeValidationResult};\n\npatchLint();\n\ninterface ConfigEditorProps {\n  configCode: string;\n  readOnly: boolean;\n  configSchema?: ConfigSchema | null;\n\n  checkConfig: YamlModeValidateFunction;\n  onConfigChange: (newValue: string) => void;\n  onHelpContextChange: (helpContext: ConfigEditorHelpContext | null) => void;\n}\n\nconst AUTO_COMPLETE_AFTER_KEY = /^[a-zA-Z0-9_@(]$/;\nconst performLint = debounce((editor: any) => {\n  editor.performLint();\n}, 1000);\n\nconst ConfigEditorStyle = createGlobalStyle`\n  .react-codemirror2 .CodeMirror.cm-s-config-editor {\n    height: initial;\n    position: absolute;\n    inset: 0;\n  }\n`;\n\nexport class ConfigEditor extends React.Component<ConfigEditorProps> {\n  _editor?: Editor;\n\n  componentDidUpdate(prevProps: ConfigEditorProps) {\n    if (!this._editor) {\n      return;\n    }\n    if (prevProps.configSchema === this.props.configSchema) {\n      return;\n    }\n    this.performInitialPass();\n  }\n\n  shouldComponentUpdate(prevProps: ConfigEditorProps) {\n    // Unfortunately, updates to the ConfigEditor clear the linter highlighting for\n    // unknown reasons and they're recalculated asynchronously. To prevent flickering,\n    // only update if our input has meaningfully changed.\n    return (\n      prevProps.configCode !== this.props.configCode ||\n      prevProps.readOnly !== this.props.readOnly ||\n      prevProps.configSchema !== this.props.configSchema\n    );\n  }\n\n  // Public API\n\n  moveCursor = (line: number, ch: number) => {\n    if (!this._editor) {\n      return;\n    }\n    this._editor.setCursor(line, ch, {scroll: false});\n    const {clientHeight} = this._editor.getScrollInfo();\n    const {left, top} = this._editor.cursorCoords(true, 'local');\n    const offsetFromTop = 20;\n\n    this._editor?.scrollIntoView({\n      left,\n      right: left,\n      top: top - offsetFromTop,\n      bottom: top + (clientHeight - offsetFromTop),\n    });\n    this._editor.focus();\n  };\n\n  moveCursorToPath = (path: string[]) => {\n    if (!this._editor) {\n      return;\n    }\n    const codeMirrorDoc = this._editor.getDoc();\n    const yamlDoc = yaml.parseDocument(this.props.configCode);\n    const range = findRangeInDocumentFromPath(yamlDoc, path, 'key');\n    if (!range) {\n      return;\n    }\n    const from = codeMirrorDoc.posFromIndex(range ? range.start : 0) as CodeMirror.Position;\n    this.moveCursor(from.line, from.ch);\n  };\n\n  // End Public API\n\n  performInitialPass() {\n    // update the gutter and redlining\n    performLint(this._editor);\n\n    // update the contextual help based on the configSchema and content\n    const {context} = expandAutocompletionContextAtCursor(this._editor);\n    this.props.onHelpContextChange(context ? {type: context.closestMappingType} : null);\n  }\n\n  render() {\n    // Unfortunately, CodeMirror is too intense to be simulated in the JSDOM \"virtual\" DOM.\n    // Until we run tests against something like selenium, trying to render the editor in\n    // tests have to stop here.\n    if (process.env.NODE_ENV === 'test') {\n      return <span />;\n    }\n\n    return (\n      <div style={{flex: 1, position: 'relative'}}>\n        <ConfigEditorStyle />\n        <StyledCodeMirror\n          value={this.props.configCode}\n          theme={['config-editor']}\n          options={\n            {\n              mode: 'yaml',\n              lineNumbers: true,\n              readOnly: this.props.readOnly,\n              indentUnit: 2,\n              smartIndent: true,\n              showCursorWhenSelecting: true,\n              lintOnChange: false,\n              lint: {\n                checkConfig: this.props.checkConfig,\n                lintOnChange: false,\n                onUpdateLinting: false,\n              },\n              hintOptions: {\n                completeSingle: false,\n                closeOnUnfocus: false,\n                schema: this.props.configSchema,\n              },\n              keyMap: 'sublime',\n              extraKeys: {\n                'Cmd-Space': (editor: any) => editor.showHint({completeSingle: true}),\n                'Ctrl-Space': (editor: any) => editor.showHint({completeSingle: true}),\n                'Alt-Space': (editor: any) => editor.showHint({completeSingle: true}),\n                'Shift-Tab': (editor: any) => editor.execCommand('indentLess'),\n                Tab: (editor: any) => editor.execCommand('indentMore'),\n                // Persistent search box in Query Editor\n                'Cmd-F': 'findPersistent',\n                'Ctrl-F': 'findPersistent',\n              },\n              gutters: [\n                'CodeMirror-foldgutter',\n                'CodeMirror-lint-markers',\n                'CodeMirror-linenumbers',\n              ],\n              foldGutter: true,\n            } as any\n          }\n          editorDidMount={(editor) => {\n            this._editor = editor;\n            this.performInitialPass();\n          }}\n          onBeforeChange={(editor, data, value) => {\n            this.props.onConfigChange(value);\n          }}\n          onCursorActivity={(editor: any) => {\n            if (editor.getSelection().length) {\n              this.props.onHelpContextChange(null);\n            } else {\n              const {context} = expandAutocompletionContextAtCursor(editor);\n              this.props.onHelpContextChange(context ? {type: context.closestMappingType} : null);\n            }\n          }}\n          onChange={(editor: Editor) => {\n            performLint(editor);\n          }}\n          onBlur={(editor: Editor) => {\n            performLint(editor);\n          }}\n          onKeyUp={(editor, event: KeyboardEvent) => {\n            if (AUTO_COMPLETE_AFTER_KEY.test(event.key)) {\n              editor.execCommand('autocomplete');\n            }\n          }}\n        />\n      </div>\n    );\n  }\n}\n","import {ConfigEditorHelpContext} from './types/ConfigEditorHelpContext';\n\nexport const isHelpContextEqual = (\n  prev: ConfigEditorHelpContext | null,\n  next: ConfigEditorHelpContext | null,\n) => (prev && prev.type.key) === (next && next.type.key);\n","import * as React from 'react';\nimport styled from 'styled-components/macro';\n\nimport {Colors} from '../Colors';\nimport {ConfigTypeSchema, TypeData} from '../ConfigTypeSchema';\nimport {isHelpContextEqual} from '../configeditor/isHelpContextEqual';\n\nimport {ConfigEditorHelpContext} from './types/ConfigEditorHelpContext';\n\ninterface ConfigEditorHelpProps {\n  context: ConfigEditorHelpContext | null;\n  allInnerTypes: TypeData[];\n}\n\nexport const ConfigEditorHelp: React.FC<ConfigEditorHelpProps> = React.memo(\n  ({context, allInnerTypes}) => {\n    if (!context) {\n      return <Container />;\n    }\n    return (\n      <Container>\n        <ConfigScrollWrap>\n          <ConfigTypeSchema type={context.type} typesInScope={allInnerTypes} maxDepth={2} />\n        </ConfigScrollWrap>\n        <AutocompletionsNote>Use Ctrl+Space to show auto-completions inline.</AutocompletionsNote>\n      </Container>\n    );\n  },\n  (prev, next) => isHelpContextEqual(prev.context, next.context),\n);\n\nconst AutocompletionsNote = styled.div`\n  font-size: 0.75rem;\n  text-align: center;\n  padding: 4px;\n  border-top: 1px solid ${Colors.KeylineGray};\n  background: ${Colors.Gray100};\n  color: ${Colors.Gray500};\n`;\n\nconst ConfigScrollWrap = styled.div`\n  padding: 8px;\n  color: ${Colors.Dark};\n  flex: 1;\n  pointer-events: initial;\n  max-height: 100%;\n  overflow-y: auto;\n`;\n\nconst Container = styled.div`\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  background-color: ${Colors.Gray50};\n  height: 100%;\n`;\n","import {gql} from '@apollo/client';\nimport {YamlModeValidationResult} from '@dagster-io/ui';\nimport yaml from 'yaml';\n\nimport {ConfigEditorValidationFragment} from './types/ConfigEditorUtils.types';\n\nexport const CONFIG_EDITOR_RUN_CONFIG_SCHEMA_FRAGMENT = gql`\n  fragment ConfigEditorRunConfigSchemaFragment on RunConfigSchema {\n    rootConfigType {\n      key\n    }\n    allConfigTypes {\n      ...AllConfigTypesForEditor\n    }\n  }\n\n  fragment AllConfigTypesForEditor on ConfigType {\n    key\n    description\n    isSelector\n    typeParamKeys\n    ... on RegularConfigType {\n      givenName\n    }\n    ... on MapConfigType {\n      keyLabelName\n    }\n    ... on EnumConfigType {\n      givenName\n      values {\n        value\n        description\n      }\n    }\n    ... on CompositeConfigType {\n      ...CompositeConfigTypeForSchema\n    }\n    ... on ScalarUnionConfigType {\n      key\n      scalarTypeKey\n      nonScalarTypeKey\n    }\n  }\n\n  fragment CompositeConfigTypeForSchema on CompositeConfigType {\n    fields {\n      name\n      description\n      isRequired\n      configTypeKey\n      defaultValueAsJson\n    }\n  }\n`;\n\nexport const CONFIG_EDITOR_VALIDATION_FRAGMENT = gql`\n  fragment ConfigEditorValidationFragment on PipelineConfigValidationResult {\n    __typename\n    ... on RunConfigValidationInvalid {\n      errors {\n        __typename\n        reason\n        message\n        stack {\n          entries {\n            __typename\n            ... on EvaluationStackPathEntry {\n              fieldName\n            }\n            ... on EvaluationStackListItemEntry {\n              listIndex\n            }\n            ... on EvaluationStackMapKeyEntry {\n              mapKey\n            }\n            ... on EvaluationStackMapValueEntry {\n              mapKey\n            }\n          }\n        }\n      }\n    }\n  }\n`;\n\ntype StackEntry =\n  | {\n      __typename: 'EvaluationStackPathEntry';\n      fieldName: string;\n    }\n  | {\n      __typename: 'EvaluationStackListItemEntry';\n      listIndex: number;\n    }\n  | {\n      __typename: 'EvaluationStackMapKeyEntry';\n      mapKey: object;\n    }\n  | {\n      __typename: 'EvaluationStackMapValueEntry';\n      mapKey: object;\n    };\n\nexport function errorStackToYamlPath(entries: StackEntry[]) {\n  return entries.map((entry) => {\n    switch (entry.__typename) {\n      case 'EvaluationStackPathEntry':\n        return entry.fieldName;\n      case 'EvaluationStackListItemEntry':\n        return `${entry.listIndex}`;\n      case 'EvaluationStackMapKeyEntry':\n      case 'EvaluationStackMapValueEntry':\n        return `${entry.mapKey}`;\n    }\n  });\n}\n\nexport function responseToYamlValidationResult(\n  configYaml: string,\n  response: ConfigEditorValidationFragment,\n): YamlModeValidationResult {\n  if (response.__typename !== 'RunConfigValidationInvalid') {\n    return {isValid: true};\n  }\n\n  const errors = response.errors.map((err) => ({\n    message: err.message,\n    reason: err.reason,\n    path: errorStackToYamlPath(err.stack.entries),\n  }));\n\n  // Errors at the top level have no stack path because they are not within any\n  // dicts. To avoid highlighting the entire editor, associate them with the first\n  // element of the top dict.\n  const parsed = yaml.parse(configYaml);\n  const topLevelKey = Object.keys(parsed);\n  errors.forEach((error) => {\n    if (error.path.length === 0 && topLevelKey.length) {\n      error.path = [topLevelKey[0]];\n    }\n  });\n\n  return {isValid: false, errors};\n}\n","import {Button, Icon, MenuItem, Select} from '@dagster-io/ui';\nimport * as React from 'react';\n\nimport {ModeNotFoundError} from './ModeNotFoundError';\n\ninterface Mode {\n  name: string;\n}\n\ninterface ConfigEditorModePickerProps {\n  modes: Mode[];\n  modeError?: ModeNotFoundError;\n  modeName: string | null;\n  onModeChange: (mode: string) => void;\n}\n\nconst MODE_PICKER_HINT_TEXT = `To add a mode, add a ModeDefinition to the pipeline.`;\n\nexport const ConfigEditorModePicker: React.FC<ConfigEditorModePickerProps> = (props) => {\n  const resolvedMode = props.modeName\n    ? props.modes.find((m) => m.name === props.modeName)\n    : props.modes[0];\n\n  React.useEffect(() => {\n    if (resolvedMode && resolvedMode.name !== props.modeName) {\n      props.onModeChange?.(resolvedMode.name);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [resolvedMode, props.modeName]);\n\n  const singleMode = props.modes.length === 1;\n  const valid = !props.modeError;\n  const disabled = singleMode && valid;\n\n  const onItemSelect = (mode: Mode) => {\n    props.onModeChange?.(mode.name);\n  };\n\n  return (\n    <Select\n      activeItem={resolvedMode}\n      filterable={true}\n      disabled={disabled}\n      items={props.modes}\n      itemPredicate={(query, mode) => query.length === 0 || mode.name.includes(query)}\n      itemRenderer={(mode, props) => (\n        <MenuItem\n          active={props.modifiers.active}\n          key={mode.name}\n          text={mode.name}\n          onClick={props.handleClick}\n        />\n      )}\n      onItemSelect={onItemSelect}\n    >\n      <Button\n        icon={valid ? undefined : <Icon name=\"error\" />}\n        intent={valid ? 'none' : 'danger'}\n        title={disabled ? MODE_PICKER_HINT_TEXT : 'Current execution mode'}\n        disabled={disabled}\n        rightIcon={<Icon name=\"expand_more\" />}\n        data-test-id=\"mode-picker-button\"\n      >\n        {valid\n          ? resolvedMode\n            ? `Mode: ${resolvedMode.name}`\n            : 'Select Mode'\n          : 'Invalid Mode Selection'}\n      </Button>\n    </Select>\n  );\n};\n","import {gql, useQuery} from '@apollo/client';\nimport {Box, Colors, Popover} from '@dagster-io/ui';\nimport * as React from 'react';\nimport styled from 'styled-components/macro';\n\nimport {filterByQuery} from '../app/GraphQueryImpl';\nimport {PYTHON_ERROR_FRAGMENT} from '../app/PythonErrorFragment';\nimport {ShortcutHandler} from '../app/ShortcutHandler';\nimport {explodeCompositesInHandleGraph} from '../pipelines/CompositeSupport';\nimport {GRAPH_EXPLORER_SOLID_HANDLE_FRAGMENT} from '../pipelines/GraphExplorer';\nimport {GraphQueryInput} from '../ui/GraphQueryInput';\nimport {isThisThingAJob, useRepository} from '../workspace/WorkspaceContext';\nimport {repoAddressToSelector} from '../workspace/repoAddressToSelector';\nimport {RepoAddress} from '../workspace/types';\n\nimport {OpSelectorQuery, OpSelectorQueryVariables} from './types/OpSelector.types';\n\ninterface IOpSelectorProps {\n  pipelineName: string;\n  serverProvidedSubsetError?: {message: string};\n  value: string[] | null;\n  query: string | null;\n  onChange: (value: string[] | null, query: string | null) => void;\n  flattenGraphs: boolean;\n  onFlattenGraphsChange: (v: boolean) => void;\n  repoAddress: RepoAddress;\n}\n\nconst SOLID_SELECTOR_QUERY = gql`\n  query OpSelectorQuery($selector: PipelineSelector!, $requestScopeHandleID: String) {\n    pipelineOrError(params: $selector) {\n      __typename\n      ... on Pipeline {\n        id\n        name\n        solidHandles(parentHandleID: $requestScopeHandleID) {\n          handleID\n          solid {\n            name\n          }\n          ...GraphExplorerSolidHandleFragment\n        }\n      }\n      ... on PipelineNotFoundError {\n        message\n      }\n      ... on InvalidSubsetError {\n        message\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ${GRAPH_EXPLORER_SOLID_HANDLE_FRAGMENT}\n  ${PYTHON_ERROR_FRAGMENT}\n`;\n\nexport const OpSelector = (props: IOpSelectorProps) => {\n  const {\n    serverProvidedSubsetError,\n    onChange,\n    pipelineName,\n    repoAddress,\n    onFlattenGraphsChange,\n  } = props;\n  const [focused, setFocused] = React.useState(false);\n  const inputRef = React.useRef<HTMLInputElement>(null);\n\n  const flattenGraphs = props.flattenGraphs || false;\n  const selector = {...repoAddressToSelector(repoAddress), pipelineName};\n  const repo = useRepository(repoAddress);\n  const isJob = isThisThingAJob(repo, pipelineName);\n  const {data, loading} = useQuery<OpSelectorQuery, OpSelectorQueryVariables>(\n    SOLID_SELECTOR_QUERY,\n    {\n      variables: {selector, requestScopeHandleID: flattenGraphs ? undefined : ''},\n    },\n  );\n\n  const query = props.query || '*';\n\n  const opHandles =\n    data?.pipelineOrError.__typename === 'Pipeline'\n      ? flattenGraphs\n        ? explodeCompositesInHandleGraph(data.pipelineOrError.solidHandles)\n        : data.pipelineOrError.solidHandles\n      : [];\n  const ops = opHandles.map((h) => h.solid);\n  const flattenGraphsEnabled =\n    flattenGraphs || ops.some((f) => f.definition.__typename === 'CompositeSolidDefinition');\n\n  const opsFetchError =\n    (data?.pipelineOrError.__typename !== 'Pipeline' && data?.pipelineOrError.message) || null;\n\n  const queryResultOps = filterByQuery(ops, query).all;\n  const invalidOpSelection = !loading && queryResultOps.length === 0;\n\n  const errorMessage = invalidOpSelection\n    ? isJob\n      ? `You must provide a valid op query or * to execute the entire job.`\n      : `You must provide a valid solid query or * to execute the entire pipeline.`\n    : serverProvidedSubsetError\n    ? serverProvidedSubsetError.message\n    : opsFetchError;\n\n  const onTextChange = (nextQuery: string) => {\n    if (nextQuery === '') {\n      nextQuery = '*';\n    }\n    const queryResultOps = filterByQuery(ops, nextQuery).all;\n\n    // If all ops are returned, we set the subset to null rather than sending\n    // a comma separated list of evey solid to the API\n    if (queryResultOps.length === ops.length) {\n      onChange(null, nextQuery);\n    } else {\n      onChange(\n        queryResultOps.map((s) => s.name),\n        nextQuery,\n      );\n    }\n  };\n\n  if (!data?.pipelineOrError) {\n    return null;\n  }\n\n  return (\n    <Box flex={{direction: 'row', alignItems: 'center', gap: 8}}>\n      <Popover\n        isOpen={focused && !!errorMessage}\n        position=\"bottom-left\"\n        content={<PopoverErrorWrap>{errorMessage}</PopoverErrorWrap>}\n      >\n        <ShortcutHandler\n          shortcutLabel=\"S\"\n          shortcutFilter={(e) => e.code === 'KeyS' && e.altKey}\n          onShortcut={() => inputRef.current?.focus()}\n        >\n          <GraphQueryInput\n            width={(query !== '*' && query !== '') || focused || flattenGraphsEnabled ? 350 : 90}\n            intent={errorMessage ? 'danger' : 'none'}\n            items={ops}\n            ref={inputRef}\n            value={query}\n            placeholder=\"Type an op subset\"\n            onChange={onTextChange}\n            onFocus={() => setFocused(true)}\n            onBlur={() => setFocused(false)}\n            linkToPreview={{\n              repoName: repoAddress.name,\n              repoLocation: repoAddress.location,\n              pipelineName,\n              isJob,\n            }}\n            flattenGraphsEnabled={flattenGraphsEnabled}\n            flattenGraphs={flattenGraphs}\n            setFlattenGraphs={() => {\n              onFlattenGraphsChange(!flattenGraphs);\n            }}\n          />\n        </ShortcutHandler>\n      </Popover>\n    </Box>\n  );\n};\n\nconst PopoverErrorWrap = styled.div`\n  padding: 4px 8px;\n  border-radius: 2px;\n  border: 1px solid ${Colors.Red500};\n  background: ${Colors.Red200};\n  color: ${Colors.Red700};\n`;\n","import {gql} from '@apollo/client';\n// eslint-disable-next-line no-restricted-imports\nimport {Intent} from '@blueprintjs/core';\nimport {\n  Box,\n  Button,\n  ButtonLink,\n  Checkbox,\n  Colors,\n  Icon,\n  SplitPanelContainer,\n  Tag,\n  Code,\n  Tooltip,\n  FontFamily,\n} from '@dagster-io/ui';\nimport * as React from 'react';\nimport styled from 'styled-components/macro';\n\nimport {showCustomAlert} from '../app/CustomAlertProvider';\nimport {useConfirmation} from '../app/CustomConfirmationProvider';\nimport {PYTHON_ERROR_FRAGMENT} from '../app/PythonErrorFragment';\nimport {PythonErrorInfo} from '../app/PythonErrorInfo';\nimport {errorStackToYamlPath} from '../configeditor/ConfigEditorUtils';\nimport {\n  CompositeConfigTypeForSchemaFragment,\n  ConfigEditorRunConfigSchemaFragment,\n} from '../configeditor/types/ConfigEditorUtils.types';\n\nimport {LaunchpadType} from './LaunchpadRoot';\nimport {\n  RunPreviewValidationErrorsFragment,\n  RunPreviewValidationFragment,\n} from './types/RunPreview.types';\n\ntype ValidationError = RunPreviewValidationErrorsFragment;\ntype ValidationErrorOrNode = ValidationError | React.ReactNode;\n\nfunction isValidationError(e: ValidationErrorOrNode): e is ValidationError {\n  return e && typeof e === 'object' && '__typename' in e ? true : false;\n}\n\nconst stateToHint: {[key: string]: {title: string; intent: Intent}} = {\n  invalid: {\n    title: `You need to fix this configuration section.`,\n    intent: 'danger',\n  },\n  missing: {\n    title: `You need to add this configuration section.`,\n    intent: 'danger',\n  },\n  present: {\n    title: `This section is present and valid.`,\n    intent: 'none',\n  },\n  none: {title: `This section is empty and valid.`, intent: 'none'},\n};\n\nconst RemoveExtraConfigButton = ({\n  onRemoveExtraPaths,\n  extraNodes,\n  disabled,\n}: {\n  extraNodes: string[];\n  onRemoveExtraPaths: (paths: string[]) => void;\n  disabled: boolean;\n}) => {\n  const confirm = useConfirmation();\n\n  const knownKeyExtraPaths: {[key: string]: string[]} = {};\n  const otherPaths: string[] = [];\n\n  for (const path of extraNodes) {\n    const parts = path.split('.');\n\n    // If the length is 2, the first part of the path is a known key, such as \"solids\", \"resouces\",\n    // or \"loggers\", and the user has provided extra config for one of those. We will keep track of\n    // these in `knownKeyExtraPaths` just so we can display them with an extra description.\n    if (parts.length === 2) {\n      const [type, name] = parts;\n      if (!knownKeyExtraPaths[type]) {\n        knownKeyExtraPaths[type] = [];\n      }\n      knownKeyExtraPaths[type].push(name);\n    } else {\n      otherPaths.push(path);\n    }\n  }\n\n  const onClick = async () => {\n    await confirm({\n      title: 'Remove extra config',\n      description: (\n        <div>\n          <p>\n            {`You have provided extra configuration in your run config which does not conform to your\n            pipeline's config schema.`}\n          </p>\n          {Object.entries(knownKeyExtraPaths).length > 0 &&\n            Object.entries(knownKeyExtraPaths).map(([key, value]) => (\n              <React.Fragment key={key}>\n                <p>Extra {key}:</p>\n                <ul>\n                  {value.map((v) => (\n                    <li key={v}>\n                      <Code>{v}</Code>\n                    </li>\n                  ))}\n                </ul>\n              </React.Fragment>\n            ))}\n          {otherPaths.length > 0 && (\n            <>\n              <p>Other extra paths:</p>\n              <ul>\n                {otherPaths.map((v) => (\n                  <li key={v}>\n                    <Code>{v}</Code>\n                  </li>\n                ))}\n              </ul>\n            </>\n          )}\n          <p>\n            Clicking confirm will automatically remove this extra configuration from your run\n            config.\n          </p>\n        </div>\n      ),\n    });\n    onRemoveExtraPaths(extraNodes);\n  };\n\n  return (\n    <Box flex={{direction: 'row', gap: 8, alignItems: 'center'}}>\n      <Button disabled={disabled} onClick={onClick}>\n        Remove extra config\n      </Button>\n      {disabled ? (\n        <Box flex={{direction: 'row', gap: 4, alignItems: 'center'}}>\n          <Icon name=\"check_circle\" color={Colors.Green500} />\n          No extra config to remove\n        </Box>\n      ) : null}\n    </Box>\n  );\n};\n\nconst ScaffoldConfigButton = ({\n  onScaffoldMissingConfig,\n  missingNodes,\n  disabled,\n}: {\n  missingNodes: string[];\n  onScaffoldMissingConfig: () => void;\n  disabled: boolean;\n}) => {\n  const confirm = useConfirmation();\n\n  const confirmationMessage = (\n    <div>\n      {missingNodes.length > 0 && (\n        <>\n          <p>Missing paths:</p>\n          <ul>\n            {missingNodes.map((v) => (\n              <li key={v}>\n                <Code>{v}</Code>\n              </li>\n            ))}\n          </ul>\n        </>\n      )}\n      <p>\n        Clicking confirm will automatically scaffold this missing configuration into your run config\n        with default values. You will need to change the values appropriately.\n      </p>\n    </div>\n  );\n\n  const onClick = async () => {\n    await confirm({\n      title: 'Scaffold missing config',\n      description: confirmationMessage,\n    });\n    onScaffoldMissingConfig();\n  };\n\n  return (\n    <Box flex={{direction: 'row', gap: 8, alignItems: 'center'}}>\n      <Button disabled={disabled} onClick={onClick}>\n        Scaffold missing config\n      </Button>\n      {disabled ? (\n        <Box flex={{direction: 'row', gap: 4, alignItems: 'center'}}>\n          <Icon name=\"check_circle\" color={Colors.Green500} />\n          No missing config\n        </Box>\n      ) : null}\n    </Box>\n  );\n};\n\ninterface RunPreviewProps {\n  validation: RunPreviewValidationFragment | null;\n  document: any | null;\n  launchpadType: LaunchpadType;\n\n  runConfigSchema?: ConfigEditorRunConfigSchemaFragment;\n  onHighlightPath: (path: string[]) => void;\n  onRemoveExtraPaths: (paths: string[]) => void;\n  onScaffoldMissingConfig: () => void;\n  solidSelection: string[] | null;\n}\n\nexport const RunPreview: React.FC<RunPreviewProps> = (props) => {\n  const {\n    document,\n    validation,\n    onHighlightPath,\n    launchpadType,\n    onRemoveExtraPaths,\n    onScaffoldMissingConfig,\n    solidSelection,\n    runConfigSchema,\n  } = props;\n  const [errorsOnly, setErrorsOnly] = React.useState(false);\n\n  const rootCompositeChildren = React.useMemo(() => {\n    if (!runConfigSchema) {\n      return {};\n    }\n\n    const {allConfigTypes, rootConfigType} = runConfigSchema;\n    const children: {\n      [fieldName: string]: CompositeConfigTypeForSchemaFragment;\n    } = {};\n\n    const root = allConfigTypes.find((t) => t.key === rootConfigType.key);\n    if (root?.__typename !== 'CompositeConfigType') {\n      return children;\n    }\n\n    root.fields.forEach((field) => {\n      const allConfigVersion = allConfigTypes.find((t) => t.key === field.configTypeKey);\n      if (allConfigVersion?.__typename !== 'CompositeConfigType') {\n        return;\n      }\n      children[field.name] = allConfigVersion;\n    });\n\n    return children;\n  }, [runConfigSchema]);\n\n  const extraNodes: string[] = [];\n  const missingNodes: string[] = [];\n  const errorsAndPaths: {\n    pathKey: string;\n    error: ValidationErrorOrNode;\n  }[] = [];\n\n  if (validation && validation.__typename === 'RunConfigValidationInvalid') {\n    validation.errors.forEach((e) => {\n      const path = errorStackToYamlPath(e.stack.entries);\n\n      errorsAndPaths.push({pathKey: path.join('.'), error: e});\n\n      if (e.__typename === 'MissingFieldConfigError') {\n        missingNodes.push([...path, e.field.name].join('.'));\n      } else if (e.__typename === 'MissingFieldsConfigError') {\n        for (const field of e.fields) {\n          missingNodes.push([...path, field.name].join('.'));\n        }\n      } else if (e.__typename === 'FieldNotDefinedConfigError') {\n        extraNodes.push([...path, e.fieldName].join('.'));\n      } else if (e.__typename === 'FieldsNotDefinedConfigError') {\n        for (const fieldName of e.fieldNames) {\n          extraNodes.push([...path, fieldName].join('.'));\n        }\n      } else if (e.__typename === 'RuntimeMismatchConfigError') {\n        // If an entry at a path is the wrong type,\n        // it is equivalent to it being missing\n        missingNodes.push(path.join('.'));\n      }\n    });\n  }\n\n  if (validation?.__typename === 'InvalidSubsetError') {\n    errorsAndPaths.push({pathKey: '', error: validation.message});\n  }\n\n  if (validation?.__typename === 'PythonError') {\n    const info = <PythonErrorInfo error={validation} />;\n    errorsAndPaths.push({\n      pathKey: '',\n      error: (\n        <span>\n          PythonError:{' '}\n          <ButtonLink onClick={() => showCustomAlert({body: info})}>Click for details</ButtonLink>\n        </span>\n      ),\n    });\n  }\n\n  const {resources, ops, solids, ...rest} = rootCompositeChildren;\n  const hasOps = !!ops?.fields;\n\n  const itemsIn = (parents: string[], items: {name: string; isRequired: boolean}[]) => {\n    const boxes = items\n      .map((item) => {\n        // If a solid selection is in use, discard anything not in it.\n        if (solidSelection?.length && !solidSelection?.includes(item.name)) {\n          return null;\n        }\n\n        const path = [...parents, item.name];\n        const pathKey = path.join('.');\n        const pathErrors = errorsAndPaths\n          .filter((e) => e.pathKey === pathKey || e.pathKey.startsWith(`${pathKey}.`))\n          .map((e) => e.error);\n\n        const isPresent = pathExistsInObject(path, document);\n        const containsMissing = missingNodes.some((missingNode) =>\n          missingNode.includes(path.join('.')),\n        );\n        const isInvalid = pathErrors.length || containsMissing;\n        const isMissing = path.some((_, idx) =>\n          missingNodes.includes(path.slice(0, idx + 1).join('.')),\n        );\n\n        if (errorsOnly && !isInvalid) {\n          return false;\n        }\n\n        const state =\n          isMissing && item.isRequired\n            ? 'missing'\n            : isInvalid\n            ? 'invalid'\n            : isPresent\n            ? 'present'\n            : 'none';\n\n        return (\n          <Tooltip\n            position=\"bottom\"\n            content={stateToHint[state].title}\n            intent={stateToHint[state].intent}\n            key={item.name}\n          >\n            <Tag\n              key={item.name}\n              intent={stateToHint[state].intent}\n              onClick={() => {\n                const first = pathErrors.find(isValidationError);\n                onHighlightPath(first ? errorStackToYamlPath(first.stack.entries) : path);\n              }}\n            >\n              {item.name}\n            </Tag>\n          </Tooltip>\n        );\n      })\n      .filter(Boolean);\n\n    if (!boxes.length) {\n      return <ItemsEmptyNotice>Nothing to display.</ItemsEmptyNotice>;\n    }\n    return boxes;\n  };\n\n  return (\n    <SplitPanelContainer\n      identifier=\"run-preview\"\n      axis=\"horizontal\"\n      first={\n        <ErrorListContainer>\n          <Section>\n            <SectionTitle>Errors</SectionTitle>\n            {errorsAndPaths.length ? (\n              errorsAndPaths.map((item, idx) => (\n                <ErrorRow key={idx} error={item.error} onHighlight={onHighlightPath} />\n              ))\n            ) : (\n              <Box flex={{direction: 'row', gap: 4, alignItems: 'center'}}>\n                <Icon name=\"check_circle\" color={Colors.Green500} />\n                No errors\n              </Box>\n            )}\n          </Section>\n          <Section>\n            <SectionTitle>Config actions:</SectionTitle>\n            <Box flex={{direction: 'column', gap: 8}} padding={{top: 4, bottom: 20}}>\n              <ScaffoldConfigButton\n                onScaffoldMissingConfig={onScaffoldMissingConfig}\n                missingNodes={missingNodes}\n                disabled={!missingNodes.length}\n              />\n              <RemoveExtraConfigButton\n                onRemoveExtraPaths={onRemoveExtraPaths}\n                extraNodes={extraNodes}\n                disabled={!extraNodes.length}\n              />\n            </Box>\n          </Section>\n        </ErrorListContainer>\n      }\n      firstInitialPercent={50}\n      firstMinSize={150}\n      second={\n        <>\n          <div style={{overflowY: 'scroll', width: '100%', height: '100%'}}>\n            <RuntimeAndResourcesSection>\n              <Section>\n                <SectionTitle>Runtime</SectionTitle>\n                <ItemSet>\n                  {itemsIn(\n                    [],\n                    Object.keys(rest).map((name) => ({name, isRequired: false})),\n                  )}\n                </ItemSet>\n              </Section>\n              {(resources?.fields.length || 0) > 0 && (\n                <Section>\n                  <SectionTitle>Resources</SectionTitle>\n                  <ItemSet>{itemsIn(['resources'], resources?.fields || [])}</ItemSet>\n                </Section>\n              )}\n            </RuntimeAndResourcesSection>\n            <Section>\n              <SectionTitle>{launchpadType === 'asset' ? 'Assets (Ops)' : 'Ops'}</SectionTitle>\n              <ItemSet>\n                {itemsIn(\n                  [hasOps ? 'ops' : 'solids'],\n                  (hasOps ? ops?.fields : solids?.fields) || [],\n                )}\n              </ItemSet>\n            </Section>\n            <div style={{height: 50}} />\n          </div>\n          <div\n            style={{\n              position: 'absolute',\n              top: 0,\n              right: 0,\n              padding: '12px 15px 0px 10px',\n              background: 'rgba(255,255,255,0.7)',\n            }}\n          >\n            <Checkbox\n              label=\"Errors Only\"\n              checked={errorsOnly}\n              onChange={() => setErrorsOnly(!errorsOnly)}\n            />\n          </div>\n        </>\n      }\n    />\n  );\n};\n\nexport const RUN_PREVIEW_VALIDATION_FRAGMENT = gql`\n  fragment RunPreviewValidationFragment on PipelineConfigValidationResult {\n    __typename\n    ... on RunConfigValidationInvalid {\n      errors {\n        ...RunPreviewValidationErrors\n      }\n    }\n    ... on PipelineNotFoundError {\n      message\n    }\n    ... on InvalidSubsetError {\n      message\n    }\n    ...PythonErrorFragment\n  }\n\n  fragment RunPreviewValidationErrors on PipelineConfigValidationError {\n    reason\n    message\n    stack {\n      entries {\n        __typename\n        ... on EvaluationStackPathEntry {\n          fieldName\n        }\n        ... on EvaluationStackListItemEntry {\n          listIndex\n        }\n        ... on EvaluationStackMapKeyEntry {\n          mapKey\n        }\n        ... on EvaluationStackMapValueEntry {\n          mapKey\n        }\n      }\n    }\n    ... on MissingFieldConfigError {\n      field {\n        name\n      }\n    }\n    ... on MissingFieldsConfigError {\n      fields {\n        name\n      }\n    }\n    ... on FieldNotDefinedConfigError {\n      fieldName\n    }\n    ... on FieldsNotDefinedConfigError {\n      fieldNames\n    }\n  }\n\n  ${PYTHON_ERROR_FRAGMENT}\n`;\n\nconst SectionTitle = styled.div`\n  color: ${Colors.Gray400};\n  text-transform: uppercase;\n  font-size: 12px;\n  margin-bottom: 8px;\n`;\n\nconst Section = styled.div`\n  margin-top: 14px;\n  margin-left: 10px;\n`;\n\nconst ItemSet = styled.div`\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  gap: 4px;\n`;\n\nconst ItemsEmptyNotice = styled.div`\n  font-size: 13px;\n  padding-top: 7px;\n  padding-bottom: 7px;\n`;\n\nconst ErrorListContainer = styled.div`\n  margin-left: 10px;\n  overflow-y: scroll;\n  height: 100%;\n`;\n\nconst ErrorRowContainer = styled.div<{hoverable: boolean}>`\n  text-align: left;\n  font-size: 13px;\n  white-space: pre-wrap;\n  word-break: break-word;\n  font-family: ${FontFamily.monospace};\n  cursor: pointer;\n  display: flex;\n  flex-direction: row;\n  align-items: flex-start;\n  border-bottom: 1px solid #ccc;\n  padding: 8px;\n  margin: 8px 12px 0 -8px;\n  &:last-child {\n    border-bottom: 0;\n    margin-bottom: 15px;\n  }\n  ${({hoverable}) =>\n    hoverable &&\n    `&:hover {\n      background: ${Colors.Gray50};\n    }\n  `}\n`;\n\nconst RuntimeAndResourcesSection = styled.div`\n  display: flex;\n  gap: 12px;\n  @media (max-width: 800px) {\n    flex-direction: column;\n  }\n`;\n\nconst ErrorRow: React.FC<{\n  error: ValidationError | React.ReactNode;\n  onHighlight: (path: string[]) => void;\n}> = ({error, onHighlight}) => {\n  let message: React.ReactNode = null;\n  let target: ValidationError | null = null;\n  if (isValidationError(error)) {\n    message = error.message;\n    target = error;\n  } else {\n    message = error;\n  }\n\n  let displayed = message;\n  if (typeof message === 'string' && message.length > 400) {\n    displayed = truncateErrorMessage(message);\n  }\n\n  return (\n    <ErrorRowContainer\n      hoverable={!!target}\n      onClick={() => target && onHighlight(errorStackToYamlPath(target.stack.entries))}\n    >\n      <div style={{paddingRight: 4}}>\n        <Icon name=\"error\" color={Colors.Red500} />\n      </div>\n      <div>\n        {displayed}\n        {displayed !== message && (\n          <>\n            &nbsp;\n            <ButtonLink\n              onClick={() =>\n                showCustomAlert({\n                  body: <div style={{whiteSpace: 'pre-wrap'}}>{message}</div>,\n                })\n              }\n            >\n              View all\n            </ButtonLink>\n          </>\n        )}\n      </div>\n    </ErrorRowContainer>\n  );\n};\n\nfunction truncateErrorMessage(message: string) {\n  let split = message.indexOf('{');\n  if (split === -1) {\n    split = message.indexOf('. ');\n  }\n  if (split === -1) {\n    split = 400;\n  }\n  return message.substr(0, split) + '... ';\n}\n\nfunction pathExistsInObject(path: string[], object: any): boolean {\n  if (!object || typeof object !== 'object') {\n    return false;\n  }\n  if (path.length === 0) {\n    return true;\n  }\n  const [first, ...rest] = path;\n  return pathExistsInObject(rest, object[first]);\n}\n","import {assertUnreachable} from '../app/Util';\nimport {\n  AllConfigTypesForEditorFragment,\n  ConfigEditorRunConfigSchemaFragment,\n} from '../configeditor/types/ConfigEditorUtils.types';\n\nexport const scaffoldType = (\n  configTypeKey: string,\n  typeLookup: {[key: string]: AllConfigTypesForEditorFragment},\n): any => {\n  const type = typeLookup[configTypeKey];\n\n  switch (type.__typename) {\n    case 'CompositeConfigType':\n      if (type.isSelector) {\n        // Could potentially do something better here, like scaffold out\n        // all the types and let the user delete the ones they don't want.\n        return '<selector>';\n      }\n\n      const config = {};\n      for (const field of type.fields) {\n        const {name, isRequired, configTypeKey} = field;\n        if (isRequired) {\n          (config as any)[name] = scaffoldType(configTypeKey, typeLookup);\n        }\n      }\n\n      return config;\n    case 'ArrayConfigType':\n      return [];\n    case 'MapConfigType':\n      return {};\n    case 'NullableConfigType':\n      // If a type is nullable we include it in the scaffolded config anyway\n      // by using the inner type\n      const innerType = type.typeParamKeys[0];\n      return scaffoldType(innerType, typeLookup);\n    case 'EnumConfigType':\n      // Here we just join all the potential enum values with a |. The user needs to delete\n      // all the values but the ones they want to use.\n      return type.values.map((i) => i.value).join('|');\n    case 'ScalarUnionConfigType':\n      // Here we just scaffold the scalar value. Could potentially try to\n      // scaffold the other type instead.\n      const {scalarTypeKey} = type;\n      return scaffoldType(scalarTypeKey, typeLookup);\n    case 'RegularConfigType':\n      return {\n        String: '',\n        Int: 0,\n        Float: 0.0,\n        Bool: true,\n        Any: 'AnyType',\n      }[type.key];\n    default:\n      assertUnreachable(type);\n  }\n};\n\nexport const createTypeLookup = (allConfigTypes: AllConfigTypesForEditorFragment[]) => {\n  const typeLookup: {[key: string]: AllConfigTypesForEditorFragment} = {};\n  for (const type of allConfigTypes) {\n    typeLookup[type.key] = type;\n  }\n\n  return typeLookup;\n};\n\nexport const scaffoldPipelineConfig = (configSchema: ConfigEditorRunConfigSchemaFragment) => {\n  const {allConfigTypes, rootConfigType} = configSchema;\n  const typeLookup = createTypeLookup(allConfigTypes);\n  const config = scaffoldType(rootConfigType.key, typeLookup);\n  return config;\n};\n","import {gql, useApolloClient, useQuery} from '@apollo/client';\nimport {\n  Box,\n  Button,\n  Colors,\n  ConfigEditor,\n  ConfigEditorHelpContext,\n  Group,\n  Icon,\n  SecondPanelToggle,\n  SplitPanelContainer,\n  isHelpContextEqual,\n  ConfigEditorHelp,\n  TextInput,\n} from '@dagster-io/ui';\nimport merge from 'deepmerge';\nimport uniqBy from 'lodash/uniqBy';\nimport * as React from 'react';\nimport styled from 'styled-components/macro';\nimport * as yaml from 'yaml';\n\nimport {showCustomAlert} from '../app/CustomAlertProvider';\nimport {\n  IExecutionSession,\n  IExecutionSessionChanges,\n  PipelineRunTag,\n  SessionBase,\n} from '../app/ExecutionSessionStorage';\nimport {usePermissionsForLocation} from '../app/Permissions';\nimport {PythonErrorInfo} from '../app/PythonErrorInfo';\nimport {ShortcutHandler} from '../app/ShortcutHandler';\nimport {tokenForAssetKey} from '../asset-graph/Utils';\nimport {\n  CONFIG_EDITOR_RUN_CONFIG_SCHEMA_FRAGMENT,\n  CONFIG_EDITOR_VALIDATION_FRAGMENT,\n  responseToYamlValidationResult,\n} from '../configeditor/ConfigEditorUtils';\nimport {PipelineSelector, RepositorySelector} from '../graphql/types';\nimport {DagsterTag} from '../runs/RunTag';\nimport {repoAddressAsHumanString} from '../workspace/repoAddressAsString';\nimport {repoAddressToSelector} from '../workspace/repoAddressToSelector';\nimport {RepoAddress} from '../workspace/types';\n\nimport {\n  ConfigEditorConfigPicker,\n  CONFIG_PARTITION_SELECTION_QUERY,\n} from './ConfigEditorConfigPicker';\nimport {ConfigEditorModePicker} from './ConfigEditorModePicker';\nimport {useLaunchPadHooks} from './LaunchpadHooksContext';\nimport {LaunchpadType} from './LaunchpadRoot';\nimport {LoadingOverlay} from './LoadingOverlay';\nimport {OpSelector} from './OpSelector';\nimport {RunPreview, RUN_PREVIEW_VALIDATION_FRAGMENT} from './RunPreview';\nimport {SessionSettingsBar} from './SessionSettingsBar';\nimport {TagContainer, TagEditor} from './TagEditor';\nimport {scaffoldPipelineConfig} from './scaffoldType';\nimport {\n  ConfigEditorPipelinePresetFragment,\n  ConfigPartitionSelectionQuery,\n  ConfigPartitionSelectionQueryVariables,\n} from './types/ConfigEditorConfigPicker.types';\nimport {\n  LaunchpadSessionPartitionSetsFragment,\n  LaunchpadSessionPipelineFragment,\n} from './types/LaunchpadRoot.types';\nimport {\n  PipelineExecutionConfigSchemaQuery,\n  PipelineExecutionConfigSchemaQueryVariables,\n  PreviewConfigQuery,\n  PreviewConfigQueryVariables,\n} from './types/LaunchpadSession.types';\n\nconst YAML_SYNTAX_INVALID = `The YAML you provided couldn't be parsed. Please fix the syntax errors and try again.`;\nconst LOADING_CONFIG_FOR_PARTITION = `Generating configuration...`;\nconst LOADING_CONFIG_SCHEMA = `Loading config schema...`;\nconst LOADING_RUN_PREVIEW = `Checking config...`;\n\ntype Preset = ConfigEditorPipelinePresetFragment;\n\ninterface LaunchpadSessionProps {\n  session: IExecutionSession;\n  onSave: (changes: IExecutionSessionChanges) => void;\n  launchpadType: LaunchpadType;\n  pipeline: LaunchpadSessionPipelineFragment;\n  partitionSets: LaunchpadSessionPartitionSetsFragment;\n  repoAddress: RepoAddress;\n  initialExecutionSessionState?: Partial<IExecutionSession>;\n}\n\ninterface ILaunchpadSessionState {\n  preview: PreviewConfigQuery | null;\n  previewLoading: boolean;\n  previewedDocument: any | null;\n  configLoading: boolean;\n  editorHelpContext: ConfigEditorHelpContext | null;\n  tagEditorOpen: boolean;\n}\n\ntype Action =\n  | {type: 'preview-loading'; payload: boolean}\n  | {\n      type: 'set-preview';\n      payload: {\n        preview: PreviewConfigQuery | null;\n        previewLoading: boolean;\n        previewedDocument: string | null;\n      };\n    }\n  | {type: 'toggle-tag-editor'; payload: boolean}\n  | {type: 'toggle-config-loading'; payload: boolean}\n  | {type: 'set-editor-help-context'; payload: ConfigEditorHelpContext | null};\n\nconst reducer = (state: ILaunchpadSessionState, action: Action) => {\n  switch (action.type) {\n    case 'preview-loading':\n      return {...state, previewLoading: action.payload};\n    case 'set-preview': {\n      const {preview, previewedDocument, previewLoading} = action.payload;\n      return {\n        ...state,\n        preview,\n        previewedDocument,\n        previewLoading,\n      };\n    }\n    case 'toggle-tag-editor':\n      return {...state, tagEditorOpen: action.payload};\n    case 'toggle-config-loading':\n      return {...state, configLoading: action.payload};\n    case 'set-editor-help-context':\n      return {...state, editorHelpContext: action.payload};\n    default:\n      return state;\n  }\n};\n\nconst LaunchButtonContainer: React.FC<{\n  launchpadType: LaunchpadType;\n  children: React.ReactNode;\n}> = ({launchpadType, children}) => {\n  if (launchpadType === 'asset') {\n    return (\n      <Box\n        flex={{direction: 'row'}}\n        border={{side: 'top', width: 1, color: Colors.KeylineGray}}\n        padding={{right: 12, vertical: 8}}\n      >\n        <div style={{flexGrow: 1}} />\n        {children}\n      </Box>\n    );\n  } else {\n    // job\n    return <div style={{position: 'absolute', bottom: 12, right: 12, zIndex: 1}}>{children}</div>;\n  }\n};\n\nconst initialState: ILaunchpadSessionState = {\n  preview: null,\n  previewLoading: false,\n  previewedDocument: null,\n  configLoading: false,\n  editorHelpContext: null,\n  tagEditorOpen: false,\n};\n\nconst LaunchpadSession: React.FC<LaunchpadSessionProps> = (props) => {\n  const {\n    launchpadType,\n    session: currentSession,\n    onSave,\n    partitionSets,\n    pipeline,\n    repoAddress,\n  } = props;\n\n  const client = useApolloClient();\n  const [state, dispatch] = React.useReducer(reducer, initialState);\n\n  const {\n    permissions: {canLaunchPipelineExecution},\n  } = usePermissionsForLocation(repoAddress.location);\n\n  const mounted = React.useRef<boolean>(false);\n  const editor = React.useRef<ConfigEditor | null>(null);\n  const editorSplitPanelContainer = React.useRef<SplitPanelContainer | null>(null);\n  const previewCounter = React.useRef(0);\n\n  const {isJob} = pipeline;\n  const tagsFromSession = React.useMemo(() => currentSession.tags || [], [currentSession]);\n\n  const pipelineSelector: PipelineSelector = {\n    ...repoAddressToSelector(repoAddress),\n    pipelineName: pipeline.name,\n    solidSelection: currentSession.solidSelection || undefined,\n    assetSelection: currentSession.assetSelection?.map(({assetKey: {path}}) => ({path})),\n  };\n\n  const configResult = useQuery<\n    PipelineExecutionConfigSchemaQuery,\n    PipelineExecutionConfigSchemaQueryVariables\n  >(PIPELINE_EXECUTION_CONFIG_SCHEMA_QUERY, {\n    variables: {selector: pipelineSelector, mode: currentSession?.mode},\n    partialRefetch: true,\n  });\n\n  const configSchemaOrError = configResult?.data?.runConfigSchemaOrError;\n\n  React.useEffect(() => {\n    mounted.current = true;\n    return () => {\n      mounted.current = false;\n    };\n  });\n\n  const onSaveSession = (changes: IExecutionSessionChanges) => {\n    onSave(changes);\n  };\n\n  const onConfigChange = (config: any) => {\n    onSaveSession({\n      runConfigYaml: config,\n    });\n  };\n\n  const onOpSelectionChange = (\n    solidSelection: string[] | null,\n    solidSelectionQuery: string | null,\n  ) => {\n    onSaveSession({\n      solidSelection,\n      solidSelectionQuery,\n    });\n  };\n\n  const onFlattenGraphsChange = (flattenGraphs: boolean) => {\n    onSaveSession({flattenGraphs});\n  };\n\n  const onModeChange = (mode: string) => {\n    onSaveSession({mode});\n  };\n\n  const onRemoveExtraPaths = (paths: string[]) => {\n    try {\n      const runConfigData = yaml.parse(sanitizeConfigYamlString(currentSession.runConfigYaml));\n      for (const path of paths) {\n        deletePropertyPath(runConfigData, path);\n      }\n      onSaveSession({runConfigYaml: yaml.stringify(runConfigData)});\n    } catch (err) {\n      showCustomAlert({title: 'Invalid YAML', body: YAML_SYNTAX_INVALID});\n      return;\n    }\n  };\n\n  const runConfigSchema =\n    configSchemaOrError?.__typename === 'RunConfigSchema' ? configSchemaOrError : undefined;\n  const modeError =\n    configSchemaOrError?.__typename === 'ModeNotFoundError' ? configSchemaOrError : undefined;\n\n  const onScaffoldMissingConfig = () => {\n    const config = runConfigSchema ? scaffoldPipelineConfig(runConfigSchema) : {};\n    try {\n      const runConfigData = yaml.parse(sanitizeConfigYamlString(currentSession.runConfigYaml));\n      const updatedRunConfigData = merge(config, runConfigData);\n      const runConfigYaml = yaml.stringify(updatedRunConfigData);\n      onSaveSession({runConfigYaml});\n    } catch (err) {\n      showCustomAlert({title: 'Invalid YAML', body: YAML_SYNTAX_INVALID});\n    }\n  };\n\n  const buildExecutionVariables = () => {\n    if (!currentSession) {\n      return;\n    }\n\n    const configYamlOrEmpty = sanitizeConfigYamlString(currentSession.runConfigYaml);\n\n    try {\n      yaml.parse(configYamlOrEmpty);\n    } catch (err) {\n      showCustomAlert({title: 'Invalid YAML', body: YAML_SYNTAX_INVALID});\n      return;\n    }\n\n    return {\n      executionParams: {\n        runConfigData: configYamlOrEmpty,\n        selector: {\n          ...pipelineSelector,\n          assetSelection: currentSession.assetSelection\n            ? currentSession.assetSelection.map((a) => ({path: a.assetKey.path}))\n            : undefined,\n        },\n        mode: currentSession.mode || 'default',\n        executionMetadata: {\n          tags: uniqBy(\n            [\n              // pass solid selection query via tags\n              // clean up https://github.com/dagster-io/dagster/issues/2495\n              ...(currentSession.solidSelectionQuery\n                ? [\n                    {\n                      key: DagsterTag.SolidSelection,\n                      value: currentSession.solidSelectionQuery,\n                    },\n                  ]\n                : []),\n              ...(currentSession?.base && (currentSession?.base as any)['presetName']\n                ? [\n                    {\n                      key: DagsterTag.PresetName,\n                      value: (currentSession?.base as any)['presetName'],\n                    },\n                  ]\n                : []),\n\n              ...tagsFromSession.map(onlyKeyAndValue),\n\n              // note, we apply these last - uniqBy uses the first value it sees for\n              // each key, so these can be overridden in the session\n              ...pipeline.tags.map(onlyKeyAndValue),\n            ],\n            (tag) => tag.key,\n          ),\n        },\n      },\n    };\n  };\n\n  const saveTags = (tags: PipelineRunTag[]) => {\n    const tagDict = {};\n    const toSave: PipelineRunTag[] = [];\n    tags.forEach((tag: PipelineRunTag) => {\n      if (!(tag.key in tagDict)) {\n        (tagDict as any)[tag.key] = tag.value;\n        toSave.push(tag);\n      }\n    });\n    onSaveSession({tags: toSave});\n  };\n\n  const checkConfig = async (configYaml: string) => {\n    // Another request to preview a newer document may be made while this request\n    // is in flight, in which case completion of this async method should not set loading=false.\n    previewCounter.current += 1;\n    const currentPreviewCount = previewCounter.current;\n    const configYamlOrEmpty = sanitizeConfigYamlString(configYaml);\n\n    dispatch({type: 'preview-loading', payload: true});\n\n    const {data} = await client.query<PreviewConfigQuery, PreviewConfigQueryVariables>({\n      fetchPolicy: 'no-cache',\n      query: PREVIEW_CONFIG_QUERY,\n      variables: {\n        runConfigData: configYamlOrEmpty,\n        pipeline: pipelineSelector,\n        mode: currentSession.mode || 'default',\n      },\n    });\n\n    if (mounted.current) {\n      const isLatestRequest = currentPreviewCount === previewCounter.current;\n      dispatch({\n        type: 'set-preview',\n        payload: {\n          preview: data,\n          previewedDocument: configYamlOrEmpty,\n          previewLoading: isLatestRequest ? false : state.previewLoading,\n        },\n      });\n    }\n\n    return responseToYamlValidationResult(configYamlOrEmpty, data.isPipelineConfigValid);\n  };\n\n  const tagsApplyingNewBaseTags = (newBaseTags: PipelineRunTag[]) => {\n    // If you choose a new base (preset or partition), we want to make a best-effort to preserve\n    // the tags you've manually typed in, but remove:\n    // - Tags that were in your previous base and are unchanged\n    // - Tags that are specified in the new base\n    const preservedUserTags = currentSession.base\n      ? tagsFromSession.filter(\n          (t) =>\n            currentSession.base?.tags &&\n            !currentSession.base?.tags.some((bt) => bt.key === t.key && bt.value === t.value) &&\n            !newBaseTags.some((bt) => bt.key === t.key),\n        )\n      : [];\n\n    return [...newBaseTags, ...preservedUserTags];\n  };\n\n  const onSelectPreset = async (preset: Preset) => {\n    const newBaseTags = preset.tags.map(onlyKeyAndValue);\n\n    onSaveSession({\n      base: {presetName: preset.name, tags: newBaseTags},\n      name: preset.name,\n      runConfigYaml: preset.runConfigYaml || '',\n      solidSelection: preset.solidSelection,\n      solidSelectionQuery: preset.solidSelection === null ? '*' : preset.solidSelection.join(','),\n      mode: preset.mode,\n      tags: tagsApplyingNewBaseTags(newBaseTags),\n      needsRefresh: false,\n    });\n  };\n\n  const onSelectPartition = async (\n    repositorySelector: RepositorySelector,\n    partitionSetName: string,\n    partitionName: string,\n    sessionSolidSelection?: string[] | null,\n  ) => {\n    onConfigLoading();\n    try {\n      const {base} = currentSession;\n      const {data} = await client.query<\n        ConfigPartitionSelectionQuery,\n        ConfigPartitionSelectionQueryVariables\n      >({\n        query: CONFIG_PARTITION_SELECTION_QUERY,\n        variables: {repositorySelector, partitionSetName, partitionName},\n      });\n\n      if (\n        !data ||\n        !data.partitionSetOrError ||\n        data.partitionSetOrError.__typename !== 'PartitionSet' ||\n        !data.partitionSetOrError.partition\n      ) {\n        onConfigLoaded();\n        return;\n      }\n\n      const {partition} = data.partitionSetOrError;\n\n      let newBaseTags: {key: string; value: string}[] = [];\n      if (partition.tagsOrError.__typename === 'PythonError') {\n        showCustomAlert({\n          body: <PythonErrorInfo error={partition.tagsOrError} />,\n        });\n      } else {\n        newBaseTags = partition.tagsOrError.results.map(onlyKeyAndValue);\n      }\n\n      let runConfigYaml;\n      if (partition.runConfigOrError.__typename === 'PythonError') {\n        runConfigYaml = '';\n        showCustomAlert({\n          body: <PythonErrorInfo error={partition.runConfigOrError} />,\n        });\n      } else {\n        runConfigYaml = partition.runConfigOrError.yaml;\n      }\n\n      const solidSelection = sessionSolidSelection || partition.solidSelection;\n\n      onSaveSession({\n        name: partition.name,\n        base: Object.assign({}, base, {partitionName: partition.name, tags: newBaseTags}),\n        runConfigYaml,\n        solidSelection,\n        solidSelectionQuery: solidSelection === null ? '*' : solidSelection.join(','),\n        mode: partition.mode,\n        tags: tagsApplyingNewBaseTags(newBaseTags),\n        needsRefresh: false,\n      });\n    } catch {}\n    onConfigLoaded();\n  };\n\n  const onRefreshConfig = async (base: SessionBase) => {\n    // Handle preset-based configuration.\n    if ('presetName' in base) {\n      const {presetName} = base;\n      const matchingPreset = pipeline.presets.find((preset) => preset.name === presetName);\n      if (matchingPreset) {\n        onSelectPreset({\n          ...matchingPreset,\n          solidSelection: currentSession.solidSelection || matchingPreset.solidSelection,\n        });\n      }\n      return;\n    }\n\n    // Otherwise, handle partition-based configuration.\n    const {partitionName, partitionsSetName} = base;\n    const repositorySelector = repoAddressToSelector(repoAddress);\n\n    // It is expected that `partitionName` is set here, since we shouldn't be showing the\n    // button at all otherwise.\n    if (partitionName) {\n      onConfigLoading();\n      await onSelectPartition(\n        repositorySelector,\n        partitionsSetName,\n        partitionName,\n        currentSession.solidSelection,\n      );\n      onConfigLoaded();\n    }\n  };\n\n  const onDismissRefreshWarning = () => {\n    onSaveSession({needsRefresh: false});\n  };\n\n  const openTagEditor = () => dispatch({type: 'toggle-tag-editor', payload: true});\n  const closeTagEditor = () => dispatch({type: 'toggle-tag-editor', payload: false});\n\n  const onConfigLoading = () => dispatch({type: 'toggle-config-loading', payload: true});\n  const onConfigLoaded = () => dispatch({type: 'toggle-config-loading', payload: false});\n\n  const {\n    preview,\n    previewLoading,\n    previewedDocument,\n    configLoading,\n    editorHelpContext,\n    tagEditorOpen,\n  } = state;\n\n  const refreshableSessionBase = React.useMemo(() => {\n    const {base, needsRefresh} = currentSession;\n    if (\n      base &&\n      needsRefresh &&\n      ('presetName' in base || (base.partitionsSetName && base.partitionName))\n    ) {\n      return base;\n    }\n    return null;\n  }, [currentSession]);\n\n  let launchButtonTitle: string | undefined;\n  if (launchpadType === 'asset') {\n    launchButtonTitle = 'Materialize';\n  }\n\n  let launchButtonWarning: string | undefined;\n  if (\n    partitionSets.results.length &&\n    currentSession.base &&\n    'partitionsSetName' in currentSession.base &&\n    !currentSession.base.partitionName\n  ) {\n    launchButtonWarning =\n      'This job is partitioned. Are you sure you want to launch' +\n      ' a run without a partition specified?';\n  }\n\n  const {LaunchRootExecutionButton} = useLaunchPadHooks();\n\n  return (\n    <>\n      <SplitPanelContainer\n        axis=\"vertical\"\n        identifier=\"execution\"\n        firstMinSize={100}\n        firstInitialPercent={75}\n        first={\n          <>\n            <LoadingOverlay isLoading={configLoading} message={LOADING_CONFIG_FOR_PARTITION} />\n            <SessionSettingsBar>\n              <ConfigEditorConfigPicker\n                pipeline={pipeline}\n                partitionSets={partitionSets.results}\n                base={currentSession.base}\n                onSaveSession={onSaveSession}\n                onSelectPreset={onSelectPreset}\n                onSelectPartition={onSelectPartition}\n                repoAddress={repoAddress}\n                assetSelection={currentSession.assetSelection}\n              />\n              <SessionSettingsSpacer />\n              {launchpadType === 'asset' ? (\n                <TextInput\n                  readOnly\n                  value={\n                    currentSession.assetSelection\n                      ? currentSession.assetSelection\n                          .map((a) => tokenForAssetKey(a.assetKey))\n                          .join(', ')\n                      : '*'\n                  }\n                />\n              ) : (\n                <OpSelector\n                  serverProvidedSubsetError={\n                    preview?.isPipelineConfigValid.__typename === 'InvalidSubsetError'\n                      ? preview.isPipelineConfigValid\n                      : undefined\n                  }\n                  pipelineName={pipeline.name}\n                  value={currentSession.solidSelection || null}\n                  query={currentSession.solidSelectionQuery || null}\n                  onChange={onOpSelectionChange}\n                  flattenGraphs={currentSession.flattenGraphs}\n                  onFlattenGraphsChange={onFlattenGraphsChange}\n                  repoAddress={repoAddress}\n                />\n              )}\n\n              {isJob ? (\n                <span />\n              ) : (\n                <>\n                  <SessionSettingsSpacer />\n                  <ConfigEditorModePicker\n                    modes={pipeline.modes}\n                    modeError={modeError}\n                    onModeChange={onModeChange}\n                    modeName={currentSession.mode}\n                  />\n                </>\n              )}\n              <TagEditor\n                tagsFromDefinition={pipeline.tags}\n                tagsFromSession={tagsFromSession}\n                onChange={saveTags}\n                open={tagEditorOpen}\n                onRequestClose={closeTagEditor}\n              />\n              <div style={{flex: 1}} />\n              <ShortcutHandler\n                shortcutLabel=\"T\"\n                shortcutFilter={(e) => e.code === 'KeyT' && e.altKey}\n                onShortcut={openTagEditor}\n              >\n                <Button onClick={openTagEditor} icon={<Icon name=\"edit\" />}>\n                  Edit tags\n                </Button>\n              </ShortcutHandler>\n              <SessionSettingsSpacer />\n              <SecondPanelToggle axis=\"horizontal\" container={editorSplitPanelContainer} />\n            </SessionSettingsBar>\n            {pipeline.tags.length || tagsFromSession.length ? (\n              <Box\n                padding={{vertical: 8, left: 12, right: 0}}\n                border={{side: 'bottom', width: 1, color: Colors.Gray200}}\n              >\n                <TagContainer\n                  tagsFromDefinition={pipeline.tags}\n                  tagsFromSession={tagsFromSession}\n                  onRequestEdit={openTagEditor}\n                />\n              </Box>\n            ) : null}\n            {refreshableSessionBase ? (\n              <Box\n                padding={{vertical: 8, horizontal: 12}}\n                border={{side: 'bottom', width: 1, color: Colors.Gray200}}\n              >\n                <Group direction=\"row\" spacing={8} alignItems=\"center\">\n                  <Icon name=\"warning\" color={Colors.Yellow500} />\n                  <div>\n                    {repoAddressAsHumanString(repoAddress)} has been manually refreshed, and this\n                    configuration may now be out of date.\n                  </div>\n                  <Button\n                    intent=\"primary\"\n                    onClick={() => onRefreshConfig(refreshableSessionBase)}\n                    disabled={state.configLoading}\n                  >\n                    Refresh config\n                  </Button>\n                  <Button onClick={onDismissRefreshWarning}>Dismiss</Button>\n                </Group>\n              </Box>\n            ) : null}\n            <SplitPanelContainer\n              ref={editorSplitPanelContainer}\n              axis=\"horizontal\"\n              identifier=\"execution-editor\"\n              firstMinSize={100}\n              firstInitialPercent={70}\n              first={\n                <ConfigEditor\n                  ref={editor}\n                  readOnly={false}\n                  configSchema={runConfigSchema}\n                  configCode={currentSession.runConfigYaml}\n                  onConfigChange={onConfigChange}\n                  onHelpContextChange={(next) => {\n                    if (!isHelpContextEqual(editorHelpContext, next)) {\n                      dispatch({type: 'set-editor-help-context', payload: next});\n                    }\n                  }}\n                  checkConfig={checkConfig}\n                />\n              }\n              second={\n                <ConfigEditorHelp\n                  context={editorHelpContext}\n                  allInnerTypes={runConfigSchema?.allConfigTypes || []}\n                />\n              }\n            />\n          </>\n        }\n        second={\n          <>\n            <LoadingOverlay\n              isLoading={previewLoading}\n              message={!runConfigSchema ? LOADING_CONFIG_SCHEMA : LOADING_RUN_PREVIEW}\n            />\n            <RunPreview\n              launchpadType={launchpadType}\n              document={previewedDocument}\n              validation={preview ? preview.isPipelineConfigValid : null}\n              solidSelection={currentSession.solidSelection}\n              runConfigSchema={runConfigSchema}\n              onHighlightPath={(path) => editor.current?.moveCursorToPath(path)}\n              onRemoveExtraPaths={(paths) => onRemoveExtraPaths(paths)}\n              onScaffoldMissingConfig={onScaffoldMissingConfig}\n            />\n          </>\n        }\n      />\n\n      <LaunchButtonContainer launchpadType={launchpadType}>\n        <LaunchRootExecutionButton\n          title={launchButtonTitle}\n          warning={launchButtonWarning}\n          hasLaunchPermission={canLaunchPipelineExecution}\n          pipelineName={pipeline.name}\n          getVariables={buildExecutionVariables}\n          disabled={preview?.isPipelineConfigValid?.__typename !== 'PipelineConfigValidationValid'}\n          behavior=\"open\"\n        />\n      </LaunchButtonContainer>\n    </>\n  );\n};\n\n// Imported via React.lazy, which requires a default export.\n// eslint-disable-next-line import/no-default-export\nexport default LaunchpadSession;\n\n// This helper removes __typename, which prevents tags from being passed back to GraphQL\nconst onlyKeyAndValue = ({key, value}: {key: string; value: string}) => ({key, value});\n\nconst deletePropertyPath = (obj: any, path: string) => {\n  const parts = path.split('.');\n\n  // Here we iterate through the parts of the path to get to\n  // the second to last nested object. This is so we can call `delete` using\n  // this object and the last part of the path.\n  for (let i = 0; i < parts.length - 1; i++) {\n    obj = obj[parts[i]];\n    if (typeof obj === 'undefined') {\n      return;\n    }\n  }\n\n  const lastKey = parts.pop();\n  if (lastKey) {\n    delete obj[lastKey];\n  }\n};\n\nconst sanitizeConfigYamlString = (yamlString: string) => (yamlString || '').trim() || '{}';\n\nconst PREVIEW_CONFIG_QUERY = gql`\n  query PreviewConfigQuery(\n    $pipeline: PipelineSelector!\n    $runConfigData: RunConfigData!\n    $mode: String!\n  ) {\n    isPipelineConfigValid(pipeline: $pipeline, runConfigData: $runConfigData, mode: $mode) {\n      ...ConfigEditorValidationFragment\n      ...RunPreviewValidationFragment\n    }\n  }\n\n  ${CONFIG_EDITOR_VALIDATION_FRAGMENT}\n  ${RUN_PREVIEW_VALIDATION_FRAGMENT}\n`;\n\nconst SessionSettingsSpacer = styled.div`\n  width: 5px;\n`;\n\nconst PIPELINE_EXECUTION_CONFIG_SCHEMA_QUERY = gql`\n  query PipelineExecutionConfigSchemaQuery($selector: PipelineSelector!, $mode: String) {\n    runConfigSchemaOrError(selector: $selector, mode: $mode) {\n      ...LaunchpadSessionRunConfigSchemaFragment\n    }\n  }\n\n  fragment LaunchpadSessionRunConfigSchemaFragment on RunConfigSchemaOrError {\n    __typename\n    ... on RunConfigSchema {\n      ...ConfigEditorRunConfigSchemaFragment\n    }\n    ... on ModeNotFoundError {\n      ...LaunchpadSessionModeNotFound\n    }\n  }\n\n  fragment LaunchpadSessionModeNotFound on ModeNotFoundError {\n    message\n  }\n\n  ${CONFIG_EDITOR_RUN_CONFIG_SCHEMA_FRAGMENT}\n`;\n","import {NonIdealState, NonIdealStateProps, Spinner, SplitPanelContainer} from '@dagster-io/ui';\nimport * as React from 'react';\n\nimport {SessionSettingsBar} from './SessionSettingsBar';\n\nexport const LaunchpadSessionError: React.FC<NonIdealStateProps> = (props) => (\n  <SplitPanelContainer\n    axis=\"vertical\"\n    identifier=\"execution\"\n    firstInitialPercent={75}\n    firstMinSize={100}\n    first={\n      <>\n        <SessionSettingsBar>\n          <Spinner purpose=\"section\" />\n        </SessionSettingsBar>\n        <NonIdealState {...props} />\n      </>\n    }\n    second={<div />}\n  />\n);\n","import {SplitPanelContainer} from '@dagster-io/ui';\nimport * as React from 'react';\n\nimport {LoadingOverlay} from './LoadingOverlay';\nimport {SessionSettingsBar} from './SessionSettingsBar';\n\nconst LOADING_PIPELINE = `Loading pipeline and partition sets...`;\n\nexport const LaunchpadSessionLoading = () => (\n  <SplitPanelContainer\n    axis=\"vertical\"\n    identifier=\"execution\"\n    firstInitialPercent={75}\n    firstMinSize={100}\n    first={\n      <>\n        <LoadingOverlay isLoading message={LOADING_PIPELINE} />\n        <SessionSettingsBar />\n      </>\n    }\n    second={<LoadingOverlay isLoading message=\"Loading pipeline and partition sets...\" />}\n  />\n);\n","import {Group, Spinner} from '@dagster-io/ui';\nimport * as React from 'react';\nimport styled from 'styled-components/macro';\n\nexport const LoadingOverlay: React.FC<{\n  isLoading: boolean;\n  message: string;\n}> = ({isLoading, message}) => (\n  <LoadingOverlayContainer isLoading={isLoading}>\n    <Group direction=\"row\" spacing={8} alignItems=\"center\">\n      <Spinner purpose=\"body-text\" />\n      <div>{message}</div>\n    </Group>\n  </LoadingOverlayContainer>\n);\n\nconst LoadingOverlayContainer = styled.div<{isLoading: boolean}>`\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  background-color: #fff;\n  z-index: 20;\n  display: ${({isLoading}) => (!isLoading ? 'none' : 'flex')};\n  align-items: center;\n  justify-content: center;\n  opacity: ${({isLoading}) => (isLoading ? '0.7' : '0')};\n  transition: opacity 150ms linear;\n  transition-delay: 300ms;\n`;\n","import {Colors} from '@dagster-io/ui';\nimport styled from 'styled-components/macro';\n\nexport const SessionSettingsBar = styled.div`\n  color: white;\n  display: flex;\n  position: relative;\n  border-bottom: 1px solid ${Colors.Gray200};\n  background: ${Colors.White};\n  align-items: center;\n  height: 47px;\n  padding: 8px 10px;\n`;\n","import {\n  Box,\n  Button,\n  DialogBody,\n  DialogFooter,\n  Dialog,\n  Group,\n  Icon,\n  TextInput,\n  Tooltip,\n} from '@dagster-io/ui';\nimport * as React from 'react';\nimport styled from 'styled-components/macro';\n\nimport {PipelineRunTag} from '../app/ExecutionSessionStorage';\nimport {ShortcutHandler} from '../app/ShortcutHandler';\nimport {RunTag, TagAction} from '../runs/RunTag';\n\ninterface ITagEditorProps {\n  tagsFromDefinition?: PipelineRunTag[];\n  tagsFromSession: PipelineRunTag[];\n  open: boolean;\n  onChange: (tags: PipelineRunTag[]) => void;\n  onRequestClose: () => void;\n}\n\ninterface ITagContainerProps {\n  tagsFromDefinition?: PipelineRunTag[];\n  tagsFromSession: PipelineRunTag[];\n  onRequestEdit: () => void;\n  actions?: TagAction[];\n}\n\nexport const TagEditor: React.FC<ITagEditorProps> = ({\n  tagsFromDefinition = [],\n  tagsFromSession = [],\n  open,\n  onChange,\n  onRequestClose,\n}) => {\n  const [editState, setEditState] = React.useState(() =>\n    tagsFromSession.length ? tagsFromSession : [{key: '', value: ''}],\n  );\n\n  // Reset the edit state when you close and re-open the modal, or when\n  // tagsFromSession change while the modal is closed.\n  React.useEffect(() => {\n    if (!open) {\n      setEditState(tagsFromSession.length ? tagsFromSession : [{key: '', value: ''}]);\n    }\n  }, [tagsFromSession, open]);\n\n  const toSave: PipelineRunTag[] = editState\n    .map((tag: PipelineRunTag) => ({\n      key: tag.key.trim(),\n      value: tag.value.trim(),\n    }))\n    .filter((tag) => tag.key && tag.value);\n  const toError = editState\n    .map((tag: PipelineRunTag) => ({\n      key: tag.key.trim(),\n      value: tag.value.trim(),\n    }))\n    .filter((tag) => !tag.key !== !tag.value);\n\n  const onSave = () => {\n    if (!toError.length) {\n      onChange(toSave);\n      onRequestClose();\n    }\n  };\n\n  const disabled = editState === tagsFromSession || !!toError.length;\n\n  const onTagEdit = (key: string, value: string, idx: number) => {\n    setEditState((current) => [...current.slice(0, idx), {key, value}, ...current.slice(idx + 1)]);\n  };\n\n  const onRemove = (idx: number) => {\n    setEditState((current) => {\n      if (idx === 0 && current.length === 1) {\n        // If we're deleting the only item, just wipe it out.\n        return [{key: '', value: ''}];\n      }\n      return [...current.slice(0, idx), ...current.slice(idx + 1)];\n    });\n  };\n\n  const addTagEntry = () => {\n    setEditState((current) => [...current, {key: '', value: ''}]);\n  };\n\n  return (\n    <Dialog\n      icon=\"info\"\n      onClose={onRequestClose}\n      style={{minWidth: 700}}\n      title=\"Add tags to run\"\n      isOpen={open}\n    >\n      <DialogBody>\n        <Group spacing={16} direction=\"column\">\n          {tagsFromDefinition.length ? (\n            <Group direction=\"column\" spacing={8}>\n              <Box margin={{left: 2}} style={{fontSize: '13px', fontWeight: 500}}>\n                Tags from definition:\n              </Box>\n              <TagList>\n                {tagsFromDefinition.map((tag, idx) => {\n                  const {key} = tag;\n                  const anyOverride = editState.some((editable) => editable.key === key);\n                  if (anyOverride) {\n                    return (\n                      <Tooltip key={key} content=\"Overriden by custom tag value\" placement=\"top\">\n                        <span style={{opacity: 0.2}}>\n                          <RunTag tag={tag} key={idx} />\n                        </span>\n                      </Tooltip>\n                    );\n                  }\n                  return <RunTag tag={tag} key={key} />;\n                })}\n              </TagList>\n            </Group>\n          ) : null}\n          <Box flex={{direction: 'column', gap: 12}}>\n            <div>Custom tags:</div>\n            <Box flex={{direction: 'column', gap: 8}}>\n              {editState.map((tag, idx) => {\n                const {key, value} = tag;\n                return (\n                  <div\n                    key={idx}\n                    style={{\n                      display: 'flex',\n                      flexDirection: 'row',\n                      gap: 8,\n                    }}\n                  >\n                    <TextInput\n                      placeholder=\"Tag Key\"\n                      value={key}\n                      onChange={(e) => onTagEdit(e.target.value, value, idx)}\n                    />\n                    <TextInput\n                      placeholder=\"Tag Value\"\n                      value={value}\n                      onChange={(e) => onTagEdit(key, e.target.value, idx)}\n                    />\n                    <Button\n                      disabled={editState.length === 1 && !key.trim() && !value.trim()}\n                      onClick={() => onRemove(idx)}\n                      icon={<Icon name=\"delete\" />}\n                    >\n                      Remove\n                    </Button>\n                  </div>\n                );\n              })}\n            </Box>\n            <Box margin={{left: 2}} flex={{direction: 'row'}}>\n              <Button onClick={addTagEntry} icon={<Icon name=\"add_circle\" />}>\n                Add custom tag\n              </Button>\n            </Box>\n          </Box>\n        </Group>\n      </DialogBody>\n      <DialogFooter>\n        <Button onClick={onRequestClose}>Cancel</Button>\n        <ShortcutHandler\n          shortcutLabel=\"Enter\"\n          shortcutFilter={(e) => e.code === 'Enter' && e.altKey}\n          onShortcut={onSave}\n        >\n          <Button intent=\"primary\" onClick={onSave} disabled={disabled}>\n            Apply\n          </Button>\n        </ShortcutHandler>\n      </DialogFooter>\n    </Dialog>\n  );\n};\n\nexport const TagContainer = ({\n  tagsFromSession,\n  tagsFromDefinition,\n  actions,\n}: ITagContainerProps) => {\n  return (\n    <Container>\n      <TagList>\n        {tagsFromDefinition\n          ? tagsFromDefinition.map((tag, idx) => {\n              const {key} = tag;\n              const anyOverride = tagsFromSession.some((sessionTag) => sessionTag.key === key);\n              if (anyOverride) {\n                return (\n                  <Tooltip key={key} content=\"Overriden by custom tag value\" placement=\"top\">\n                    <span style={{opacity: 0.2}}>\n                      <RunTag tag={tag} key={idx} actions={actions} />\n                    </span>\n                  </Tooltip>\n                );\n              }\n              return <RunTag tag={tag} key={idx} actions={actions} />;\n            })\n          : undefined}\n        {tagsFromSession.map((tag, idx) => (\n          <RunTag tag={tag} key={idx} actions={actions} />\n        ))}\n      </TagList>\n    </Container>\n  );\n};\n\nconst Container = styled.div`\n  align-items: flex-start;\n  display: flex;\n  flex-direction: row;\n`;\n\nconst TagList = styled.div`\n  display: flex;\n  flex: 1;\n  flex-wrap: wrap;\n  gap: 4px;\n`;\n","import {gql, useMutation} from '@apollo/client';\nimport {\n  Box,\n  Button,\n  Colors,\n  Dialog,\n  DialogBody,\n  DialogFooter,\n  Icon,\n  Mono,\n  Spinner,\n  TextInput,\n  Tooltip,\n} from '@dagster-io/ui';\nimport * as React from 'react';\nimport styled from 'styled-components/macro';\n\nimport {showCustomAlert} from '../app/CustomAlertProvider';\nimport {PythonErrorInfo} from '../app/PythonErrorInfo';\nimport {invalidatePartitions} from '../assets/PartitionSubscribers';\nimport {testId} from '../testing/testId';\nimport {repoAddressToSelector} from '../workspace/repoAddressToSelector';\nimport {RepoAddress} from '../workspace/types';\n\nimport {\n  AddDynamicPartitionMutation,\n  AddDynamicPartitionMutationVariables,\n} from './types/CreatePartitionDialog.types';\n\n// Keep in sync with the backend which currently has 2 definitions:\n// INVALID_PARTITION_SUBSTRINGS and INVALID_STATIC_PARTITIONS_KEY_CHARACTERS\n// https://github.com/dagster-io/dagster/blob/b32508036370678ad0bbc0f117f138fa29b0c33d/python_modules/dagster/dagster/_core/definitions/multi_dimensional_partitions.py#L39\n// https://github.com/dagster-io/dagster/blob/b32508036370678ad0bbc0f117f138fa29b0c33d/python_modules/dagster/dagster/_core/definitions/partition.py#L92\nconst INVALID_PARITION_SUBSTRINGS = [\n  '...',\n  '\\x07', // bell or \\a on the backend.\n  '\\b',\n  '\\f',\n  '\\n',\n  '\\r',\n  '\\t',\n  '\\v',\n  '\\0',\n  '|',\n  ',',\n  '[',\n  ']',\n  ' ',\n];\n\nconst INVALID_PARTITION_SUBSTRINGS_READABLE = [\n  '...',\n  '\\\\a',\n  '\\\\b',\n  '\\\\f',\n  '\\\\n',\n  '\\\\r',\n  '\\\\t',\n  '\\\\v',\n  '\\\\0',\n  '|',\n  '\",\"',\n  '[',\n  ']',\n  '\" \"',\n];\n\nexport const CreatePartitionDialog = ({\n  isOpen,\n  partitionDefinitionName,\n  close,\n  repoAddress,\n  refetch,\n  onCreated,\n}: {\n  isOpen: boolean;\n  partitionDefinitionName?: string | null;\n  close: () => void;\n  repoAddress: RepoAddress;\n  refetch?: () => Promise<void>;\n  onCreated: (partitionName: string) => void;\n}) => {\n  const [partitionName, setPartitionName] = React.useState('');\n\n  const [createPartition] = useMutation<\n    AddDynamicPartitionMutation,\n    AddDynamicPartitionMutationVariables\n  >(CREATE_PARTITION_MUTATION);\n\n  const [isSaving, setIsSaving] = React.useState(false);\n\n  const isValidPartitionName = React.useMemo(() => {\n    return (\n      partitionName.length === 0 ||\n      !INVALID_PARITION_SUBSTRINGS.some((s) => partitionName.includes(s))\n    );\n  }, [partitionName]);\n\n  const error = isValidPartitionName ? null : (\n    <span data-testid={testId('warning-icon')}>\n      <Tooltip\n        content={\n          <div>\n            The following substrings are not allowed:{' '}\n            <Mono>[{INVALID_PARTITION_SUBSTRINGS_READABLE.join(',')}]</Mono>\n          </div>\n        }\n        placement=\"top\"\n      >\n        <Icon name=\"warning\" />\n      </Tooltip>\n    </span>\n  );\n\n  const handleSave = async () => {\n    if (!isValidPartitionName) {\n      return;\n    }\n    setIsSaving(true);\n    const result = await createPartition({\n      variables: {\n        repositorySelector: repoAddressToSelector(repoAddress),\n        partitionsDefName: partitionDefinitionName || '',\n        partitionKey: partitionName,\n      },\n\n      // Add any queries that reference asset partitions here so that they update if they're currently rendered.\n      refetchQueries: ['PartitionHealthQuery', 'AssetEventsQuery'],\n    });\n    setIsSaving(false);\n\n    const data = result.data?.addDynamicPartition;\n    switch (data?.__typename) {\n      case 'PythonError': {\n        showCustomAlert({\n          title: 'Could not create environment variable',\n          body: <PythonErrorInfo error={data} />,\n        });\n        break;\n      }\n      case 'DuplicateDynamicPartitionError': {\n        showCustomAlert({\n          title: 'Could not add partition',\n          body: 'A partition this name already exists.',\n        });\n        break;\n      }\n      case 'UnauthorizedError': {\n        showCustomAlert({\n          title: 'Could not add partition',\n          body: data.message ?? 'You do not have permission to do this.',\n        });\n        break;\n      }\n      case 'AddDynamicPartitionSuccess': {\n        refetch?.();\n        onCreated(partitionName);\n        close();\n        invalidatePartitions();\n        break;\n      }\n      default: {\n        showCustomAlert({\n          title: 'Could not add partition',\n          body: 'An unknown error occurred.',\n        });\n        break;\n      }\n    }\n  };\n  return (\n    <Dialog\n      isOpen={isOpen}\n      canEscapeKeyClose\n      canOutsideClickClose\n      title={\n        <Box flex={{direction: 'row', gap: 8, alignItems: 'center'}}>\n          <Icon name=\"add_circle\" size={24} />\n          <div>\n            Add a partition\n            {partitionDefinitionName ? (\n              <>\n                {' '}\n                for <Mono>{partitionDefinitionName}</Mono>\n              </>\n            ) : (\n              ''\n            )}\n          </div>\n        </Box>\n      }\n    >\n      <DialogBody>\n        <Box flex={{direction: 'column', gap: 6}}>\n          <div>Partition name</div>\n          <PartitionBox>\n            <TextInput\n              data-testid={testId('partition-input')}\n              rightElement={error ?? (isSaving ? <Spinner purpose=\"body-text\" /> : undefined)}\n              disabled={isSaving}\n              placeholder=\"name\"\n              value={partitionName}\n              onChange={(e) => setPartitionName(e.target.value)}\n              onKeyPress={(e) => {\n                if (e.code === 'Enter') {\n                  handleSave();\n                }\n              }}\n              strokeColor={isValidPartitionName ? undefined : Colors.Red500}\n              ref={React.useCallback((inputElement: HTMLInputElement) => {\n                if (inputElement) {\n                  inputElement.focus();\n                }\n              }, [])}\n            />\n          </PartitionBox>\n        </Box>\n      </DialogBody>\n      <DialogFooter>\n        <Button onClick={close}>Cancel</Button>\n        <Button\n          intent=\"primary\"\n          onClick={handleSave}\n          disabled={!isValidPartitionName}\n          data-testid={testId('save-partition-button')}\n        >\n          Save\n        </Button>\n      </DialogFooter>\n    </Dialog>\n  );\n};\n\nexport const CREATE_PARTITION_MUTATION = gql`\n  mutation AddDynamicPartitionMutation(\n    $partitionsDefName: String!\n    $partitionKey: String!\n    $repositorySelector: RepositorySelector!\n  ) {\n    addDynamicPartition(\n      partitionsDefName: $partitionsDefName\n      partitionKey: $partitionKey\n      repositorySelector: $repositorySelector\n    ) {\n      __typename\n      ... on AddDynamicPartitionSuccess {\n        partitionsDefName\n        partitionKey\n      }\n      ... on PythonError {\n        message\n        stack\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n`;\n\nconst PartitionBox = styled.div`\n  display: flex;\n  flex-direction: row;\n  gap: 8;\n  align-items: center;\n  > *:first-child {\n    flex-grow: 1;\n  }\n`;\n","import React from 'react';\nimport {List} from 'react-virtualized';\nimport styled from 'styled-components/macro';\n\nimport {Box} from './Box';\nimport {Checkbox} from './Checkbox';\nimport {Colors} from './Colors';\nimport {Icon} from './Icon';\nimport {MenuItem, Menu} from './Menu';\nimport {Popover} from './Popover';\nimport {Tag} from './Tag';\nimport {TextInput, TextInputStyles} from './TextInput';\nimport {useViewport} from './useViewport';\n\nexport type TagSelectorTagProps = {\n  remove: (ev: React.SyntheticEvent<HTMLDivElement>) => void;\n};\nexport type TagSelectorDropdownItemProps = {\n  toggle: () => void;\n  selected: boolean;\n};\nexport type TagSelectorDropdownProps = {\n  width: string;\n  allTags: string[];\n};\ntype Props = {\n  placeholder?: React.ReactNode;\n  allTags: string[];\n  selectedTags: string[];\n  setSelectedTags: (tags: string[]) => void;\n  renderTag?: (tag: string, tagProps: TagSelectorTagProps) => React.ReactNode;\n  renderTagList?: (tags: React.ReactNode[]) => React.ReactNode;\n  renderDropdown?: (\n    dropdown: React.ReactNode,\n    dropdownProps: TagSelectorDropdownProps,\n  ) => React.ReactNode;\n  renderDropdownItem?: (\n    tag: string,\n    dropdownItemProps: TagSelectorDropdownItemProps,\n  ) => React.ReactNode;\n  dropdownStyles?: React.CSSProperties;\n  rowWidth?: number;\n  rowHeight?: number;\n};\n\nconst defaultRenderTag = (tag: string, tagProps: TagSelectorTagProps) => {\n  return (\n    <Tag key={tag}>\n      <Box flex={{direction: 'row', gap: 4, justifyContent: 'space-between', alignItems: 'center'}}>\n        <span>{tag}</span>\n        <Box style={{cursor: 'pointer'}} onClick={tagProps.remove}>\n          <Icon name=\"close\" />\n        </Box>\n      </Box>\n    </Tag>\n  );\n};\n\nconst defaultRenderDropdownItem = (\n  tag: string,\n  dropdownItemProps: TagSelectorDropdownItemProps,\n) => {\n  return (\n    <label>\n      <MenuItem\n        text={\n          <Box flex={{alignItems: 'center', gap: 8}}>\n            <Checkbox checked={dropdownItemProps.selected} onChange={dropdownItemProps.toggle} />\n            <span>{tag}</span>\n          </Box>\n        }\n        tagName=\"div\"\n      />\n    </label>\n  );\n};\n\nconst MENU_ITEM_HEIGHT = 32;\n\nexport const TagSelector = ({\n  allTags,\n  placeholder,\n  selectedTags,\n  setSelectedTags,\n  renderTag,\n  renderDropdownItem,\n  renderDropdown,\n  dropdownStyles,\n  renderTagList,\n  rowHeight = MENU_ITEM_HEIGHT,\n}: Props) => {\n  const [isDropdownOpen, setIsDropdownOpen] = React.useState(false);\n  const {viewport, containerProps} = useViewport();\n\n  const dropdown = React.useMemo(() => {\n    const dropdownContent = (\n      <Box\n        style={{\n          maxHeight: '500px',\n          overflowY: 'auto',\n          ...dropdownStyles,\n        }}\n      >\n        <List\n          style={{outline: 'none', marginRight: -5, paddingRight: 5}}\n          rowCount={allTags.length}\n          rowHeight={rowHeight}\n          rowRenderer={(a) => {\n            const tag = allTags[a.index]!;\n            const selected = selectedTags.includes(tag);\n            const toggle = () => {\n              setSelectedTags(\n                selected ? selectedTags.filter((t) => t !== tag) : [...selectedTags, tag],\n              );\n            };\n            if (renderDropdownItem) {\n              return <div key={tag}>{renderDropdownItem(tag, {toggle, selected})}</div>;\n            }\n            return defaultRenderDropdownItem(tag, {toggle, selected});\n          }}\n          width={viewport.width}\n          height={Math.min(allTags.length * rowHeight, rowHeight * 7.5)}\n        />\n      </Box>\n    );\n    if (renderDropdown) {\n      return renderDropdown(dropdownContent, {width: viewport.width + 'px', allTags});\n    }\n    return <Menu style={{width: viewport.width + 'px'}}>{dropdownContent}</Menu>;\n  }, [\n    allTags,\n    dropdownStyles,\n    renderDropdown,\n    renderDropdownItem,\n    rowHeight,\n    selectedTags,\n    setSelectedTags,\n    viewport.width,\n  ]);\n\n  const dropdownContainer = React.useRef<HTMLDivElement>(null);\n\n  const tagsContent = React.useMemo(() => {\n    if (selectedTags.length === 0) {\n      return <Placeholder>{placeholder || 'Select tags'}</Placeholder>;\n    }\n    const tags = selectedTags.map((tag) =>\n      (renderTag || defaultRenderTag)(tag, {\n        remove: (ev) => {\n          setSelectedTags(selectedTags.filter((t) => t !== tag));\n          ev.stopPropagation();\n        },\n      }),\n    );\n    if (renderTagList) {\n      return renderTagList(tags);\n    }\n    return tags;\n  }, [selectedTags, renderTagList, placeholder, renderTag, setSelectedTags]);\n\n  return (\n    <Popover\n      placement=\"bottom-start\"\n      isOpen={isDropdownOpen}\n      onInteraction={(nextOpenState, e) => {\n        const target = e?.target;\n        if (isDropdownOpen && target instanceof HTMLElement) {\n          const isClickInside = dropdownContainer.current?.contains(target);\n          if (!isClickInside) {\n            setIsDropdownOpen(nextOpenState);\n          }\n        }\n      }}\n      content={<div ref={dropdownContainer}>{dropdown}</div>}\n      targetTagName=\"div\"\n    >\n      <Container\n        onClick={() => {\n          setIsDropdownOpen((isOpen) => !isOpen);\n        }}\n        {...containerProps}\n      >\n        <TagsContainer flex={{grow: 1, gap: 6}}>{tagsContent}</TagsContainer>\n        <div style={{cursor: 'pointer'}}>\n          <Icon name={isDropdownOpen ? 'expand_less' : 'expand_more'} />\n        </div>\n      </Container>\n    </Popover>\n  );\n};\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n\n  ${TextInputStyles}\n`;\n\nconst Placeholder = styled.div`\n  color: ${Colors.Gray400};\n`;\n\nconst TagsContainer = styled(Box)`\n  overflow-x: auto;\n\n  &::-webkit-scrollbar {\n    display: none;\n  }\n  scrollbar-width: none;\n  -ms-overflow-style: none;\n`;\n\nexport const TagSelectorWithSearch = (\n  props: Props & {\n    searchPlaceholder?: string;\n  },\n) => {\n  const [search, setSearch] = React.useState('');\n  const {\n    allTags,\n    selectedTags,\n    setSelectedTags,\n    rowHeight,\n    renderDropdown,\n    searchPlaceholder,\n    ...rest\n  } = props;\n  const filteredTags = React.useMemo(() => {\n    if (search.trim() === '') {\n      return allTags;\n    }\n    return allTags.filter((tag) => tag.toLowerCase().includes(search.toLowerCase()));\n  }, [allTags, search]);\n  return (\n    <TagSelector\n      {...rest}\n      allTags={filteredTags}\n      selectedTags={selectedTags}\n      setSelectedTags={setSelectedTags}\n      dropdownStyles={{width: 'auto'}}\n      renderDropdown={React.useCallback(\n        (dropdownContent: React.ReactNode, dropdownProps: TagSelectorDropdownProps) => {\n          return (\n            <Menu style={{width: 'auto'}}>\n              <Box flex={{direction: 'column'}}>\n                <Box flex={{direction: 'column', grow: 1}} padding={{horizontal: 8}}>\n                  <TextInput\n                    value={search}\n                    onChange={(e) => setSearch(e.target.value)}\n                    placeholder={searchPlaceholder || 'Search'}\n                    ref={(input) => {\n                      if (input) {\n                        input.focus();\n                      }\n                    }}\n                  />\n                </Box>\n                {renderDropdown ? renderDropdown(dropdownContent, dropdownProps) : dropdownContent}\n              </Box>\n            </Menu>\n          );\n        },\n        [renderDropdown, search, searchPlaceholder],\n      )}\n    />\n  );\n};\n","import {Icon, TextInput} from '@dagster-io/ui';\nimport * as React from 'react';\n\nimport {showCustomAlert} from '../app/CustomAlertProvider';\nimport {testId} from '../testing/testId';\nimport {ClearButton} from '../ui/ClearButton';\n\nimport {partitionsToText, spanTextToSelections} from './SpanRepresentation';\n\nexport const DimensionRangeInput: React.FC<{\n  value: string[];\n  onChange: (partitionNames: string[]) => void;\n  partitionKeys: string[];\n  isTimeseries: boolean;\n}> = ({value, onChange, partitionKeys, isTimeseries}) => {\n  const [valueString, setValueString] = React.useState('');\n  const partitionNameJSON = React.useMemo(() => JSON.stringify(partitionKeys), [partitionKeys]);\n\n  React.useEffect(() => {\n    const partitionNameArr = JSON.parse(partitionNameJSON);\n    setValueString(isTimeseries ? partitionsToText(value, partitionNameArr) : value.join(', '));\n  }, [value, partitionNameJSON, isTimeseries]);\n\n  const placeholder = React.useMemo(() => {\n    return partitionKeys.length === 0\n      ? 'Loading partition keys...'\n      : placeholderForPartitions(partitionKeys, isTimeseries);\n  }, [partitionKeys, isTimeseries]);\n\n  const tryCommit = (e: React.SyntheticEvent<HTMLInputElement>) => {\n    try {\n      onChange(spanTextToSelections(partitionKeys, valueString).selectedKeys);\n    } catch (err: any) {\n      e.preventDefault();\n      showCustomAlert({body: err.message});\n    }\n  };\n\n  const onKeyDown = (e: React.KeyboardEvent<HTMLInputElement>) => {\n    if (e.key === 'Enter') {\n      tryCommit(e);\n    }\n  };\n\n  return (\n    <TextInput\n      data-testid={testId('dimension-range-input')}\n      placeholder={placeholder}\n      value={valueString}\n      style={{display: 'flex', width: '100%', flex: 1, flexGrow: 1}}\n      onChange={(e) => setValueString(e.currentTarget.value)}\n      onKeyDown={onKeyDown}\n      onBlur={tryCommit}\n      rightElement={\n        <ClearButton\n          style={{display: valueString.length ? 'initial' : 'none'}}\n          onClick={() => onChange([])}\n        >\n          <Icon name=\"cancel\" />\n        </ClearButton>\n      }\n    />\n  );\n};\n\nfunction placeholderForPartitions(names: string[], isTimeseries: boolean) {\n  if (names.length === 0) {\n    return '';\n  }\n  if (names.length < 4 || !isTimeseries) {\n    return `ex: ${names[0]}, ${names[1]}`;\n  }\n  return `ex: ${names[0]}, ${names[1]}, [${names[2]}...${names[names.length - 1]}]`;\n}\n","import {\n  Box,\n  Button,\n  Checkbox,\n  Colors,\n  TagSelectorDropdownProps,\n  Icon,\n  Menu,\n  MenuDivider,\n  MenuItem,\n  TagSelectorWithSearch,\n  TagSelectorDropdownItemProps,\n} from '@dagster-io/ui';\nimport * as React from 'react';\nimport styled from 'styled-components/macro';\n\nimport {AssetPartitionStatusDot} from '../assets/AssetPartitionList';\nimport {partitionStatusAtIndex} from '../assets/usePartitionHealthData';\nimport {PartitionDefinitionType} from '../graphql/types';\nimport {RunStatusDot} from '../runs/RunStatusDots';\nimport {testId} from '../testing/testId';\nimport {RepoAddress} from '../workspace/types';\n\nimport {CreatePartitionDialog} from './CreatePartitionDialog';\nimport {DimensionRangeInput} from './DimensionRangeInput';\nimport {PartitionStatusHealthSource, PartitionStatus} from './PartitionStatus';\n\nexport const DimensionRangeWizard: React.FC<{\n  selected: string[];\n  setSelected: (selected: string[]) => void;\n  partitionKeys: string[];\n  health: PartitionStatusHealthSource;\n  dimensionType: PartitionDefinitionType;\n  partitionDefinitionName?: string | null;\n  repoAddress?: RepoAddress;\n  refetch?: () => Promise<void>;\n}> = ({\n  selected,\n  setSelected,\n  partitionKeys,\n  health,\n  dimensionType,\n  partitionDefinitionName,\n  repoAddress,\n  refetch,\n}) => {\n  const isTimeseries = dimensionType === PartitionDefinitionType.TIME_WINDOW;\n  const isDynamic = dimensionType === PartitionDefinitionType.DYNAMIC;\n\n  const [showCreatePartition, setShowCreatePartition] = React.useState(false);\n\n  return (\n    <>\n      <Box flex={{direction: 'row', alignItems: 'center', gap: 8}} padding={{vertical: 4}}>\n        <Box flex={{direction: 'column'}} style={{flex: 1}}>\n          {isTimeseries ? (\n            <DimensionRangeInput\n              value={selected}\n              partitionKeys={partitionKeys}\n              onChange={setSelected}\n              isTimeseries={isTimeseries}\n            />\n          ) : (\n            <OrdinalPartitionSelector\n              allPartitions={partitionKeys}\n              selectedPartitions={selected}\n              setSelectedPartitions={setSelected}\n              health={health}\n              setShowCreatePartition={setShowCreatePartition}\n              isDynamic={isDynamic}\n            />\n          )}\n        </Box>\n        {isTimeseries && (\n          <Button\n            small={true}\n            onClick={() => setSelected(partitionKeys.slice(-1))}\n            data-testid={testId('latest-partition-button')}\n          >\n            Latest\n          </Button>\n        )}\n        <Button small={true} onClick={() => setSelected(partitionKeys)}>\n          All\n        </Button>\n      </Box>\n      <Box margin={{bottom: 8}}>\n        {isDynamic && (\n          <LinkText\n            flex={{direction: 'row', alignItems: 'center', gap: 8}}\n            onClick={() => {\n              setShowCreatePartition(true);\n            }}\n          >\n            <StyledIcon name=\"add\" size={24} />\n            <div>Add a partition</div>\n          </LinkText>\n        )}\n        {isTimeseries && (\n          <PartitionStatus\n            partitionNames={partitionKeys}\n            health={health}\n            splitPartitions={!isTimeseries}\n            selected={selected}\n            onSelect={setSelected}\n          />\n        )}\n      </Box>\n      {repoAddress && (\n        <CreatePartitionDialog\n          key={showCreatePartition ? '1' : '0'}\n          isOpen={showCreatePartition}\n          partitionDefinitionName={partitionDefinitionName}\n          repoAddress={repoAddress}\n          close={() => {\n            setShowCreatePartition(false);\n          }}\n          refetch={refetch}\n          onCreated={(partitionName) => {\n            setSelected([...selected, partitionName]);\n          }}\n        />\n      )}\n    </>\n  );\n};\n\nconst OrdinalPartitionSelector: React.FC<{\n  allPartitions: string[];\n  selectedPartitions: string[];\n  setSelectedPartitions: (tags: string[]) => void;\n  health: PartitionStatusHealthSource;\n  setShowCreatePartition: (show: boolean) => void;\n  isDynamic: boolean;\n}> = ({\n  allPartitions,\n  selectedPartitions,\n  setSelectedPartitions,\n  setShowCreatePartition,\n  isDynamic,\n  health,\n}) => {\n  const dotForPartitionKey = React.useCallback(\n    (partitionKey: string) => {\n      const index = allPartitions.indexOf(partitionKey);\n      if ('ranges' in health) {\n        return <AssetPartitionStatusDot status={partitionStatusAtIndex(health.ranges, index)} />;\n      } else {\n        return (\n          <RunStatusDot size={10} status={health.runStatusForPartitionKey(partitionKey, index)} />\n        );\n      }\n    },\n    [allPartitions, health],\n  );\n\n  return (\n    <>\n      <TagSelectorWithSearch\n        allTags={allPartitions}\n        selectedTags={selectedPartitions}\n        setSelectedTags={setSelectedPartitions}\n        placeholder=\"Select a partition or create one\"\n        renderDropdownItem={React.useCallback(\n          (tag: string, dropdownItemProps: TagSelectorDropdownItemProps) => {\n            return (\n              <label>\n                <MenuItem\n                  tagName=\"div\"\n                  text={\n                    <Box flex={{alignItems: 'center', gap: 12}}>\n                      <Checkbox\n                        checked={dropdownItemProps.selected}\n                        onChange={dropdownItemProps.toggle}\n                      />\n                      {dotForPartitionKey(tag)}\n                      <span>{tag}</span>\n                    </Box>\n                  }\n                />\n              </label>\n            );\n          },\n          [dotForPartitionKey],\n        )}\n        renderDropdown={React.useCallback(\n          (dropdown: React.ReactNode, {width, allTags}: TagSelectorDropdownProps) => {\n            const isAllSelected = allTags.every((t) => selectedPartitions.includes(t));\n            return (\n              <Menu style={{width}}>\n                <Box padding={4}>\n                  {isDynamic && (\n                    <>\n                      <Box flex={{direction: 'column'}}>\n                        <MenuItem\n                          tagName=\"div\"\n                          text={\n                            <Box flex={{direction: 'row', alignItems: 'center', gap: 12}}>\n                              <StyledIcon name=\"add\" size={24} />\n                              <span>Add partition</span>\n                            </Box>\n                          }\n                          onClick={() => {\n                            setShowCreatePartition(true);\n                          }}\n                        />\n                      </Box>\n                      <MenuDivider />\n                    </>\n                  )}\n                  {allTags.length ? (\n                    <>\n                      <label>\n                        <MenuItem\n                          tagName=\"div\"\n                          text={\n                            <Box flex={{alignItems: 'center', gap: 12}}>\n                              <Checkbox\n                                checked={isAllSelected}\n                                onChange={() => {\n                                  if (isAllSelected) {\n                                    setSelectedPartitions([]);\n                                  } else {\n                                    setSelectedPartitions(allTags);\n                                  }\n                                }}\n                              />\n                              <span>Select all ({allTags.length})</span>\n                            </Box>\n                          }\n                        />\n                      </label>\n                      {dropdown}\n                    </>\n                  ) : (\n                    <div style={{padding: '6px 6px 0px 6px', color: Colors.Gray700}}>\n                      No matching partitions found\n                    </div>\n                  )}\n                </Box>\n              </Menu>\n            );\n          },\n          [isDynamic, selectedPartitions, setSelectedPartitions, setShowCreatePartition],\n        )}\n        renderTagList={(tags) => {\n          if (tags.length > 4) {\n            return <span>{tags.length} partitions selected</span>;\n          }\n          return tags;\n        }}\n        searchPlaceholder=\"Filter partitions\"\n      />\n    </>\n  );\n};\n\nconst StyledIcon = styled(Icon)`\n  font-weight: 500;\n`;\n\nconst LinkText = styled(Box)`\n  color: ${Colors.Link};\n  cursor: pointer;\n  &:hover {\n    text-decoration: underline;\n  }\n  > * {\n    height: 24px;\n    align-content: center;\n    line-height: 24px;\n  }\n`;\n","import {NonIdealState} from '@dagster-io/ui';\nimport React from 'react';\n\nimport {repoAddressAsHumanString} from '../workspace/repoAddressAsString';\nimport {RepoAddress} from '../workspace/types';\n\ninterface Props {\n  isGraph: boolean;\n  repoAddress?: RepoAddress;\n  result:\n    | {\n        __typename: 'PipelineSnapshotNotFoundError';\n        message: string;\n      }\n    | {\n        __typename: 'PipelineNotFoundError';\n        message: string;\n      }\n    | {\n        __typename: 'RepositoryNotFoundError';\n        message: string;\n      }\n    | {\n        __typename: 'PythonError';\n        message: string;\n      };\n}\n\nexport const NonIdealPipelineQueryResult: React.FC<Props> = ({isGraph, repoAddress, result}) => {\n  if (result.__typename === 'PipelineSnapshotNotFoundError') {\n    return (\n      <NonIdealState\n        icon=\"error\"\n        title={isGraph ? 'Graph snapshot not found' : 'Pipeline snapshot not found'}\n        description={result.message}\n      />\n    );\n  }\n  if (result.__typename === 'PipelineNotFoundError') {\n    return (\n      <NonIdealState\n        icon=\"error\"\n        title={isGraph ? 'Graph not found' : 'Pipeline not found'}\n        description={result.message}\n      />\n    );\n  }\n  if (result.__typename === 'RepositoryNotFoundError') {\n    return (\n      <NonIdealState\n        icon=\"error\"\n        title={`${repoAddress ? repoAddressAsHumanString(repoAddress) : 'Definitions'} not found`}\n        description={result.message}\n      />\n    );\n  }\n  if (result.__typename === 'PythonError') {\n    return <NonIdealState icon=\"error\" title=\"Query error\" description={result.message} />;\n  }\n  return <span />;\n};\n","import * as React from 'react';\n\nimport {useDocumentTitle} from '../hooks/useDocumentTitle';\n\nimport {ExplorerPath} from './PipelinePathUtils';\n\nexport const useJobTitle = (explorerPath: ExplorerPath, isJob: boolean) => {\n  const {pipelineName} = explorerPath;\n\n  const value = React.useMemo(() => {\n    if (isJob) {\n      return `Job: ${pipelineName}`;\n    }\n    return `Pipeline: ${pipelineName}`;\n  }, [isJob, pipelineName]);\n\n  useDocumentTitle(value);\n};\n","import {Colors, IconWrapper} from '@dagster-io/ui';\nimport styled from 'styled-components/macro';\n\nexport const ClearButton = styled.button`\n  background: transparent;\n  border: none;\n  cursor: pointer;\n  margin: 0 -2px 0 0;\n  padding: 2px;\n\n  ${IconWrapper} {\n    background-color: ${Colors.Gray400};\n    transition: background-color 100ms linear;\n  }\n\n  :hover ${IconWrapper}, :focus ${IconWrapper} {\n    background-color: ${Colors.Gray700};\n  }\n\n  :active ${IconWrapper} {\n    background-color: ${Colors.Dark};\n  }\n\n  :focus {\n    outline: none;\n  }\n`;\n","import {FontFamily} from '@dagster-io/ui';\nimport styled from 'styled-components/macro';\n\nexport const Version = styled.div`\n  font-family: ${FontFamily.monospace};\n  font-size: 16px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n`;\n"],"names":["AssetEdges","edges","highlighted","strokeWidth","baseColor","Colors","AssetEdgeSet","color","filter","fromId","toId","React","id","btoa","viewBox","refX","refY","markerUnits","markerWidth","orient","d","fill","map","edge","idx","buildSVGPath","source","from","target","to","stroke","markerEnd","AssetGraphJobSidebar","pipelineSelector","queryResult","useQuery","ASSET_GRAPH_JOB_SIDEBAR","partialRefetch","variables","repositoryName","repositoryLocationName","repoAddress","buildRepoAddress","Loading","pipelineSnapshotOrError","__typename","NonIdealPipelineQueryResult","isGraph","result","SidebarContainerOverview","S","container","gql","SIDEBAR_ROOT_CONTAINER_FRAGMENT","PYTHON_ERROR_FRAGMENT","LatestMaterializationMetadata","assetKey","latest","liveData","latestRun","runOrError","repositoryOrigin","repo","useRepository","Box","padding","top","bottom","NonIdealState","icon","title","description","latestEvent","latestAssetLineage","assetLineage","MetadataTable","runId","timestamp","titleForRun","isHiddenAssetGroupJob","pipelineName","left","PipelineReference","showIcon","pipelineHrefContext","snapshotId","pipelineSnapshotId","isJob","isThisThingAJob","Group","direction","spacing","alignItems","Icon","name","linkToRunEvent","stepKey","partition","flex","gap","Timestamp","ms","Number","Stale","include","length","AssetLineageElements","elements","metadataEntries","entry","label","MetadataEntry","expandSmallValues","repoLocation","location","styled","Table","METADATA_ENTRY_FRAGMENT","AssetSidebarActivitySummary","assetLastMaterializedAt","assetHasDefinedPartitions","useRecentAssetEvents","materializations","observations","loadedPartitionKeys","loading","refetch","xAxis","grouped","useGroupedEvents","vertical","Spinner","purpose","FailedRunSinceMaterializationBanner","run","runWhichFailedToMaterialize","border","side","width","CurrentRunsBanner","freshnessPolicy","margin","horizontal","CurrentMinutesLateTag","freshnessPolicyDescription","style","maxWidth","overflowX","fontSize","collapsedByDefault","AssetEventSystemTags","event","paddingLeft","AssetMaterializationGraphs","asSidebarSection","groups","columnCount","SidebarAssetInfo","assetNode","partitionHealthRefreshHint","healthRefreshHintFromLiveData","partitionHealthData","usePartitionHealthData","data","SIDEBAR_ASSET_QUERY","path","flagSidebarResources","useFeatureFlags","lastMaterialization","asset","assetNodeOrError","Header","repository","metadataForAssetNode","assetMetadata","assetType","hasAssetMetadata","assetConfigSchema","configField","configType","OpMetadataPlugin","op","metadata","pluginForMetadata","opName","AssetDefinedInMultipleReposNotice","loadedFromRepo","padded","SidebarComponent","Description","definition","partitionDefinition","borderBottom","nodeDependsOnSelf","DependsOnSelfBanner","opVersion","Version","ConfigTypeSchema","type","typesInScope","recursiveConfigTypes","requiredResources","resource","workspacePathFromAddress","resourceKey","AssetMetadata","TypeSidebarSection","PartitionHealthSummary","DagsterType","displayName","displayNameForAssetKey","right","marginBottom","display","justifyContent","flexWrap","opacity","size","undefined","AssetCatalogLink","assetDetailsPathForKey","Link","SIDEBAR_ASSET_FRAGMENT","ASSET_NODE_CONFIG_FRAGMENT","ASSET_NODE_OP_METADATA_FRAGMENT","ASSET_FOR_NAVIGATION_QUERY","MINIMAL_SCALE","GROUPS_ONLY_SCALE","AssetGraphExplorer","props","useAssetGraphData","explorerPath","opsQuery","fetchOptions","fetchResult","assetGraphData","graphQueryItems","graphAssetKeys","allAssetKeys","applyingEmptyDefault","useLiveDataForAssetKeys","liveDataByNode","liveDataRefreshState","runWatchers","allowStaleData","graphHasCycles","AssetGraphExplorerWithData","options","setOptions","onChangeExplorerPath","onNavigateToSourceAssetNode","fetchOptionFilters","findAssetLocation","apollo","useApolloClient","key","query","assetOrError","def","opNames","jobName","jobNames","find","groupName","useFindAssetLocation","useAssetLayout","layout","async","viewportEl","setHighlighted","selectedAssetValues","split","selectedGraphNodes","Object","values","nodes","node","includes","tokenForAssetKey","lastSelectedNode","selectedDefinitions","a","allDefinitionsForMaterialize","onSelectNode","e","stopPropagation","token","nodeIsInDisplayedGraph","nextOpsNameSelection","shiftKey","metaKey","tokensToAdd","tokensInRange","opsInRange","graph","existing","without","uniq","join","nextCenter","current","zoomToSVGCoords","bounds","x","y","lastRenderedLayout","setLastRenderedLayout","renderingNewLayout","focus","autocenter","allowGroupsOnlyZoomLevel","keys","SplitPanelContainer","identifier","firstInitialPercent","firstMinSize","first","ErrorBoundary","region","nodeType","SVGViewport","ref","r","interactor","graphWidth","graphHeight","height","graphHasNoMinimumZoom","onClick","onArrowKeyDown","dir","layoutWithoutExternalLinks","pickBy","nextId","closestNodeInDirection","zoomToSVGBox","onDoubleClick","maxZoom","maxAutocenterZoom","scale","SVGContainer","Math","max","sort","b","group","targetScale","scaleForSVGBounds","AssetGroupNode","graphNode","JSON","parse","onMouseEnter","onMouseLeave","overflow","AssetNode","selected","Checkbox","format","checked","preferAssetRendering","onChange","position","QueryRefresh","refreshState","dataDescription","LaunchAssetObservationButton","preferredJobName","scope","isObservable","all","LaunchAssetExecutionButton","liveDataForStale","GraphQueryInput","items","value","placeholder","popoverPosition","second","resetErrorOnChange","graphDirectionOf","stack","pop","downstream","n","Boolean","some","push","seen","ledToTarget","repositoryDisambiguationRequired","fontWeight","userSelect","workspacePath","GroupRepoName","withMiddleTruncation","buildRepoPathForHuman","maxLength","GroupOutline","inset","background","fontFamily","FontFamily","Remark","remark","use","gfm","toPlainText","markdownCache","LRUCache","markdownToPlaintext","md","cached","get","str","processSync","toString","replace","trim","set","isSource","AssetInsetForHoverEffect","AssetTopTags","AssetNodeContainer","$selected","AssetNodeBox","$isSource","Name","marginTop","textOverflow","ASSET_NODE_NAME_MAX_LENGTH","$color","isPartitioned","AssetNodeStatusRow","paddingTop","isEqual","AssetNodeStatusBox","children","borderBottomLeftRadius","borderBottomRightRadius","whiteSpace","lineHeight","buildAssetNodeStatusContent","content","getStepKey","expanded","inProgressRunIds","unstartedRunIds","materializingRunId","late","isAssetLate","SpacerDot","lastObservation","status","AssetPartitionStatus","textAlign","TimestampDisplay","timeFormat","showSeconds","showTimezone","marginRight","partitionStats","numMaterializing","numPartitions","numMaterialized","numFailed","numMissing","StyleForAssetPartitionStatus","foreground","view","rel","humanizedLateString","freshnessInfo","currentMinutesLate","partitionCountString","lastMaterializationLink","endTime","AssetNodeMinimal","MinimalAssetNodeContainer","TooltipStyled","canShow","targetTagName","MinimalAssetNodeBox","$background","$border","MinimalName","ASSET_NODE_LIVE_FRAGMENT","ASSET_NODE_FRAGMENT","AssetNodeShowOnHover","p","Tooltip","marginLeft","AssetLatestRunSpinner","stopped","AssetRunLink","AssetNodeLink","AssetNodeLinkContainer","className","ASSET_LINK_NAME_MAX_LENGTH","ASSET_GRAPH_QUERY","notifyOnNetworkStatusChange","groupSelector","assetNodes","matching","hideNodesMatching","reject","buildGraphQueryItems","filterByQuery","buildGraphData","hideEdgesToNodesOutsideQuery","removeEdgesToHiddenAssets","inputs","dependencyKeys","dependsOn","solid","outputs","dependedByKeys","dependedBy","graphData","allNodes","allNodesById","groupBy","toGraphId","notSourceAsset","upstream","calculateGraphDistances","keyBy","g","start","dfsUpstream","depth","next","flatMap","i","dname","dfsDownstream","SUBSCRIPTION_MAX_POLL_RATE","assetKeys","liveResult","ASSETS_GRAPH_LIVE_QUERY","skip","buildLiveData","fetching","NetworkStatus","networkStatus","timerRef","onRefreshDebounced","setTimeout","fire","clearTimeout","useQueryRefreshAtInterval","useDidLaunchEvent","assetKeyTokens","Set","assetStepKeys","runInProgressId","slice","RunLogObserver","callback","counter","console","log","useSubscription","ASSET_LIVE_RUN_LOGS_SUBSCRIPTION","fetchPolicy","onSubscriptionData","logs","subscriptionData","pipelineRunLogs","messages","m","has","ASSET_LATEST_INFO_FRAGMENT","CONFIG_TYPE_SCHEMA_FRAGMENT","MULTIPLE_DEFINITIONS_WARNING","ASSET_DEFINITION_COLLISION_QUERY","collision","assetNodeDefinitionCollisions","allReposWithAsset","repositories","repoAddressAsHumanString","intent","underline","showCustomAlert","body","addr","AssetEventList","focused","setFocused","parentRef","focusedRowRef","rowVirtualizer","useVirtualizer","count","getScrollElement","estimateSize","overscan","totalHeight","getTotalSize","getVirtualItems","el","HTMLElement","scrollIntoView","block","AssetListContainer","$totalHeight","index","AssetListRow","$height","$start","$focused","closest","AssetEventListPartitionRow","AssetEventListEventRow","Container","Row","ORDER","DagsterTag","collapsible","useStateWithStorage","shown","setShown","tags","transform","AssetEventSystemTagsTable","indexOf","t","AssetLineageInfoElement","lineage_info","partition_list_label","partitions","partition_list_str","asOf","modifiers","offset","enabled","placement","reduce","accum","curr","ii","collapsed","setCollapsed","info","ASSET_LINEAGE_FRAGMENT","xHover","setXHover","reversed","reverse","graphDataByMetadataLabel","extractNumericData","graphLabels","gridTemplateColumns","repeat","onHoverX","shrinkable","action","href","datapoints","series","numericMetadataLabels","k","append","minX","maxX","minY","maxY","existingForPartition","v","isNaN","xNumeric","l","NaN","intValue","parseInt","intRepr","floatValue","serie","xs","ys","minXNumeric","min","maxXNumeric","AssetMetadataTable","rows","DAGSTER_TYPE_FRAGMENT","adjective","toLocaleString","countMissing","PartitionCountTags","PartitionCountTag","total","PartitionCountContainer","PartitionCountLabels","PartitionCountLabel","AssetPartitionList","focusedDimensionKey","setFocusedDimensionKey","statusForPartition","getItemKey","scrollToIndex","smoothScroll","align","tabIndex","onKeyDown","shift","ArrowDown","ArrowUp","isDefaultPrevented","nextIdx","preventDefault","dimensionKey","state","AssetPartitionStatusDot","borderRadius","flexShrink","assetPartitionStatusesToStyle","dayjs","duration","relativeTime","minLate","humanize","policyOnHover","cronSchedule","maximumLagMinutes","cronScheduleTimezone","cronDesc","humanCronString","lagDesc","RadioContainer","IconWrapper","RunningBackfillsNotice","partitionSetName","RUNNING_BACKFILLS_NOTICE_QUERY","runningBackfillCount","partitionBackfillsOrError","results","LaunchAssetChoosePartitionsDialog","assets","Dialog","isOpen","open","canEscapeKeyClose","canOutsideClickClose","onClose","setOpen","LaunchAssetChoosePartitionsDialogBody","upstreamAssetKeys","_refetch","partitionedAssets","usePermissionsForLocation","permissions","canLaunchPipelineExecution","canLaunchPartitionBackfill","disabledReasons","launching","setLaunching","tagEditorOpen","setTagEditorOpen","setTags","previewCount","setPreviewCount","morePreviewsCount","Date","now","lastRefresh","setLastRefresh","assetHealth","assetHealthLoading","displayedHealth","mergedAssetHealth","itemWithAssetKey","anchorAssetKey","displayedBaseAsset","displayedPartitionDefinition","knownDimensions","dimensionTypes","missingFailedOnly","setMissingFailedOnly","usePartitionDimensionSelections","knownDimensionNames","modifyQueryString","skipPartitionKeyValidation","PartitionDefinitionType","shouldReadPartitionQueryStringParam","selections","setSelections","keysInSelection","explodePartitionKeysInSelection","dimensionKeys","states","stateForKey","Array","launchWithRangesAsTags","setLaunchWithRangesAsTags","canLaunchWithRangesAsTags","every","s","selectedRanges","selectedKeys","keysFiltered","client","history","useHistory","launchWithTelemetry","useLaunchWithTelemetry","useLaunchPadHooks","launchAsBackfill","onLaunch","onLaunchAsBackfill","onLaunchAsSingleRun","CONFIG_PARTITION_SELECTION_QUERY","repositorySelector","partitionName","partitionKey","tagAndConfigData","partitionSetOrError","tagsOrError","PythonErrorInfo","error","runConfigOrError","runConfigData","yaml","allTags","startsWith","executionParams","executionParamsForAssetJob","mode","selectorIfJobPage","mutate","mutation","LAUNCH_PARTITION_BACKFILL_MUTATION","backfillParams","selector","assetSelection","partitionNames","fromFailure","launchBackfillData","launchPartitionBackfill","showBackfillSuccessToast","backfillId","showBackfillErrorToast","testId","Warnings","isPureAssetBackfill","ToggleableSection","isInitiallyOpen","range","as","Subheading","dimension","DimensionRangeWizard","partitionKeys","health","ranges","rangesForSingleDimension","dimensionType","setSelected","partitionDefinitionName","dynamicPartitionsDefinitionName","TagEditor","tagsFromSession","onRequestClose","onRequestEdit","actions","tag","Button","disabled","overflowY","maxHeight","showAssetKey","partitionDefinitionsEqual","ButtonLink","topBorder","UpstreamUnavailableWarning","upstreamAssetHealth","upstreamUnavailable","singleDimensionKey","dimensions","upstreamUnavailableSpans","assembleIntoSpans","Alert","span","stringForSpan","Error","LAUNCH_ASSET_CHOOSE_PARTITIONS_QUERY","DAEMON_NOT_RUNNING_ALERT_INSTANCE_FRAGMENT","USING_DEFAULT_LAUNCH_ERALERT_INSTANCE_FRAGMENT","instance","alerts","DaemonNotRunningAlert","UsingDefaultLauncherAlert","setIsOpen","cursor","Rotateable","$rotate","countOrBlank","isAnyPartitioned","ERROR_INVALID_ASSET_SELECTION","useMaterializationAction","launchpadElement","hasMaterializePermission","skipAllTerm","missingOrStale","isAssetMissing","isAssetStale","optionsForButton","firstOption","MaterializeButton","useDisabledButtonTooltipFix","borderTopRightRadius","borderRight","Popover","onInteraction","nextOpen","Menu","text","option","role","minWidth","borderTopLeftRadius","confirm","useConfirmation","setState","_forceLaunchpad","LAUNCH_ASSET_LOADER_QUERY","buildAssetCollisionsAlert","forceLaunchpad","stateForLaunchingAssets","upstreamAssetsWithNoMaterializations","missing","assetJobName","sessionPresets","getCommonJob","inSameRepo","inSameOrNoPartitionSpace","anchorAsset","getAnchorAssetForPartitionMappedBackfill","getUpstreamAssetKeys","LAUNCH_ASSET_LOADER_RESOURCE_QUERY","resourceResult","pipeline","pipelineOrError","message","partitionSets","partitionSetsOrError","requiredResourceKeys","resources","modes","anyResourcesHaveRequiredConfig","isRequired","anyAssetsHaveRequiredConfig","assumeConfigPresent","assetOpNames","flattenGraphs","solidSelectionQuery","base","partitionsSetName","jobsInCommon","partitionedRoots","aDeps","localeCompare","stringify","LAUNCH_ASSET_CHECK_UPSTREAM_QUERY","assetMaterializations","executionMetadata","pick","ridx","LAUNCH_ASSET_EXECUTION_ASSET_NODE_FRAGMENT","scopeAssets","stateForObservingAssets","_client","repoName","assetData","minHeight","keysForTotals","success","combinations","dkeys","dimensionIdx","small","splitPartitions","isTimeseriesDimension","staleStatus","StaleStatus","LABELS","self","StaleCauseCategory","StaleReasonsLabel","staleCauses","StaleCausesSummary","causes","groupedCauses","StaleReasonsTags","entries","fillColor","textColor","interactive","cause","category","reason","dependency","NO_PARTITION_KEY","sortByEventTimestamp","events","definedPartitionKeys","orderedPartitionKeys","sorted","groupByPartition","useSetStateUpdateCallback","currentState","updateCallback","stateRef","updateCallbackRef","Function","opts","serializer","defaults","encode","fromEntries","rangeText","decode","qs","endsWith","isFromPartitionQueryStringParam","partitionText","buildSerializer","useQueryPersistedState","setQuery","local","setLocal","knownDimensionNamesJSON","inflated","saved","allPartitionsRange","spanTextToSelections","placeholderDimensionSelection","partitionsToText","allPartitionsSpan","params","before","xAxisDefault","time","loadUsingPartitionKeys","ASSET_EVENTS_QUERY","partitionInLast","limit","assetObservations","allPartitionKeys","ASSET_MATERIALIZATION_FRAGMENT","ASSET_OBSERVATION_FRAGMENT","ConfigEditorConfigPicker","onSaveSession","onSelectPreset","onSelectPartition","presets","configGenerators","PickerContainer","ConfigEditorConfigGeneratorPicker","presetName","onSelect","item","ConfigEditorPartitionPicker","basePath","AppContext","repoAddressToSelector","CONFIG_PARTITIONS_QUERY","selection","sortOrderKey","sortOrder","setSortOrder","retrieved","partitionsOrError","onClickSort","order","rightElement","SortButton","onMouseDown","inputProps","Intent","isDynamicPartition","showCreatePartition","setShowCreatePartition","itemRenderer","noResults","inputValueRenderer","selectedItem","onItemSelect","defaultSelectedItem","itemPredicate","active","handleClick","close","onCreated","button","shortcutLabel","shortcutFilter","code","altKey","onShortcut","click","configGenerator","itemListRenderer","itemsParentRef","renderItem","filteredItems","renderedPresetItems","renderedPartitionSetItems","bothTypesPresent","ulRef","solidSelection","rightIcon","CONFIG_EDITOR_GENERATOR_PIPELINE_FRAGMENT","CONFIG_EDITOR_GENERATOR_PARTITION_SETS_FRAGMENT","CodeMirrorInDialogStyle","createGlobalStyle","LaunchpadTransientSessionContainer","launchpadType","initialData","useInitialDataForMode","initialSessionComplete","createSingleSession","runConfigYaml","session","setSession","LaunchpadSession","onSave","changes","newSession","LaunchpadStoredSessionsContainer","AssetLaunchpad","LaunchpadAllowedRoot","pipelinePath","JobLaunchpad","useParams","repoPath","useTrackPageView","explorerPathFromString","useJobTitle","useStripSnapshotFromPath","PIPELINE_EXECUTION_ROOT_QUERY","LaunchpadSessionLoading","LaunchpadSessionError","fallback","GUTTER_ID","rm","elt","parentNode","removeChild","showTooltipFor","tooltip","tt","document","createElement","nodeRect","getBoundingClientRect","appendChild","cloneNode","clientHeight","showTooltip","hide","CodeMirror","poll","setInterval","host","clearInterval","clearMarks","cm","lint","hasGutter","clearGutter","marked","clear","makeMarker","labels","severity","multiple","tooltips","marker","inner","annotationTooltip","ann","tip","messageHTML","innerHTML","createTextNode","updateLinting","annotationsNotSorted","annotations","lines","line","groupByLine","anns","maxSeverity","tipLabel","createDocumentFragment","formatAnnotation","markText","__annotation","setGutterMarker","onUpdateLinting","startLinting","passOptions","getAnnotations","getHelper","waitingFor","abort","off","on","getValue","arg2","operation","lintAsync","then","issues","timeout","delay","onMouseOver","box","srcElement","pos","coordsChar","spans","findMarksAt","docs","getDocs","docsEl","textContent","paddingBottom","popupTooltip","LintState","this","val","old","lintOnChange","getWrapperElement","gutters","getOption","hasLintGutter","AUTO_COMPLETE_AFTER_KEY","performLint","debounce","editor","ConfigEditorStyle","ConfigEditor","_editor","moveCursor","ch","setCursor","scroll","getScrollInfo","cursorCoords","moveCursorToPath","codeMirrorDoc","getDoc","yamlDoc","configCode","findRangeInDocumentFromPath","posFromIndex","prevProps","configSchema","performInitialPass","readOnly","context","expandAutocompletionContextAtCursor","onHelpContextChange","closestMappingType","theme","lineNumbers","indentUnit","smartIndent","showCursorWhenSelecting","checkConfig","hintOptions","completeSingle","closeOnUnfocus","schema","keyMap","extraKeys","showHint","execCommand","Tab","foldGutter","editorDidMount","onBeforeChange","onConfigChange","onCursorActivity","getSelection","onBlur","onKeyUp","test","isHelpContextEqual","prev","ConfigEditorHelp","allInnerTypes","ConfigScrollWrap","maxDepth","AutocompletionsNote","CONFIG_EDITOR_RUN_CONFIG_SCHEMA_FRAGMENT","CONFIG_EDITOR_VALIDATION_FRAGMENT","errorStackToYamlPath","fieldName","listIndex","mapKey","responseToYamlValidationResult","configYaml","response","isValid","errors","err","parsed","topLevelKey","forEach","ConfigEditorModePicker","resolvedMode","modeName","onModeChange","singleMode","valid","modeError","Select","activeItem","filterable","SOLID_SELECTOR_QUERY","GRAPH_EXPLORER_SOLID_HANDLE_FRAGMENT","OpSelector","serverProvidedSubsetError","onFlattenGraphsChange","inputRef","requestScopeHandleID","ops","explodeCompositesInHandleGraph","solidHandles","h","flattenGraphsEnabled","f","opsFetchError","queryResultOps","errorMessage","PopoverErrorWrap","ShortcutHandler","nextQuery","onFocus","linkToPreview","setFlattenGraphs","isValidationError","stateToHint","invalid","present","none","RemoveExtraConfigButton","onRemoveExtraPaths","extraNodes","knownKeyExtraPaths","otherPaths","parts","ScaffoldConfigButton","onScaffoldMissingConfig","missingNodes","confirmationMessage","RunPreview","validation","onHighlightPath","runConfigSchema","errorsOnly","setErrorsOnly","rootCompositeChildren","allConfigTypes","rootConfigType","root","fields","field","allConfigVersion","configTypeKey","errorsAndPaths","pathKey","fieldNames","solids","rest","hasOps","itemsIn","parents","boxes","pathErrors","isPresent","pathExistsInObject","containsMissing","missingNode","isInvalid","isMissing","_","Tag","ItemsEmptyNotice","axis","ErrorListContainer","Section","SectionTitle","ErrorRow","onHighlight","RuntimeAndResourcesSection","ItemSet","RUN_PREVIEW_VALIDATION_FRAGMENT","ErrorRowContainer","hoverable","displayed","substr","truncateErrorMessage","paddingRight","object","scaffoldType","typeLookup","isSelector","config","typeParamKeys","scalarTypeKey","String","Int","Float","Bool","Any","assertUnreachable","scaffoldPipelineConfig","createTypeLookup","YAML_SYNTAX_INVALID","reducer","previewLoading","payload","preview","previewedDocument","configLoading","editorHelpContext","LaunchButtonContainer","flexGrow","zIndex","initialState","currentSession","dispatch","mounted","editorSplitPanelContainer","previewCounter","configResult","PIPELINE_EXECUTION_CONFIG_SCHEMA_QUERY","configSchemaOrError","runConfigSchemaOrError","launchButtonTitle","launchButtonWarning","currentPreviewCount","configYamlOrEmpty","sanitizeConfigYamlString","PREVIEW_CONFIG_QUERY","isLatestRequest","isPipelineConfigValid","tagsApplyingNewBaseTags","newBaseTags","preservedUserTags","bt","preset","onlyKeyAndValue","needsRefresh","sessionSolidSelection","onConfigLoading","onConfigLoaded","assign","onRefreshConfig","matchingPreset","openTagEditor","refreshableSessionBase","LaunchRootExecutionButton","LoadingOverlay","isLoading","SessionSettingsBar","SessionSettingsSpacer","TextInput","tagsFromDefinition","tagDict","toSave","paths","deletePropertyPath","updatedRunConfigData","merge","warning","hasLaunchPermission","getVariables","uniqBy","behavior","obj","lastKey","yamlString","LoadingOverlayContainer","editState","setEditState","toError","onTagEdit","TagList","editable","flexDirection","onRemove","TagContainer","sessionTag","INVALID_PARITION_SUBSTRINGS","INVALID_PARTITION_SUBSTRINGS_READABLE","CreatePartitionDialog","setPartitionName","useMutation","CREATE_PARTITION_MUTATION","createPartition","isSaving","setIsSaving","isValidPartitionName","handleSave","partitionsDefName","refetchQueries","addDynamicPartition","invalidatePartitions","PartitionBox","onKeyPress","strokeColor","inputElement","defaultRenderTag","tagProps","remove","TagSelector","selectedTags","setSelectedTags","renderTag","renderDropdownItem","renderDropdown","dropdownStyles","renderTagList","rowHeight","isDropdownOpen","setIsDropdownOpen","useViewport","viewport","containerProps","dropdown","dropdownContent","outline","rowCount","rowRenderer","toggle","dropdownItemProps","tagName","defaultRenderDropdownItem","dropdownContainer","tagsContent","Placeholder","ev","nextOpenState","contains","TagsContainer","grow","TextInputStyles","TagSelectorWithSearch","search","setSearch","searchPlaceholder","filteredTags","toLowerCase","dropdownProps","input","DimensionRangeInput","isTimeseries","valueString","setValueString","partitionNameJSON","partitionNameArr","names","placeholderForPartitions","tryCommit","currentTarget","ClearButton","C","isDynamic","OrdinalPartitionSelector","allPartitions","selectedPartitions","setSelectedPartitions","LinkText","StyledIcon","PartitionStatus","dotForPartitionKey","partitionStatusAtIndex","runStatusForPartitionKey","isAllSelected","useDocumentTitle"],"sourceRoot":""}