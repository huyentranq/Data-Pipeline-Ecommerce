"use strict";(self.webpackChunk_dagster_io_dagit_app=self.webpackChunk_dagster_io_dagit_app||[]).push([[318],{96391:function(e,n,t){t.d(n,{i:function(){return s}});var i=t(7838),r=t(325),o=t(39061),a=t(32289),s=function(e){var n=e.edges,t=e.highlighted,o=e.strokeWidth,s=void 0===o?4:o,c=e.baseColor,d=void 0===c?i.w.KeylineGray:c;return(0,a.jsxs)(r.Fragment,{children:[(0,a.jsx)(l,{color:d,edges:n,strokeWidth:s}),(0,a.jsx)(l,{color:i.w.Blue500,edges:n.filter((function(e){var n=e.fromId,i=e.toId;return t===n||t===i})),strokeWidth:s})]})},l=r.memo((function(e){var n=e.edges,t=e.color,i=e.strokeWidth;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("defs",{children:(0,a.jsx)("marker",{id:"arrow".concat(btoa(t)),viewBox:"0 0 8 10",refX:"1",refY:"5",markerUnits:"strokeWidth",markerWidth:i,orient:"auto",children:(0,a.jsx)("path",{d:"M 0 0 L 8 5 L 0 10 z",fill:t})})}),n.map((function(e,n){return(0,a.jsx)("path",{d:(0,o.cD)({source:e.from,target:e.to}),stroke:t,strokeWidth:i,fill:"none",markerEnd:"url(#arrow".concat(btoa(t),")")},n)}))]})}))},35473:function(e,n,t){t.d(n,{OK:function(){return Ye},md:function(){return He},CZ:function(){return Qe}});var i,r,o,a,s,l=t(47427),c=t(59019),d=t(85358),u=t(19065),p=t(95764),f=t(922),m=t(95550),h=t.n(m),g=t(89646),x=t(17912),y=t(32028),v=t(7838),j=t(50346),b=t(32030),w=t(51550),S=t.n(w),N=t(58891),C=t.n(N),k=t(40839),P=t.n(k),E=t(325),_=t(19102),I=t(52165),Z=t(52063),A=t(85532),K=t(76867),O=t(66956),M=t(2112),D=t(19910),z=t(65164),T=t(50741),L=t(96391),F=t(99500),R=t(73701),G=t(3159),$=t(79082),B=t(57872),V=t(80339),J=t(37099),U=t(32289),q=function(e){var n=e.pipelineSelector,t=(0,R.a)(Q,{partialRefetch:!0,variables:{pipelineSelector:n}}),i=n.repositoryName,r=n.repositoryLocationName,o=(0,J.kQ)(i,r);return(0,U.jsx)(T.g,{queryResult:t,children:function(e){var n=e.pipelineSnapshotOrError;return"PipelineSnapshot"!==n.__typename?(0,U.jsx)(B.Q,{isGraph:!0,result:n,repoAddress:o}):(0,U.jsx)(V.S,{container:n,repoAddress:o})}})},Q=(0,G.Ps)(i||(i=(0,F.Z)(["\n  query AssetGraphSidebarQuery($pipelineSelector: PipelineSelector!) {\n    pipelineSnapshotOrError(activePipelineSelector: $pipelineSelector) {\n      ... on PipelineSnapshot {\n        id\n        ...SidebarRootContainerFragment\n      }\n      ... on PipelineNotFoundError {\n        message\n      }\n      ... on PipelineSnapshotNotFoundError {\n        message\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"])),V.q,$.B),H=t(9),Y=t(11540),W=t(38376),X=t(34595),ee=t(71725),ne=t(75497),te=t(74549),ie=t(81745),re=t(34449),oe=t(61460),ae=t(7713),se=t(12745),le=t(53857),ce=t(91847),de=t(4041),ue=t(79986),pe=t(73522),fe=t(25329),me=t(6466),he=t(55113),ge=t(55419),xe=t(39061),ye=t(4735),ve=t(62e3),je=t(55752),be=t(76336),we=t(52598),Se=t(74948),Ne=function(e){var n=e.assetKey,t=e.latest,i=e.liveData,r="Run"===(null===t||void 0===t?void 0:t.runOrError.__typename)?null===t||void 0===t?void 0:t.runOrError:null,o=null===r||void 0===r?void 0:r.repositoryOrigin,a=o?(0,J.kQ)(o.repositoryName,o.repositoryLocationName):null,s=(0,be.Ux)(a);if(!t)return(0,U.jsx)(b.x,{padding:{top:16,bottom:32},children:(0,U.jsx)(g.t,{icon:"materialization",title:"No materializations",description:"No materializations were found for this asset."})});var l=t,c=null===l||void 0===l?void 0:l.assetLineage;return(0,U.jsx)(Ce,{children:(0,U.jsxs)("tbody",{children:[(0,U.jsxs)("tr",{children:[(0,U.jsx)("td",{children:"Run"}),(0,U.jsx)("td",{children:r?(0,U.jsxs)("div",{children:[(0,U.jsxs)(b.x,{children:["Run ",(0,U.jsx)(te.rU,{to:"/runs/".concat(l.runId,"?timestamp=").concat(l.timestamp),children:(0,U.jsx)(se.fv,{children:(0,je.EI)({runId:l.runId})})})]}),!(0,xe.pv)(r.pipelineName)&&(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(b.x,{padding:{left:8,top:4},children:(0,U.jsx)(ve.h,{showIcon:!0,pipelineName:r.pipelineName,pipelineHrefContext:a||"repo-unknown",snapshotId:r.pipelineSnapshotId,isJob:(0,be.E8)(s,r.pipelineName)})}),(0,U.jsxs)(me.Z,{direction:"row",padding:{left:8},spacing:8,alignItems:"center",children:[(0,U.jsx)(ne.JO,{name:"linear_scale",color:v.w.Gray400}),(0,U.jsx)(te.rU,{to:(0,je.tA)(r,l),children:l.stepKey})]})]})]}):"No materialization events"}),(0,U.jsx)("td",{})]}),null!==t&&void 0!==t&&t.partition?(0,U.jsxs)("tr",{children:[(0,U.jsx)("td",{children:"Partition"}),(0,U.jsx)("td",{children:t?t.partition:"No materialization events"}),(0,U.jsx)("td",{})]}):null,(0,U.jsxs)("tr",{children:[(0,U.jsx)("td",{children:"Timestamp"}),(0,U.jsx)("td",{children:(0,U.jsxs)(b.x,{flex:{gap:8,alignItems:"center"},children:[l?(0,U.jsx)(ge.E,{timestamp:{ms:Number(l.timestamp)}}):"No materialization events",i&&(0,U.jsx)(Se.d9,{assetKey:n,liveData:i,include:"all"})]})}),(0,U.jsx)("td",{})]}),null!==c&&void 0!==c&&c.length?(0,U.jsxs)("tr",{children:[(0,U.jsx)("td",{children:"Parent assets"}),(0,U.jsx)("td",{children:(0,U.jsx)(we.i,{elements:c,timestamp:l.timestamp})}),(0,U.jsx)("td",{})]}):null,null===l||void 0===l?void 0:l.metadataEntries.map((function(e){return(0,U.jsxs)("tr",{children:[(0,U.jsx)("td",{children:e.label}),(0,U.jsx)("td",{children:(0,U.jsx)(ye.BL,{entry:e,expandSmallValues:!0,repoLocation:null===a||void 0===a?void 0:a.location})}),(0,U.jsx)("td",{children:e.description})]},"metadata-".concat(e.label))}))]})})},Ce=(0,f.ZP)(he.i).withConfig({displayName:"LastMaterializationMetadata__MetadataTable",componentId:"sc-1u4xf4p-0"})(["td:first-child{white-space:nowrap;width:1px;max-width:400px;word-break:break-word;overflow:hidden;text-overflow:ellipsis;}"]),ke=((0,G.Ps)(r||(r=(0,F.Z)(["\n  fragment LatestMaterializationMetadataFragment on MaterializationEvent {\n    partition\n    tags {\n      key\n      value\n    }\n    runOrError {\n      ... on PipelineRun {\n        id\n        runId\n        mode\n        pipelineName\n        pipelineSnapshotId\n        repositoryOrigin {\n          id\n          repositoryName\n          repositoryLocationName\n        }\n      }\n    }\n    runId\n    timestamp\n    stepKey\n    metadataEntries {\n      ...MetadataEntryFragment\n    }\n    assetLineage {\n      assetKey {\n        path\n      }\n      partitions\n    }\n  }\n\n  ","\n"])),ye.it),t(33682)),Pe=t(66855),Ee=function(e){var n=e.assetKey,t=e.assetLastMaterializedAt,i=e.assetHasDefinedPartitions,r=e.liveData,o=(0,Pe.fE)(n,{},{assetHasDefinedPartitions:i}),a=o.materializations,s=o.observations,l=o.loadedPartitionKeys,c=o.loading,d=o.refetch,u=o.xAxis,p=(0,ke.L)(u,a,s,l);return E.useEffect((function(){d()}),[t,d]),c?(0,U.jsx)(b.x,{padding:{vertical:20},children:(0,U.jsx)(X.$,{purpose:"section"})}):(0,U.jsxs)(U.Fragment,{children:[!i&&(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(fe.Z,{run:(null===r||void 0===r?void 0:r.runWhichFailedToMaterialize)||null,border:{side:"top",width:1,color:v.w.KeylineGray}}),(0,U.jsx)(pe.j,{liveData:r,border:{side:"top",width:1,color:v.w.KeylineGray}})]}),(null===r||void 0===r?void 0:r.freshnessPolicy)&&(0,U.jsx)(le.pC,{title:"Freshness policy",children:(0,U.jsxs)(b.x,{margin:{horizontal:24,vertical:12},flex:{gap:12,alignItems:"center"},children:[(0,U.jsx)(ue.vy,{liveData:r}),(0,U.jsx)(se.uT,{children:(0,ue.jY)(r.freshnessPolicy)})]})}),(0,U.jsx)(le.pC,{title:"Materialization in last run",children:a[0]?(0,U.jsx)("div",{style:{margin:-1,maxWidth:"100%",overflowX:"auto"},children:(0,U.jsx)(Ne,{assetKey:n,latest:a[0],liveData:r})}):(0,U.jsx)(b.x,{margin:{horizontal:24,vertical:12},style:{color:v.w.Gray500,fontSize:"0.8rem"},children:"No materializations found"})}),(0,U.jsx)(le.pC,{title:"Materialization system tags",collapsedByDefault:!0,children:a[0]?(0,U.jsx)("div",{style:{margin:-1,maxWidth:"100%",overflowX:"auto"},children:(0,U.jsx)(ce.M,{event:a[0],paddingLeft:24})}):(0,U.jsx)(b.x,{margin:{horizontal:24,vertical:12},style:{color:v.w.Gray500,fontSize:"0.8rem"},children:"No materializations found"})}),(0,U.jsx)(le.pC,{title:"Metadata plots",children:(0,U.jsx)(de.l,{xAxis:u,asSidebarSection:!0,groups:p,columnCount:1})})]})},_e=t(11936),Ie=t(95609),Ze=t(77171),Ae=t(47619),Ke=t(33208),Oe=t(10922),Me=t(36758),De=t(53218),ze=t(14848),Te=t(25582),Le=function(e){var n,t,i,r=e.assetNode,o=e.liveData,a=r.assetKey,s=(0,Ae.em)(o),l=(0,Ae.mR)([a],s,"background"),c=(0,R.a)(Be,{variables:{assetKey:{path:a.path}}}).data,d=(0,ie.gV)().flagSidebarResources,u=(o||{}).lastMaterialization,p="AssetNode"===(null===c||void 0===c?void 0:c.assetNodeOrError.__typename)?c.assetNodeOrError:null;if(!p)return(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(Re,{assetKey:a,repoAddress:null}),(0,U.jsx)(b.x,{padding:{vertical:64},children:(0,U.jsx)(X.$,{purpose:"section"})})]});var f=(0,J.kQ)(p.repository.name,p.repository.location.name),m=(0,ae.U6)(p),h=m.assetMetadata,g=m.assetType,x=g||h.length>0,y=null===(n=p.configField)||void 0===n?void 0:n.configType,j=(null===(t=p.op)||void 0===t?void 0:t.metadata)&&(0,De.D)(p.op.metadata);return(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(Re,{assetKey:a,opName:null===(i=p.op)||void 0===i?void 0:i.name,repoAddress:f}),(0,U.jsx)(oe.N,{assetKey:a,loadedFromRepo:f,padded:!1}),(p.description||(null===j||void 0===j?void 0:j.SidebarComponent)||!x)&&(0,U.jsxs)(le.pC,{title:"Description",children:[(0,U.jsx)(b.x,{padding:{vertical:16,horizontal:24},children:(0,U.jsx)(Oe.d,{description:p.description||"No description provided."})}),p.op&&(null===j||void 0===j?void 0:j.SidebarComponent)&&(0,U.jsx)(b.x,{padding:{bottom:16,horizontal:24},children:(0,U.jsx)(j.SidebarComponent,{definition:p.op,repoAddress:f})})]}),(0,U.jsx)(Ee,{assetKey:a,assetLastMaterializedAt:null===u||void 0===u?void 0:u.timestamp,assetHasDefinedPartitions:!!p.partitionDefinition,liveData:o}),(0,U.jsx)("div",{style:{borderBottom:"2px solid ".concat(v.w.Gray300)}}),(0,xe.Pz)(r)&&(0,U.jsx)(_e.x,{}),p.opVersion&&(0,U.jsx)(le.pC,{title:"Code Version",children:(0,U.jsx)(b.x,{padding:{vertical:16,horizontal:24},children:(0,U.jsx)(ze.G,{children:p.opVersion})})}),y&&(0,U.jsx)(le.pC,{title:"Config",children:(0,U.jsx)(b.x,{padding:{vertical:16,horizontal:24},children:(0,U.jsx)(ee.L,{type:y,typesInScope:y.recursiveConfigTypes})})}),p.requiredResources.length>0&&(0,U.jsx)(le.pC,{title:"Required Resources",children:(0,U.jsx)(b.x,{padding:{vertical:16,horizontal:24},children:p.requiredResources.map((function(e){return(0,U.jsxs)(Me.b1,{children:[(0,U.jsx)(ne.JO,{name:"resource",color:v.w.Gray700}),d&&f?(0,U.jsx)(te.rU,{to:(0,Te.$U)(f,"/resources/".concat(e.resourceKey)),children:(0,U.jsx)(Me.bZ,{children:e.resourceKey})}):(0,U.jsx)(Me.bZ,{children:e.resourceKey})]},e.resourceKey)}))})}),h.length>0&&(0,U.jsx)(le.pC,{title:"Metadata",children:(0,U.jsx)(ae.mQ,{assetMetadata:h,repoLocation:null===f||void 0===f?void 0:f.location})}),g&&(0,U.jsx)(Fe,{assetType:g}),p.partitionDefinition&&(0,U.jsx)(le.pC,{title:"Partitions",children:(0,U.jsxs)(b.x,{padding:{vertical:16,horizontal:24},flex:{direction:"column",gap:16},children:[(0,U.jsx)("p",{children:p.partitionDefinition.description}),(0,U.jsx)(Ie.m,{assetKey:p.assetKey,data:l})]})})]})},Fe=function(e){var n=e.assetType;return(0,U.jsx)(le.pC,{title:"Type",children:(0,U.jsx)(Ke.Ot,{type:n})})},Re=function(e){var n=e.assetKey,t=e.opName,i=e.repoAddress,r=(0,xe.ll)(n);return(0,U.jsxs)(b.x,{flex:{gap:4,direction:"column"},margin:{left:24,right:12,vertical:16},children:[(0,U.jsxs)(le.R8,{style:{marginBottom:0,display:"flex",justifyContent:"space-between",flexWrap:"wrap"},children:[(0,U.jsx)(b.x,{children:r}),r!==t?(0,U.jsxs)(b.x,{style:{opacity:.5},flex:{gap:6,alignItems:"center"},children:[(0,U.jsx)(ne.JO,{name:"op",size:16}),t]}):void 0]}),(0,U.jsxs)(b.x,{flex:{direction:"row",justifyContent:"space-between",alignItems:"center"},children:[(0,U.jsxs)(Ge,{to:(0,Ze.p)(n),children:["View in Asset Catalog ",(0,U.jsx)(ne.JO,{name:"open_in_new",color:v.w.Link})]}),i?(0,U.jsxs)(Ge,{to:(0,Te.$U)(i,"/graphs/".concat(t,"/").concat(r,"/")),children:["View Graph ",(0,U.jsx)(ne.JO,{name:"open_in_new",color:v.w.Link})]}):null]})]})},Ge=(0,f.ZP)(te.rU).withConfig({displayName:"SidebarAssetInfo__AssetCatalogLink",componentId:"qra0a8-0"})(["display:flex;gap:5px;padding:6px;margin:-6px;align-items:center;white-space:nowrap;"]),$e=(0,G.Ps)(o||(o=(0,F.Z)(["\n  fragment SidebarAssetFragment on AssetNode {\n    id\n    description\n    ...AssetNodeConfigFragment\n    metadataEntries {\n      ...MetadataEntryFragment\n    }\n    partitionDefinition {\n      description\n    }\n    assetKey {\n      path\n    }\n    op {\n      name\n      description\n      metadata {\n        key\n        value\n      }\n    }\n    opVersion\n    repository {\n      id\n      name\n      location {\n        id\n        name\n      }\n    }\n    requiredResources {\n      resourceKey\n    }\n\n    ...AssetNodeOpMetadataFragment\n  }\n\n  ","\n  ","\n  ","\n"])),re.r,ye.it,ae.Ws),Be=(0,G.Ps)(a||(a=(0,F.Z)(["\n  query SidebarAssetQuery($assetKey: AssetKeyInput!) {\n    assetNodeOrError(assetKey: $assetKey) {\n      __typename\n      ... on AssetNode {\n        id\n        ...SidebarAssetFragment\n      }\n    }\n  }\n\n  ","\n"])),$e),Ve=t(18819),Je=t(31522);var Ue=(0,G.Ps)(s||(s=(0,F.Z)(["\n  query AssetForNavigationQuery($key: AssetKeyInput!) {\n    assetOrError(assetKey: $key) {\n      __typename\n      ... on Asset {\n        id\n        definition {\n          id\n          opNames\n          jobNames\n          groupName\n          repository {\n            id\n            name\n            location {\n              id\n              name\n            }\n          }\n        }\n      }\n    }\n  }\n"]))),qe=t(64424),Qe=.6,He=.15,Ye=function(e){var n=(0,Ve.uc)(e.explorerPath.opsQuery,e.fetchOptions),t=n.fetchResult,i=n.assetGraphData,r=n.graphQueryItems,o=n.graphAssetKeys,a=n.allAssetKeys,s=n.applyingEmptyDefault,l=(0,qe.l)(o),c=l.liveDataByNode,d=l.liveDataRefreshState,u=l.runWatchers;return(0,U.jsx)(T.g,{allowStaleData:!0,queryResult:t,children:function(){return i&&a?(0,xe.vm)(i)?(0,U.jsx)(g.t,{icon:"error",title:"Cycle detected",description:"Assets dependencies form a cycle"}):(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(We,(0,p.Z)({assetGraphData:i,allAssetKeys:a,graphQueryItems:r,applyingEmptyDefault:s,liveDataRefreshState:d,liveDataByNode:c},e),e.explorerPath.pipelineName),u]}):(0,U.jsx)(g.t,{icon:"error",title:"Query Error"})}})},We=function(e){var n=e.options,t=e.setOptions,i=e.explorerPath,r=e.onChangeExplorerPath,o=e.onNavigateToSourceAssetNode,a=e.liveDataRefreshState,s=e.liveDataByNode,l=e.assetGraphData,f=e.graphQueryItems,m=e.applyingEmptyDefault,g=e.fetchOptions,w=e.fetchOptionFilters,N=function(){var e=(0,Je.x)();return E.useCallback(function(){var n=(0,d.Z)(h().mark((function n(t){var i,r,o;return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.query({query:Ue,variables:{key:t}});case 2:if(i=n.sent,"Asset"!==(null===(r=i.data)||void 0===r?void 0:r.assetOrError.__typename)||null===r||void 0===r||!r.assetOrError.definition){n.next=7;break}return o=r.assetOrError.definition,n.abrupt("return",{assetKey:t,opNames:o.opNames,jobName:o.jobNames.find((function(e){return!(0,xe.pv)(e)}))||null,groupName:o.groupName,repoAddress:o.repository?(0,J.kQ)(o.repository.name,o.repository.location.name):null});case 7:return n.abrupt("return",{assetKey:t,opNames:[],jobName:null,groupName:null,repoAddress:null});case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),[e])}(),k=(0,K.oJ)(l),T=k.layout,F=k.loading,R=k.async,G=E.useRef(),$=E.useState(null),B=(0,u.Z)($,2),V=B[0],Q=B[1],X=i.opNames[i.opNames.length-1].split(","),ee=Object.values(l.nodes).filter((function(e){return X.includes((0,xe.Je)(e.definition.assetKey))})),ne=ee[ee.length-1],te=ee.map((function(e){return e.definition})),ie=m?f.map((function(e){return e.node})):Object.values(l.nodes).map((function(e){return e.definition})),re=E.useCallback(function(){var e=(0,d.Z)(h().mark((function e(n,t,a){var s,d,u,f,m,g,x,y;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.stopPropagation(),s=(0,xe.Je)(t),d=null===a||void 0===a?void 0:a.definition){e.next=9;break}return e.t0=o,e.next=7,N(t);case 7:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 9:u=s,(n.shiftKey||n.metaKey)&&(f=[s],n.shiftKey&&ne&&a&&(m=nn({graph:l,from:ne,to:a})).length&&(f=m),g=i.opNames[0].split(","),u=(g.includes(s)?P()(g,s):C()([].concat((0,c.Z)(g),(0,c.Z)(f)))).join(",")),(x=null===T||void 0===T?void 0:T.nodes[u[u.length-1]])&&(null===(y=G.current)||void 0===y||y.zoomToSVGCoords(x.bounds.x,x.bounds.y,!0)),r((0,p.Z)((0,p.Z)({},i),{},{opNames:[u],opsQuery:d?i.opsQuery:"".concat(i.opsQuery,',++"').concat(s,'"++'),pipelineName:i.pipelineName}),"replace");case 14:case"end":return e.stop()}}),e)})));return function(n,t,i){return e.apply(this,arguments)}}(),[i,r,o,N,ne,l,T]),oe=E.useState(null),ae=(0,u.Z)(oe,2),se=ae[0],le=ae[1],ce=se!==T;E.useEffect((function(){ce&&T&&G.current&&(ne?G.current.focus():G.current.autocenter(!1),le(T))}),[ce,ne,T,G]);var de=!(!T||!Object.keys(T.groups).length);return(0,U.jsx)(x.OS,{identifier:"explorer",firstInitialPercent:70,firstMinSize:400,first:(0,U.jsxs)(y.S,{region:"graph",children:[0===f.length?(0,U.jsx)(D.LS,{nodeType:"asset",isGraph:!0}):m?(0,U.jsx)(D.K4,{nodeType:"asset"}):0===Object.keys(l.nodes).length?(0,U.jsx)(D.VQ,{nodeType:"asset"}):void 0,F||!T?(0,U.jsx)(D.W_,{async:R,nodeType:"asset"}):(0,U.jsx)(A.l,{ref:function(e){return G.current=e||void 0},interactor:A.l.Interactors.PanAndZoom,graphWidth:T.width,graphHeight:T.height,graphHasNoMinimumZoom:de,onClick:function(){return r((0,p.Z)((0,p.Z)({},i),{},{pipelineName:i.pipelineName,opNames:[]}),"replace")},onArrowKeyDown:function(e,n){if(T){var t=(0,p.Z)((0,p.Z)({},T),{},{nodes:S()(T.nodes,(function(e){var n;return!(null===(n=l.nodes[e.id])||void 0===n||!n.definition)}))}),i=(0,O.mh)(t,ne.id,n),r=i&&l.nodes[i];r&&G.current&&(re(e,r.assetKey,r),G.current.zoomToSVGBox(T.nodes[i].bounds,!0))}},onDoubleClick:function(e){var n;null===(n=G.current)||void 0===n||n.autocenter(!0),e.stopPropagation()},maxZoom:1.2,maxAutocenterZoom:1,children:function(e){var n=e.scale;return(0,U.jsxs)(Xe,{width:T.width,height:T.height,children:[(0,U.jsx)(L.i,{highlighted:V,edges:T.edges,strokeWidth:de?Math.max(4,3/n):4,baseColor:de&&n<He?v.w.Gray400:v.w.KeylineGray}),Object.values(T.groups).sort((function(e,n){return e.id.length-n.id.length})).map((function(e){return(0,U.jsx)("foreignObject",(0,p.Z)((0,p.Z)({},e.bounds),{},{onDoubleClick:function(n){if(G.current){var t=G.current.scaleForSVGBounds(e.bounds.width,e.bounds.height);G.current.zoomToSVGBox(e.bounds,!0,.9*t),n.stopPropagation()}},children:(0,U.jsx)(H.l,{group:e,scale:n})}),e.id)})),Object.values(T.nodes).map((function(e){var t=e.id,i=e.bounds,r=l.nodes[t],o=JSON.parse(t);if(!(de&&n<He))return(0,E.createElement)("foreignObject",(0,p.Z)((0,p.Z)({},i),{},{key:t,onMouseEnter:function(){return Q(t)},onMouseLeave:function(){return Q(null)},onClick:function(e){return re(e,{path:o},r)},onDoubleClick:function(e){var n;null===(n=G.current)||void 0===n||n.zoomToSVGBox(i,!0,1.2),e.stopPropagation()},style:{overflow:"visible"}}),r?n<Qe?(0,U.jsx)(Y.t$,{definition:r.definition,liveData:s[r.id],selected:ee.includes(r)}):(0,U.jsx)(Y.p4,{definition:r.definition,liveData:s[r.id],selected:ee.includes(r)}):(0,U.jsx)(W.w,{assetKey:{path:o}}))}))]})}}),t&&(0,U.jsx)(M.cY,{children:(0,U.jsx)(j.X,{format:"switch",label:"View as Asset Graph",checked:n.preferAssetRendering,onChange:function(){var e;r((0,p.Z)((0,p.Z)({},i),{},{opNames:(null===(e=te[0])||void 0===e?void 0:e.opNames)||[]}),"replace"),t((0,p.Z)((0,p.Z)({},n),{},{preferAssetRendering:!n.preferAssetRendering}))}})}),(0,U.jsx)(b.x,{flex:{direction:"column",alignItems:"flex-end",gap:8},style:{position:"absolute",right:12,top:8},children:(0,U.jsxs)(b.x,{flex:{alignItems:"center",gap:12},children:[(0,U.jsx)(_.xi,{refreshState:a,dataDescription:"materializations"}),(0,U.jsx)(Z.y,{preferredJobName:i.pipelineName,scope:te.length?{selected:te.filter((function(e){return e.isObservable}))}:{all:ie.filter((function(e){return e.isObservable}))}}),(0,U.jsx)(I.XE,{preferredJobName:i.pipelineName,liveDataForStale:s,scope:te.length?{selected:te}:{all:ie}})]})}),(0,U.jsxs)(M.U0,{children:[w,(0,U.jsx)(z.j,{items:f,value:i.opsQuery,placeholder:"Type an asset subset\u2026",onChange:function(e){return r((0,p.Z)((0,p.Z)({},i),{},{opsQuery:e}),"replace")},popoverPosition:"bottom-left"})]})]}),second:1===ee.length&&ee[0]?(0,U.jsx)(M.Ui,{children:(0,U.jsx)(M.zI,{children:(0,U.jsx)(y.S,{region:"asset sidebar",resetErrorOnChange:[ee[0].id],children:(0,U.jsx)(Le,{assetNode:ee[0],liveData:s[ee[0].id]})})})}):g.pipelineSelector?(0,U.jsx)(M.Ui,{children:(0,U.jsx)(M.zI,{children:(0,U.jsx)(y.S,{region:"asset job sidebar",children:(0,U.jsx)(q,{pipelineSelector:g.pipelineSelector})})})}):null})},Xe=f.ZP.svg.withConfig({displayName:"AssetGraphExplorer__SVGContainer",componentId:"hnrxmo-0"})(["overflow:visible;border-radius:0;"]),en=function(e){for(var n=e.graph,t=e.from,i=e.to,r=[t];r.length;){var o=r.pop(),a=(0,c.Z)(Object.keys(n.downstream[o.id]||{})).map((function(e){return n.nodes[e]})).filter(Boolean);if(a.some((function(e){return e.id===i.id})))return"downstream";r.push.apply(r,(0,c.Z)(a))}return"upstream"},nn=function e(n){var t=n.graph,i=n.from,r=n.to,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!i)return[];if(i.id===r.id)return(0,c.Z)(r.definition.opNames);if(0===o.length&&"upstream"===en({graph:t,from:i,to:r})){var a=[r,i];i=a[0],r=a[1]}var s,d=(0,c.Z)(Object.keys(t.downstream[i.id]||{})).map((function(e){return t.nodes[e]})).filter(Boolean),u=[],p=(0,l.Z)(d);try{for(p.s();!(s=p.n()).done;){var f=s.value;if(!o.includes(f.id)){var m=e({graph:t,from:f,to:r},[].concat((0,c.Z)(o),[i.id]));m.length&&u.push.apply(u,(0,c.Z)(i.definition.opNames).concat((0,c.Z)(m)))}}}catch(h){p.e(h)}finally{p.f()}return C()(u)}},9:function(e,n,t){t.d(n,{l:function(){return h}});var i=t(922),r=t(32030),o=t(12745),a=t(75497),s=t(7838),l=t(8546),c=(t(325),t(74549)),d=t(76341),u=t(37099),p=t(25582),f=t(35473),m=t(32289),h=function(e){var n=e.group,t=e.scale,i=n.repositoryLocationName,h=n.repositoryDisambiguationRequired,y=n.repositoryName,v=n.groupName;return(0,m.jsxs)("div",{style:{position:"relative",width:"100%",height:"100%"},children:[t>f.md&&(0,m.jsx)(r.x,{flex:{alignItems:"flex-end"},style:{height:70},children:(0,m.jsxs)(o.fv,{style:{fontWeight:600,userSelect:"none",fontSize:t>f.CZ?"16px":"32px",display:"flex",gap:6},children:[(0,m.jsx)(a.JO,{name:"asset_group",color:s.w.Gray400,size:t>f.CZ?20:48}),(0,m.jsxs)(r.x,{flex:{direction:"column"},children:[(0,m.jsx)(c.rU,{style:{color:s.w.Gray400},onClick:function(e){return e.stopPropagation()},to:(0,p.rO)(y,i,"/asset-groups/".concat(v)),children:v}),h&&(0,m.jsx)(x,{style:{marginBottom:"0.5em"},children:(0,d.R9)((0,u.At)(y,i),{maxLength:45})})]})]})}),(0,m.jsx)(g,{style:{inset:0,top:75,position:"absolute",background:t<f.md?"rgba(234, 234, 234, 1)":"rgba(217, 217, 217, 0.25)"}}),t<f.md?(0,m.jsx)(r.x,{flex:{justifyContent:"center",alignItems:"center"},style:{inset:0,position:"absolute",fontSize:"".concat(12/t,"px"),userSelect:"none"},children:(0,m.jsxs)(r.x,{flex:{direction:"column",alignItems:"center"},style:{fontWeight:600,fontFamily:l.b.monospace},children:[v,h&&(0,m.jsx)(x,{children:(0,d.R9)((0,u.At)(y,i),{maxLength:45})})]})}):void 0]})},g=i.ZP.div.withConfig({displayName:"AssetGroupNode__GroupOutline",componentId:"osbgfp-0"})(["width:100%;border-radius:10px;pointer-events:none;"]),x=i.ZP.div.withConfig({displayName:"AssetGroupNode__GroupRepoName",componentId:"osbgfp-1"})(["font-size:0.8em;line-height:0.6em;white-space:nowrap;color:",";"],s.w.Gray400)},11540:function(e,n,t){t.d(n,{zU:function(){return q},oR:function(){return U},p4:function(){return F},t$:function(){return J},D5:function(){return V}});var i,r,o=t(99500),a=t(922),s=t(3159),l=t(75497),c=t(32030),d=t(7838),u=t(34595),p=t(8546),f=t(11831),m=t(12745),h=t(90428),g=t.n(h),x=t(325),y=t(74549),v=t(76341),j=t(4445),b=t(6291),w=t(23300),S=t(79986),N=t(74948),C=t(77171),k=t(72572),P=t(68156),E=t(68436),_=t.n(E),I=t(67248),Z=t(58607),A=t(1962),K=t.n(A),O=(0,I.j)().use(Z.Z).use(K()),M=new(_())({max:500}),D=function(e){var n=M.get(e);if(n)return n;var t=O.processSync(e).toString().replace(/\\/g,"").trim();return M.set(e,t),t},z=t(79714),T=t(93523),L=t(32289),F=x.memo((function(e){var n=e.definition,t=e.selected,i=e.liveData,r=n.assetKey.path[n.assetKey.path.length-1],o=n.isSource;return(0,L.jsxs)(Q,{children:[(0,L.jsx)(R,{definition:n,liveData:i}),(0,L.jsx)(H,{$selected:t,children:(0,L.jsxs)(W,{$selected:t,$isSource:o,children:[(0,L.jsxs)(X,{$isSource:o,children:[(0,L.jsx)("span",{style:{marginTop:1},children:(0,L.jsx)(l.JO,{name:o?"source_asset":"asset"})}),(0,L.jsx)("div",{style:{overflow:"hidden",textOverflow:"ellipsis"},children:(0,v.R9)(r,{maxLength:T.ASSET_NODE_NAME_MAX_LENGTH})}),(0,L.jsx)("div",{style:{flex:1}})]}),(0,L.jsxs)(c.x,{style:{padding:"6px 8px"},flex:{direction:"column",gap:4},border:{side:"top",width:1,color:d.w.KeylineGray},children:[n.description?(0,L.jsx)(ie,{$color:d.w.Gray800,children:D(n.description).split("\n")[0]}):(0,L.jsx)(ie,{$color:d.w.Gray400,children:"No description"}),n.isPartitioned&&(0,L.jsx)(j.oS,{definition:n,liveData:i}),(0,L.jsx)(N.d9,{liveData:i,assetKey:n.assetKey,include:"self"})]}),o&&!n.isObservable?null:(0,L.jsx)($,{definition:n,liveData:i}),(0,L.jsx)(k.hG,{definition:n,style:{right:-2,paddingTop:7}})]})})]})}),g()),R=function(e){var n=e.definition,t=e.liveData;return(0,L.jsx)(c.x,{flex:{gap:4},padding:{left:4},style:{height:24},children:(0,L.jsx)(N.d9,{liveData:t,assetKey:n.assetKey,include:"upstream"})})},G=function(e){var n=e.background,t=e.children;return(0,L.jsx)(c.x,{padding:{horizontal:8},style:{borderBottomLeftRadius:6,borderBottomRightRadius:6,whiteSpace:"nowrap",lineHeight:"12px",fontSize:12,height:24},flex:{justifyContent:"space-between",alignItems:"center",gap:6},background:n,children:t})},$=function(e){var n=V(e),t=n.content,i=n.background;return(0,L.jsx)(G,{background:i,children:t})};function B(e){return(e.opNames.length?e.opNames[0]:null)||""}function V(e){var n=e.definition,t=e.liveData,i=e.expanded;if(!t)return{background:d.w.Gray100,border:d.w.Gray300,content:(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(u.$,{purpose:"caption-text"}),(0,L.jsx)("span",{style:{flex:1,color:d.w.Gray800},children:"Loading..."})]})};var r,o,a=t.lastMaterialization,s=t.runWhichFailedToMaterialize,c=t.inProgressRunIds,p=t.unstartedRunIds,f=c[0]||p[0],m=(0,S.Tx)(t);if(n.isSource)return f?{background:d.w.Gray100,border:d.w.Gray300,content:(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(z.a,{liveData:t}),(0,L.jsx)("span",{style:{flex:1},color:d.w.Gray800,children:"Observing..."}),i&&(0,L.jsx)(oe,{}),(0,L.jsx)(z.T,{runId:f})]})}:null!==t&&void 0!==t&&t.lastObservation?{background:d.w.Gray100,border:d.w.Gray300,content:(0,L.jsxs)(L.Fragment,{children:[i&&(0,L.jsx)(b.d,{status:[w.yo.MISSING]}),(0,L.jsx)("span",{children:"Observed"}),i&&(0,L.jsx)(oe,{}),(0,L.jsx)("span",{style:{textAlign:"right"},children:(0,L.jsx)(z.T,{runId:t.lastObservation.runId,event:{stepKey:B(n),timestamp:t.lastObservation.timestamp},children:(0,L.jsx)(P.v,{timestamp:Number(t.lastObservation.timestamp)/1e3,timeFormat:{showSeconds:!1,showTimezone:!1}})})})]})}:n.isObservable?{background:d.w.Gray100,border:d.w.Gray300,content:(0,L.jsxs)(L.Fragment,{children:[i&&(0,L.jsx)(l.JO,{name:"partition_missing",color:d.w.Gray300,style:{marginRight:-2},size:12}),(0,L.jsx)("span",{children:"Never observed"}),!i&&(0,L.jsx)("span",{children:"\u2013"})]})}:{background:d.w.Gray100,border:d.w.Gray300,content:(0,L.jsx)("span",{children:"\u2013"})};if(f)return{background:d.w.Blue50,border:d.w.Blue500,content:(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(z.a,{liveData:t}),(0,L.jsx)("span",{style:{flex:1},color:d.w.Gray800,children:1===(null===(r=t.partitionStats)||void 0===r?void 0:r.numMaterializing)?"Materializing 1 partition...":null!==(o=t.partitionStats)&&void 0!==o&&o.numMaterializing?"Materializing ".concat(t.partitionStats.numMaterializing," partitions..."):"Materializing..."}),i&&(0,L.jsx)(oe,{}),(0,L.jsx)(z.T,{runId:f})]})};if(t.partitionStats){var h=t.partitionStats,g=h.numPartitions,x=h.numMaterialized,v=h.numFailed,N=g-v-x,k=j.g8[m||v?w.yo.FAILED:N?w.yo.MISSING:w.yo.MATERIALIZED],E=k.background,_=k.foreground;return{background:E,border:k.border,content:(0,L.jsx)("span",{style:{color:_},children:(0,L.jsx)(y.rU,{to:(0,C.p)(n.assetKey,{view:"partitions"}),target:"_blank",rel:"noreferrer",children:m?(0,S.Dn)(t.freshnessInfo.currentMinutesLate):(0,j._e)(g)})})}}var I=a?(0,L.jsx)("span",{children:(0,L.jsx)(z.T,{runId:a.runId,event:{stepKey:B(n),timestamp:a.timestamp},children:(0,L.jsx)(P.v,{timestamp:Number(a.timestamp)/1e3,timeFormat:{showSeconds:!1,showTimezone:!1}})})}):void 0;return s||m?{background:d.w.Red50,border:d.w.Red500,content:(0,L.jsxs)(L.Fragment,{children:[i&&(0,L.jsx)(l.JO,{name:"partition_failure",color:d.w.Red500,style:{marginRight:-2},size:12}),(0,L.jsx)("span",{style:{color:d.w.Red700},children:s&&m?"Failed (Overdue)":m?(0,S.Dn)(t.freshnessInfo.currentMinutesLate):"Failed"}),i&&(0,L.jsx)(oe,{}),s?(0,L.jsx)("span",{children:(0,L.jsx)(z.T,{runId:s.id,children:(0,L.jsx)(P.v,{timestamp:Number(s.endTime),timeFormat:{showSeconds:!1,showTimezone:!1}})})}):I]})}:a?{background:d.w.Green50,border:d.w.Green500,content:(0,L.jsxs)(L.Fragment,{children:[i&&(0,L.jsx)(b.d,{status:[w.yo.MATERIALIZED]}),(0,L.jsx)("span",{style:{color:d.w.Green700},children:"Materialized"}),i&&(0,L.jsx)(oe,{}),I]})}:{background:d.w.Yellow50,border:d.w.Yellow500,content:(0,L.jsxs)(L.Fragment,{children:[i&&(0,L.jsx)(l.JO,{name:"partition_missing",color:d.w.Yellow500,style:{marginRight:-2},size:12}),(0,L.jsx)("span",{style:{color:d.w.Yellow700},children:"Never materialized"})]})}}var J=function(e){var n=e.selected,t=e.definition,i=e.liveData,r=t.isSource,o=t.assetKey,a=V({definition:t,liveData:i}),s=a.border,l=a.background,c=o.path[o.path.length-1];return(0,L.jsx)(Q,{children:(0,L.jsx)(ee,{$selected:n,children:(0,L.jsx)(re,{content:c,canShow:c.length>14,targetTagName:"div",position:"top",children:(0,L.jsxs)(ne,{$selected:n,$isSource:r,$background:l,$border:s,children:[(0,L.jsx)("div",{style:{position:"absolute",bottom:6,left:6},children:(0,L.jsx)(z.a,{liveData:i,purpose:"section"})}),(0,L.jsx)(te,{style:{fontSize:30},$isSource:r,children:(0,v.R9)(c,{maxLength:14})})]})})})})},U=(0,s.Ps)(i||(i=(0,o.Z)(["\n  fragment AssetNodeLiveFragment on AssetNode {\n    id\n    opNames\n    repository {\n      id\n    }\n    assetKey {\n      path\n    }\n    assetMaterializations(limit: 1) {\n      ...AssetNodeLiveMaterialization\n    }\n    freshnessPolicy {\n      ...AssetNodeLiveFreshnessPolicy\n    }\n    freshnessInfo {\n      ...AssetNodeLiveFreshnessInfo\n    }\n    assetObservations(limit: 1) {\n      ...AssetNodeLiveObservation\n    }\n    staleStatus\n    staleCauses {\n      key {\n        path\n      }\n      reason\n      category\n      dependency {\n        path\n      }\n    }\n    partitionStats {\n      numMaterialized\n      numMaterializing\n      numPartitions\n      numFailed\n    }\n  }\n\n  fragment AssetNodeLiveFreshnessPolicy on FreshnessPolicy {\n    maximumLagMinutes\n    cronSchedule\n    cronScheduleTimezone\n  }\n\n  fragment AssetNodeLiveFreshnessInfo on AssetFreshnessInfo {\n    currentMinutesLate\n  }\n\n  fragment AssetNodeLiveMaterialization on MaterializationEvent {\n    timestamp\n    runId\n  }\n\n  fragment AssetNodeLiveObservation on ObservationEvent {\n    timestamp\n    runId\n  }\n"]))),q=(0,s.Ps)(r||(r=(0,o.Z)(["\n  fragment AssetNodeFragment on AssetNode {\n    id\n    graphName\n    hasMaterializePermission\n    jobNames\n    opNames\n    opVersion\n    description\n    computeKind\n    isPartitioned\n    isObservable\n    isSource\n    assetKey {\n      ...AssetNodeKey\n    }\n  }\n\n  fragment AssetNodeKey on AssetKey {\n    path\n  }\n"]))),Q=a.ZP.div.withConfig({displayName:"AssetNode__AssetInsetForHoverEffect",componentId:"ja35mc-0"})(["padding:10px 4px 2px 4px;height:100%;& *:focus{outline:0;}"]),H=a.ZP.div.withConfig({displayName:"AssetNode__AssetNodeContainer",componentId:"ja35mc-1"})(["user-select:none;cursor:default;padding:4px;"]),Y=a.ZP.span.withConfig({displayName:"AssetNode__AssetNodeShowOnHover",componentId:"ja35mc-2"})(["display:none;"]),W=a.ZP.div.withConfig({displayName:"AssetNode__AssetNodeBox",componentId:"ja35mc-3"})(["",";",";background:",";border-radius:8px;position:relative;&:hover{box-shadow:rgba(0,0,0,0.12) 0px 2px 12px 0px;","{display:initial;}}"],(function(e){return e.$isSource?"border: 2px dashed ".concat(e.$selected?d.w.Gray600:d.w.Gray300):"border: 2px solid ".concat(e.$selected?d.w.Blue500:d.w.Blue200)}),(function(e){return e.$isSource?"outline: 3px solid ".concat(e.$selected?d.w.Gray300:"transparent"):"outline: 3px solid ".concat(e.$selected?d.w.Blue200:"transparent")}),d.w.White,Y),X=a.ZP.div.withConfig({displayName:"AssetNode__Name",componentId:"ja35mc-4"})(["display:flex;padding:3px 6px;background:",";font-family:",";border-top-left-radius:7px;border-top-right-radius:7px;font-weight:600;gap:4px;"],(function(e){return e.$isSource?d.w.Gray100:d.w.Blue50}),p.b.monospace),ee=(0,a.ZP)(H).withConfig({displayName:"AssetNode__MinimalAssetNodeContainer",componentId:"ja35mc-5"})(["padding-top:30px;padding-bottom:42px;height:100%;"]),ne=a.ZP.div.withConfig({displayName:"AssetNode__MinimalAssetNodeBox",componentId:"ja35mc-6"})(["background:",";",";",";border-radius:10px;position:relative;padding:4px;height:100%;min-height:46px;&:hover{box-shadow:rgba(0,0,0,0.12) 0px 2px 12px 0px;}"],(function(e){return e.$background}),(function(e){return e.$isSource?"border: 4px dashed ".concat(e.$selected?d.w.Gray500:e.$border):"border: 4px solid ".concat(e.$selected?d.w.Blue500:e.$border)}),(function(e){return e.$isSource?"outline: 8px solid ".concat(e.$selected?d.w.Gray300:"transparent"):"outline: 8px solid ".concat(e.$selected?d.w.Blue200:"transparent")})),te=(0,a.ZP)(X).withConfig({displayName:"AssetNode__MinimalName",componentId:"ja35mc-7"})(["font-weight:600;white-space:nowrap;position:absolute;background:none;top:50%;left:50%;transform:translate(-50%,-50%);"]),ie=a.ZP.div.withConfig({displayName:"AssetNode__Description",componentId:"ja35mc-8"})(["white-space:nowrap;overflow:hidden;text-overflow:ellipsis;color:",";font-size:12px;"],(function(e){return e.$color})),re=(0,a.ZP)(f.u).withConfig({displayName:"AssetNode__TooltipStyled",componentId:"ja35mc-9"})(["height:100%;"]),oe=function(){return(0,L.jsx)(m.uT,{color:d.w.KeylineGray,style:{marginLeft:-3,marginRight:-3},children:"\u2022"})}},79714:function(e,n,t){t.d(n,{a:function(){return c},T:function(){return d}});var i=t(11831),r=t(34595),o=t(12745),a=(t(325),t(74549)),s=t(55752),l=t(32289),c=function(e){var n,t,o=e.liveData,a=e.purpose,s=void 0===a?"body-text":a;return null!==o&&void 0!==o&&null!==(n=o.inProgressRunIds)&&void 0!==n&&n.length?(0,l.jsx)(i.u,{content:"A run is currently rematerializing this asset.",children:(0,l.jsx)(r.$,{purpose:s})}):null!==o&&void 0!==o&&null!==(t=o.unstartedRunIds)&&void 0!==t&&t.length?(0,l.jsx)(i.u,{content:"A run has started that will rematerialize this asset soon.",children:(0,l.jsx)(r.$,{purpose:s,stopped:!0})}):null},d=function(e){var n=e.runId,t=e.children,i=e.event;return(0,l.jsx)(a.rU,{to:i?(0,s.tA)({runId:n},i):"/runs/".concat(n),target:"_blank",rel:"noreferrer",children:t||(0,l.jsx)(o.aU,{children:(0,s.EI)({runId:n})})})}},38376:function(e,n,t){t.d(n,{w:function(){return u}});var i=t(922),r=t(75497),o=t(7838),a=t(8546),s=t(325),l=t(76341),c=t(93523),d=t(32289),u=s.memo((function(e){var n=e.assetKey,t=n.path[n.path.length-1];return(0,d.jsxs)(p,{children:[(0,d.jsx)(r.JO,{name:"open_in_new",color:o.w.Link}),(0,d.jsx)("span",{className:"label",title:t,children:(0,l.R9)(t,{maxLength:c.ASSET_LINK_NAME_MAX_LENGTH})})]})})),p=i.ZP.div.withConfig({displayName:"ForeignNode__AssetNodeLinkContainer",componentId:"f3rzsb-0"})(["display:flex;padding:4px 8px 6px;margin-top:26px;line-height:30px;font-family:",";color:",";align-items:center;font-weight:600;gap:4px;&:hover .label{color:",";text-decoration:underline;}"],a.b.monospace,o.w.Link,o.w.Link)},18819:function(e,n,t){t.d(n,{uc:function(){return v},BK:function(){return w}});var i,r=t(99500),o=t(59019),a=t(47427),s=t(73701),l=t(3159),c=t(21663),d=t.n(c),u=t(18961),p=t.n(u),f=t(24083),m=t.n(f),h=t(325),g=t(25496),x=t(11540),y=t(39061);function v(e,n){var t,i=(0,s.a)(S,{notifyOnNetworkStatusChange:!0,variables:{pipelineSelector:n.pipelineSelector,groupSelector:n.groupSelector}}),r=null===(t=i.data)||void 0===t?void 0:t.assetNodes,o=h.useMemo((function(){if(void 0===r)return{graphAssetKeys:[],graphQueryItems:[],assetGraphData:null,applyingEmptyDefault:!1};var t=r;n.hideNodesMatching&&(t=m()(t,n.hideNodesMatching));var i=j(t),o=(0,g.V)(i,e),a=o.all,s=o.applyingEmptyDefault,l=(0,y.VZ)(a.map((function(e){return e.node})));return n.hideEdgesToNodesOutsideQuery&&b(l,r),{allAssetKeys:t.map((function(e){return e.assetKey})),graphAssetKeys:a.map((function(e){return{path:e.node.assetKey.path}})),assetGraphData:l,graphQueryItems:i,applyingEmptyDefault:s}}),[r,e,n.hideEdgesToNodesOutsideQuery,n.hideNodesMatching]);return{fetchResult:i,assetGraphData:o.assetGraphData,graphQueryItems:o.graphQueryItems,graphAssetKeys:o.graphAssetKeys,allAssetKeys:o.allAssetKeys,applyingEmptyDefault:o.applyingEmptyDefault}}var j=function(e){var n,t={},i=(0,a.Z)(e);try{for(i.s();!(n=i.n()).done;){var r=n.value,o=(0,y.Je)(r.assetKey);t[o]={node:r,name:o,inputs:r.dependencyKeys.map((function(e){return{dependsOn:[{solid:{name:(0,y.Je)(e)}}]}})),outputs:r.dependedByKeys.map((function(e){return{dependedBy:[{solid:{name:(0,y.Je)(e)}}]}}))}}}catch(s){i.e(s)}finally{i.f()}return Object.values(t)},b=function(e,n){for(var t=d()(n,(function(e){return(0,y.Wu)(e.assetKey)})),i=function(e){return!!t[e]},r=0,o=Object.keys(e.upstream);r<o.length;r++)for(var a=o[r],s=0,l=Object.keys(e.upstream[a]);s<l.length;s++){var c=l[s];!e.nodes[c]&&i(a)&&(delete e.upstream[a][c],delete e.downstream[c][a])}for(var u=0,p=Object.keys(e.downstream);u<p.length;u++)for(var f=p[u],m=0,h=Object.keys(e.downstream[f]);m<h.length;m++){var g=h[m];!e.nodes[g]&&i(f)&&(delete e.upstream[g][f],delete e.downstream[f][g])}},w=function(e,n){var t=p()(e,(function(e){return e.name})),i=t[(0,y.Je)(n)];if(!i)return{upstream:0,downstream:0};return{upstream:function e(n,i){var r=t[n].inputs.flatMap((function(e){return e.dependsOn.map((function(e){return e.solid.name}))})).filter((function(e){return e!==n}));return Math.max.apply(Math,[i].concat((0,o.Z)(r.map((function(n){return e(n,i+1)})))))}(i.name,0),downstream:function e(n,i){var r=t[n].outputs.flatMap((function(e){return e.dependedBy.map((function(e){return e.solid.name}))})).filter((function(e){return e!==n}));return Math.max.apply(Math,[i].concat((0,o.Z)(r.map((function(n){return e(n,i+1)})))))}(i.name,0)}},S=(0,l.Ps)(i||(i=(0,r.Z)(["\n  query AssetGraphQuery($pipelineSelector: PipelineSelector, $groupSelector: AssetGroupSelector) {\n    assetNodes(pipeline: $pipelineSelector, group: $groupSelector) {\n      id\n      ...AssetNodeForGraphQuery\n    }\n  }\n\n  fragment AssetNodeForGraphQuery on AssetNode {\n    id\n    groupName\n    hasMaterializePermission\n    repository {\n      id\n      name\n      location {\n        id\n        name\n      }\n    }\n    dependencyKeys {\n      path\n    }\n    dependedByKeys {\n      path\n    }\n    ...AssetNodeFragment\n  }\n\n  ","\n"])),x.zU)},64424:function(e,n,t){t.d(n,{l:function(){return b},m:function(){return S}});var i,r,o,a=t(99500),s=t(59019),l=t(73701),c=t(38565),d=t(70157),u=t(3159),p=t(58891),f=t.n(p),m=t(325),h=t(19102),g=t(55752),x=t(11540),y=t(39061),v=t(32289),j=2e3;function b(e){var n=(0,l.a)(N,{skip:0===e.length,variables:{assetKeys:e},notifyOnNetworkStatusChange:!0}),t=m.useMemo((function(){return n.data?(0,y.Qg)(n.data):{}}),[n.data]),i=m.useRef(!1);i.current=[c.I.refetch,c.I.loading].includes(n.networkStatus);var r=m.useRef(null),o=m.useCallback((function(){var e=n.refetch;r.current||(r.current=setTimeout((function n(){i.current?r.current=setTimeout(n,j):(r.current=null,e())}),j))}),[r,n.refetch]);m.useEffect((function(){return function(){r.current&&clearTimeout(r.current)}}),[]);var a=(0,h.C4)(n,3e4);(0,g.Qs)(n.refetch,j);var d=m.useMemo((function(){return new Set(e.map(y.Je))}),[e]),u=m.useMemo((function(){var e;return new Set((null===(e=n.data)||void 0===e?void 0:e.assetNodes.flatMap((function(e){return e.opNames})))||[])}),[n]),p=f()(Object.values(t).flatMap((function(e){return[].concat((0,s.Z)(e.unstartedRunIds),(0,s.Z)(e.inProgressRunIds))}))).sort().slice(0,3);return{liveDataByNode:t,liveDataRefreshState:a,runWatchers:(0,v.jsx)(v.Fragment,{children:p.map((function(e){return(0,v.jsx)(w,{runId:e,assetKeyTokens:d,assetStepKeys:u,callback:o},e)}))}),assetKeys:e}}var w=m.memo((function(e){var n=e.runId,t=e.assetKeyTokens,i=e.assetStepKeys,r=e.callback,o=m.useRef(0);return m.useEffect((function(){return console.log("Subscribed to ".concat(n)),function(){return console.log("Unsubscribed from ".concat(n," after ").concat(o.current," messages"))}}),[n]),(0,d.m)(C,{fetchPolicy:"no-cache",variables:{runId:n},onSubscriptionData:function(e){var n,a=null===(n=e.subscriptionData.data)||void 0===n?void 0:n.pipelineRunLogs;"PipelineRunLogsSubscriptionSuccess"===(null===a||void 0===a?void 0:a.__typename)&&(o.current+=a.messages.length,a.messages.some((function(e){return"AssetMaterializationPlannedEvent"===e.__typename||"MaterializationEvent"===e.__typename||"ObservationEvent"===e.__typename?e.assetKey&&t.has((0,y.Je)(e.assetKey)):("ExecutionStepFailureEvent"===e.__typename||"ExecutionStepStartEvent"===e.__typename)&&(e.stepKey&&i.has(e.stepKey))}))&&r())}}),(0,v.jsx)("span",{})})),S=(0,u.Ps)(i||(i=(0,a.Z)(["\n  fragment AssetLatestInfoFragment on AssetLatestInfo {\n    assetKey {\n      path\n    }\n    unstartedRunIds\n    inProgressRunIds\n    latestRun {\n      id\n      ...AssetLatestInfoRun\n    }\n  }\n\n  fragment AssetLatestInfoRun on Run {\n    status\n    endTime\n    id\n  }\n"]))),N=(0,u.Ps)(r||(r=(0,a.Z)(["\n  query AssetGraphLiveQuery($assetKeys: [AssetKeyInput!]!) {\n    assetNodes(assetKeys: $assetKeys, loadMaterializations: true) {\n      id\n      ...AssetNodeLiveFragment\n    }\n    assetsLatestInfo(assetKeys: $assetKeys) {\n      ...AssetLatestInfoFragment\n    }\n  }\n\n  ","\n  ","\n"])),x.oR,S),C=(0,u.Ps)(o||(o=(0,a.Z)(['\n  subscription AssetLiveRunLogsSubscription($runId: ID!) {\n    pipelineRunLogs(runId: $runId, cursor: "HEAD") {\n      __typename\n      ... on PipelineRunLogsSubscriptionSuccess {\n        messages {\n          __typename\n          ... on AssetMaterializationPlannedEvent {\n            assetKey {\n              path\n            }\n          }\n          ... on MaterializationEvent {\n            assetKey {\n              path\n            }\n          }\n          ... on ObservationEvent {\n            assetKey {\n              path\n            }\n          }\n          ... on ExecutionStepStartEvent {\n            stepKey\n          }\n          ... on ExecutionStepFailureEvent {\n            stepKey\n          }\n        }\n      }\n    }\n  }\n'])))},34449:function(e,n,t){t.d(n,{r:function(){return s}});var i,r=t(99500),o=t(3159),a=t(33774),s=(0,o.Ps)(i||(i=(0,r.Z)(["\n  fragment AssetNodeConfigFragment on AssetNode {\n    id\n    configField {\n      name\n      isRequired\n      configType {\n        ...ConfigTypeSchemaFragment\n        recursiveConfigTypes {\n          ...ConfigTypeSchemaFragment\n        }\n      }\n    }\n  }\n\n  ","\n"])),a.S)},61460:function(e,n,t){t.d(n,{a:function(){return g},N:function(){return x}});var i,r=t(99500),o=t(73701),a=t(3159),s=t(32030),l=t(7838),c=t(60736),d=t(60652),u=(t(325),t(14156)),p=t(39061),f=t(37099),m=t(33902),h=t(32289),g="Multiple asset definitions found",x=function(e){var n=e.assetKey,t=e.loadedFromRepo,i=e.padded,r=(0,o.a)(y,{variables:{assetKeys:[{path:n.path}]}}).data,a=null===r||void 0===r?void 0:r.assetNodeDefinitionCollisions[0];if(!a)return(0,h.jsx)("span",{});var x=a.repositories.map((function(e){return(0,m.Uz)({name:e.name,location:e.location.name})}));return(0,h.jsx)(s.x,{padding:i?{vertical:16,left:24,right:12}:{},border:{side:"bottom",width:1,color:l.w.KeylineGray},children:(0,h.jsx)(c.b,{intent:"warning",title:g,description:(0,h.jsxs)(h.Fragment,{children:["This asset was loaded from"," ",(0,f.At)(t.name,t.location),", but duplicate definitions were found in"," ",(0,h.jsxs)(d.Z,{underline:"always",color:l.w.Yellow700,onClick:function(){return(0,u._)({title:g,body:(0,h.jsxs)(h.Fragment,{children:["Code locations containing an asset definition for"," ",(0,h.jsx)("strong",{children:(0,p.ll)(n)}),":",(0,h.jsx)("ul",{children:x.map((function(e){return(0,h.jsx)("li",{children:e},e)}))})]})})},children:[x.length-1," other repo",2===x.length?"":"s"]}),". You should rename these assets to avoid collisions."]})})})},y=(0,a.Ps)(i||(i=(0,r.Z)(["\n  query AssetDefinitionCollisionQuery($assetKeys: [AssetKeyInput!]!) {\n    assetNodeDefinitionCollisions(assetKeys: $assetKeys) {\n      assetKey {\n        path\n      }\n      repositories {\n        id\n        name\n        location {\n          id\n          name\n        }\n      }\n    }\n  }\n"])))},6596:function(e,n,t){t.d(n,{cJ:function(){return x},Qe:function(){return y},gC:function(){return v}});var i=t(922),r=t(32030),o=t(7838),a=t(75497),s=t(54268),l=t(12745),c=t(519),d=t(325),u=t(55419),p=t(79714),f=t(59549),m=t(55752),h=t(3580),g=t(32289),x=function(e){var n=e.groups,t=e.focused,i=e.setFocused,a=e.xAxis,s=d.useRef(null),l=d.useRef(null),u=(0,c.useVirtualizer)({count:n.length,getScrollElement:function(){return s.current},estimateSize:function(){return 80},overscan:10}),p=u.getTotalSize(),f=u.getVirtualItems();return d.useEffect((function(){if(l.current){var e=l.current;e&&e instanceof HTMLElement&&"scrollIntoView"in e&&e.scrollIntoView({block:"nearest"})}}),[t]),(0,g.jsx)(y,{ref:s,children:(0,g.jsx)(h.Nh,{$totalHeight:p,children:f.map((function(e){var s=e.index,c=e.key,d=e.size,u=e.start,p=n[s];return(0,g.jsx)(v,{$height:d,$start:u,$focused:p===t,ref:p===t?l:void 0,onClick:function(e){e.target instanceof HTMLElement&&e.target.closest("a")||null===i||void 0===i||i(t!==p?p:void 0)},children:(0,g.jsx)(r.x,{style:{height:d},padding:{left:24,right:12},flex:{direction:"column",justifyContent:"center",gap:8},border:{side:"bottom",width:1,color:o.w.KeylineGray},children:"partition"===a?(0,g.jsx)(j,{group:p}):(0,g.jsx)(b,{group:p})})},c)}))})})},y=(0,i.ZP)(h.W2).withConfig({displayName:"AssetEventList__AssetListContainer",componentId:"y5fuyp-0"})(["outline:none;&:focus{box-shadow:0 -1px ",";}"],o.w.Blue500),v=(0,i.ZP)(h.X2).withConfig({displayName:"AssetEventList__AssetListRow",componentId:"y5fuyp-1"})(["cursor:pointer;user-select:none;:focus,:active,:hover{outline:none;background:",";}",""],o.w.Gray100,(function(e){return e.$focused&&"background: ".concat(o.w.Blue50,";\n     color: ").concat(o.w.Blue700,";\n     :hover {\n       background: ").concat(o.w.Blue50,";\n     }\n    ")})),j=function(e){var n=e.group,t=n.partition,i=n.latest,c=n.timestamp;return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)(r.x,{flex:{gap:4,direction:"row",alignItems:"flex-start"},children:[(0,g.jsx)(a.JO,{name:"partition"}),t,(0,g.jsx)("div",{style:{flex:1}}),i?(0,g.jsx)(s.V,{intent:"success",children:"Materialized"}):(0,g.jsx)(s.V,{intent:"none",children:"Missing"})]}),(0,g.jsx)(l.YS,{color:o.w.Gray600,style:{userSelect:"none"},children:c?(0,g.jsxs)("span",{children:["Materialized ",(0,g.jsx)(u.E,{timestamp:{ms:Number(c)}})]}):"Never materialized"})]})},b=function(e){var n=e.group,t=n.latest,i=n.partition,o=n.timestamp,l="Run"===(null===t||void 0===t?void 0:t.runOrError.__typename)?t.runOrError:null;return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)(r.x,{flex:{gap:4,direction:"row"},children:["MaterializationEvent"===(null===t||void 0===t?void 0:t.__typename)?(0,g.jsx)(a.JO,{name:"materialization"}):(0,g.jsx)(a.JO,{name:"observation"}),(0,g.jsx)(u.E,{timestamp:{ms:Number(o)}})]}),(0,g.jsxs)(r.x,{flex:{gap:4,direction:"row"},children:[i&&(0,g.jsx)(s.V,{children:i}),t&&l&&(0,g.jsx)(s.V,{children:(0,g.jsx)(p.T,{runId:l.runId,event:{stepKey:t.stepKey,timestamp:t.timestamp},children:(0,g.jsxs)(r.x,{flex:{gap:4,direction:"row",alignItems:"center"},children:[(0,g.jsx)(f.hk,{runId:l.runId,status:l.status,size:8}),(0,m.EI)(l)]})})})]})]})}},91847:function(e,n,t){t.d(n,{M:function(){return h}});var i=t(59019),r=t(19065),o=t(922),a=t(12745),s=t(60652),l=t(32030),c=t(75497),d=t(7838),u=(t(325),t(76314)),p=t(28064),f=t(32289),m=[p.H.AssetEventDataVersion.valueOf(),p.H.AssetEventDataVersionDeprecated.valueOf(),p.H.AssetEventCodeVersion.valueOf()],h=function(e){var n=e.event,t=e.paddingLeft,o=e.collapsible,d=(0,u.U)("show-asset-system-tags",Boolean),h=(0,r.Z)(d,2),x=h[0],y=h[1];return o&&!x?(0,f.jsx)(a.YS,{children:(0,f.jsx)(s.Z,{onClick:function(){return y(!0)},children:(0,f.jsxs)(l.x,{flex:{alignItems:"center"},children:[(0,f.jsxs)("span",{children:["Show tags (",(null===n||void 0===n?void 0:n.tags.length)||0,")"]}),(0,f.jsx)(c.JO,{name:"arrow_drop_down",style:{transform:"rotate(0deg)"}})]})})}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(g,{children:(0,f.jsx)("tbody",{children:null!==n&&void 0!==n&&n.tags.length?(0,i.Z)(n.tags).sort((function(e,n){return m.indexOf(n.key)-m.indexOf(e.key)})).map((function(e){return(0,f.jsxs)("tr",{children:[(0,f.jsx)("td",{style:{paddingLeft:t},children:(0,f.jsx)(a.fv,{children:e.key.replace(p.H.Namespace,"")})}),(0,f.jsx)("td",{children:e.value})]},e.key)})):(0,f.jsx)("tr",{children:(0,f.jsx)("td",{style:{paddingLeft:t},children:"No tags to display."})})})}),o&&(0,f.jsx)(a.YS,{children:(0,f.jsx)(s.Z,{onClick:function(){return y(!1)},children:(0,f.jsxs)(l.x,{flex:{alignItems:"center"},children:[(0,f.jsx)("span",{children:"Hide tags"}),(0,f.jsx)(c.JO,{name:"arrow_drop_down",style:{transform:"rotate(180deg)"}})]})})})]})},g=o.ZP.table.withConfig({displayName:"AssetEventSystemTags__AssetEventSystemTagsTable",componentId:"sc-186zkuz-0"})(["width:100%;border-spacing:0;border-collapse:collapse;tr td:first-child{max-width:300px;word-wrap:break-word;width:25%;}tr td{border:1px solid ",";padding:8px 12px;font-size:14px;vertical-align:top;}"],d.w.KeylineGray)},52598:function(e,n,t){t.d(n,{i:function(){return x},Q:function(){return y}});var i,r=t(99500),o=t(19065),a=t(59019),s=t(3159),l=t(32030),c=t(11831),d=t(60652),u=t(325),p=t(74549),f=t(55419),m=t(77171),h=t(32289),g=function(e){var n=e.lineage_info,t=e.timestamp,i=1===n.partitions.length?"Partition":"Partitions",r=n.partitions.map((function(e){return'"'.concat(e,'"')})).join(", "),o=(0,m.p)(n.assetKey,{asOf:t});return(0,h.jsxs)(l.x,{margin:{bottom:4},children:[n.partitions.length>0?"".concat(i," ").concat(r," of "):"",(0,h.jsx)(c.u,{content:(0,h.jsxs)(h.Fragment,{children:["View snapshot as of"," ",(0,h.jsx)(f.E,{timestamp:{ms:Number(t)},timeFormat:{showSeconds:!0,showTimezone:!0}})]}),modifiers:{offset:{enabled:!0,options:{offset:[0,16]}}},placement:"right",children:(0,h.jsx)(p.rU,{to:o,children:(0,h.jsx)(l.x,{flex:{display:"inline-flex",alignItems:"center"},children:n.assetKey.path.map((function(e,n){return(0,h.jsx)("span",{children:e},n)})).reduce((function(e,n,t){return[].concat((0,a.Z)(e),[t>0?(0,h.jsxs)(u.Fragment,{children:["\xa0",">","\xa0"]},"".concat(t,"-space")):null,n])}),[])})})})]})},x=function(e){var n=e.elements,t=e.timestamp,i=u.useState(!0),r=(0,o.Z)(i,2),a=r[0],s=r[1];return(0,h.jsxs)("div",{children:[n.length>5&&(0,h.jsx)(d.Z,{onClick:function(){return s(!a)},children:a?"Show More":"Show Less"}),(a?n.slice(n.length-5):n).map((function(e,n){return(0,h.jsx)(g,{lineage_info:e,timestamp:t},n)}))]})},y=(0,s.Ps)(i||(i=(0,r.Z)(["\n  fragment AssetLineageFragment on AssetLineageInfo {\n    assetKey {\n      path\n    }\n    partitions\n  }\n"])))},4041:function(e,n,t){t.d(n,{l:function(){return y}});var i=t(47427),r=t(59019),o=t(19065),a=t(32030),s=t(7838),l=t(12745),c=t(89646),d=t(75453),u=t(62816),p=t.n(u),f=t(58891),m=t.n(f),h=t(325),g=t(55853),x=t(32289),y=function(e){var n=h.useState(null),t=(0,o.Z)(n,2),i=t[0],u=t[1],p=h.useMemo((function(){return(0,r.Z)(e.groups).reverse()}),[e.groups]),f=v(p,e.xAxis),m=Object.keys(f).slice(0,20).sort();return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{style:{display:"grid",gridTemplateColumns:"1fr ".repeat(e.columnCount||2),justifyContent:"stretch"},children:m.map((function(n){return(0,x.jsx)(a.x,{style:{width:"100%"},border:{side:"bottom",width:1,color:s.w.KeylineGray},children:(0,x.jsxs)(a.x,{style:{width:"100%"},border:{side:"right",width:1,color:s.w.KeylineGray},children:[e.asSidebarSection?(0,x.jsx)(a.x,{padding:{horizontal:24,top:8},flex:{justifyContent:"space-between"},children:(0,x.jsx)(l.YS,{style:{fontWeight:700},children:n})}):(0,x.jsx)(a.x,{padding:{horizontal:24,vertical:16},border:{side:"bottom",width:1,color:s.w.KeylineGray},flex:{justifyContent:"space-between"},children:(0,x.jsx)(l.pm,{children:n})}),(0,x.jsx)(a.x,{padding:{horizontal:24,vertical:16},children:(0,x.jsx)(g.K,{label:n,width:"100%",data:f[n],xHover:i,onHoverX:function(e){return e!==i&&u(e)}})})]})},n)}))}),0===m.length?e.asSidebarSection?(0,x.jsx)(a.x,{margin:{horizontal:24,vertical:12},style:{color:s.w.Gray500,fontSize:"0.8rem"},children:"No numeric metadata entries available to be graphed."}):(0,x.jsx)(a.x,{padding:{horizontal:24,top:64},children:(0,x.jsx)(c.t,{shrinkable:!0,icon:"asset_plot",title:"Asset plots are automatically generated by metadata",description:"Include numeric metadata entries in your materializations and observations to see data graphed by time or partition.",action:(0,x.jsx)(d.fr,{href:"https://docs.dagster.io/concepts/assets/software-defined-assets#recording-materialization-metadata",children:"View documentation"})})}):"partition"===e.xAxis&&(0,x.jsx)(a.x,{padding:{vertical:16,horizontal:24},style:{color:s.w.Gray400},children:"When graphing values by partition, the highest data point for each materialized event label is displayed."})]})},v=function(e,n){var t,o={},a=m()(p()(e,(function(e){var n;return((null===(n=e.latest)||void 0===n?void 0:n.metadataEntries)||[]).filter((function(e){return["IntMetadataEntry","FloatMetadataEntry"].includes(e.__typename)})).map((function(e){return e.label}))}))),s=function(e,t){var i=t.x,r=t.y;if(o[e]=o[e]||{minX:0,maxX:0,minY:0,maxY:0,values:[],xAxis:n},"partition"===n){var a=o[e].values.find((function(e){return e.x===i}));if(a)return void(isNaN(r)||(a.y=r))}o[e].values.push({xNumeric:"number"===typeof i?i:o[e].values.length,x:i,y:r})},l=(0,i.Z)(e);try{for(l.s();!(t=l.n()).done;){var c=t.value,d=c.partition,u=c.latest,f=("partition"===n?d:Number(null===u||void 0===u?void 0:u.timestamp))||null;if(null!==f){var h,g=(0,i.Z)(a);try{var x=function(){var e=h.value,n=null===u||void 0===u?void 0:u.metadataEntries.find((function(n){return n.label===e}));if(!n)return s(e,{x:f,y:NaN}),"continue";var t=NaN;"IntMetadataEntry"===n.__typename&&(t=null!==n.intValue?n.intValue:parseInt(n.intRepr)),"FloatMetadataEntry"===n.__typename&&null!==n.floatValue&&(t=n.floatValue),s(e,{x:f,y:t})};for(g.s();!(h=g.n()).done;)x()}catch(S){g.e(S)}finally{g.f()}}}}catch(S){l.e(S)}finally{l.f()}for(var y=0,v=Object.values(o);y<v.length;y++){var j=v[y],b=j.values.map((function(e){return e.xNumeric})),w=j.values.map((function(e){return e.y})).filter((function(e){return!isNaN(e)}));j.minXNumeric=Math.min.apply(Math,(0,r.Z)(b)),j.maxXNumeric=Math.max.apply(Math,(0,r.Z)(b)),j.minY=Math.min.apply(Math,(0,r.Z)(w)),j.maxY=Math.max.apply(Math,(0,r.Z)(w))}return o}},7713:function(e,n,t){t.d(n,{U6:function(){return u},mQ:function(){return p},Ws:function(){return f}});var i,r=t(99500),o=t(3159),a=t(32030),s=t(57753),l=(t(325),t(33208)),c=t(4735),d=t(32289),u=function(e){return{assetType:e.type?e.type:void 0,assetMetadata:e.metadataEntries||[]}},p=function(e){var n=e.assetMetadata,t=e.repoLocation,i=n.map((function(e){return{key:e.label,value:(0,d.jsx)(c.BL,{entry:e,repoLocation:t})}}));return(0,d.jsx)(a.x,{padding:{vertical:16,horizontal:24},children:(0,d.jsx)(s.nZ,{rows:i})})},f=(0,o.Ps)(i||(i=(0,r.Z)(["\n  fragment AssetNodeOpMetadataFragment on AssetNode {\n    id\n    metadataEntries {\n      ...MetadataEntryFragment\n    }\n    type {\n      ...DagsterTypeFragment\n    }\n  }\n\n  ","\n  ","\n"])),c.it,l.rB)},4445:function(e,n,t){t.d(n,{_e:function(){return p},g8:function(){return m},oS:function(){return h},ux:function(){return x}});var i,r=t(16798),o=t(922),a=t(7838),s=t(32030),l=t(11831),c=t(75497),d=(t(325),t(23300)),u=t(32289),p=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return"".concat(void 0===e?"-":e.toLocaleString()," ").concat(n).concat(n?" ":"").concat(1===e?"partition":"partitions")},f=function(e){return e?e.numPartitions-e.numFailed-e.numMaterializing-e.numMaterialized:void 0},m=(i={},(0,r.Z)(i,d.yo.FAILED,{background:a.w.Red50,foreground:a.w.Red700,border:a.w.Red500,icon:"partition_failure",adjective:"failed"}),(0,r.Z)(i,d.yo.MATERIALIZED,{background:a.w.Green50,foreground:a.w.Green700,border:a.w.Green500,icon:"partition_success",adjective:"materialized"}),(0,r.Z)(i,d.yo.MATERIALIZING,{background:a.w.Blue50,foreground:a.w.Blue700,border:a.w.Blue500,icon:"partition_success",adjective:"materializing"}),(0,r.Z)(i,d.yo.MISSING,{background:a.w.Gray100,foreground:a.w.Gray900,border:a.w.Gray500,icon:"partition_missing",adjective:"missing"}),i),h=function(e){var n,t=null===(n=e.liveData)||void 0===n?void 0:n.partitionStats;return(0,u.jsxs)(s.x,{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:2},children:[(0,u.jsx)(g,{status:d.yo.MATERIALIZED,value:null===t||void 0===t?void 0:t.numMaterialized,total:null===t||void 0===t?void 0:t.numPartitions}),(0,u.jsx)(g,{status:d.yo.MISSING,value:f(t),total:null===t||void 0===t?void 0:t.numPartitions}),(0,u.jsx)(g,{status:d.yo.FAILED,value:null===t||void 0===t?void 0:t.numFailed,total:null===t||void 0===t?void 0:t.numPartitions})]})},g=function(e){var n=e.status,t=e.value,i=e.total,r=m[n],o=t?r.foreground:a.w.Gray500,s=t?r.background:a.w.Gray50;return(0,u.jsx)(l.u,{display:"block",position:"top",canShow:void 0!==t,content:p(t,r.adjective),children:(0,u.jsxs)(v,{style:{color:o,background:s},children:[(0,u.jsx)(c.JO,{name:r.icon,color:o,size:12}),void 0===t?"\u2014":t===i?"All":t>1e3?"999+":t]})})},x=function(e){var n=e.partitionStats;return(0,u.jsxs)(s.x,{style:{display:"flex",gap:8},children:[(0,u.jsx)(y,{status:d.yo.MATERIALIZED,value:null===n||void 0===n?void 0:n.numMaterialized,total:null===n||void 0===n?void 0:n.numPartitions}),(0,u.jsx)(y,{status:d.yo.MISSING,value:f(n),total:null===n||void 0===n?void 0:n.numPartitions}),(0,u.jsx)(y,{status:d.yo.FAILED,value:null===n||void 0===n?void 0:n.numFailed,total:null===n||void 0===n?void 0:n.numPartitions}),(0,u.jsx)(y,{status:d.yo.MATERIALIZING,value:null===n||void 0===n?void 0:n.numMaterializing,total:null===n||void 0===n?void 0:n.numPartitions})]})},y=function(e){var n=e.status,t=e.value,i=e.total,r=m[n];return(0,u.jsx)(l.u,{display:"block",position:"top",canShow:void 0!==t,content:p(t,r.adjective),children:(0,u.jsxs)(s.x,{flex:{gap:4,alignItems:"center"},style:{color:void 0===t||0===t?a.w.Gray300:a.w.Dark},children:[(0,u.jsx)(c.JO,{name:r.icon,color:t?r.border:a.w.Gray300,size:12}),void 0===t?"\u2014":t===i?"All":t.toLocaleString()]})})},v=o.ZP.div.withConfig({displayName:"AssetNodePartitionCounts__PartitionCountContainer",componentId:"yxh173-0"})(["width:100%;border-radius:6px;font-size:12px;gap:4px;display:flex;align-items:center;justify-content:center;padding:4px;"])},6291:function(e,n,t){t.d(n,{k:function(){return p},d:function(){return f}});var i=t(95764),r=t(32030),o=t(7838),a=t(519),s=t(325),l=t(3580),c=t(6596),d=t(23300),u=t(32289),p=function(e){var n=e.focusedDimensionKey,t=e.setFocusedDimensionKey,i=e.statusForPartition,p=e.partitions,m=s.useRef(null),h=(0,a.useVirtualizer)({count:p.length,getItemKey:function(e){return p[e]},getScrollElement:function(){return m.current},estimateSize:function(){return 36},overscan:10}),g=h.getTotalSize(),x=h.getVirtualItems();return s.useEffect((function(){n&&h.scrollToIndex(p.indexOf(n),{smoothScroll:!1,align:"auto"})}),[n,h,p]),(0,u.jsx)(c.Qe,{ref:m,tabIndex:-1,onKeyDown:function(e){var i={ArrowDown:1,ArrowUp:-1}[e.key];if(t&&i&&n&&!e.isDefaultPrevented()){var r=p.indexOf(n)+i,o=p[r];o&&(e.preventDefault(),t(o))}},children:(0,u.jsx)(l.Nh,{$totalHeight:g,children:x.map((function(e){var a=e.index,s=e.key,l=e.size,m=e.start,h=p[a],g=i(h);return(0,u.jsx)(c.gC,{$height:l,$start:m,$focused:h===n,onClick:function(e){e.target instanceof HTMLElement&&e.target.closest("a")||null===t||void 0===t||t(n!==h?h:void 0)},children:(0,u.jsx)(r.x,{style:{height:l},padding:{left:24,right:12},flex:{direction:"column",justifyContent:"center",gap:8},border:{side:"bottom",width:1,color:o.w.KeylineGray},children:(0,u.jsxs)(r.x,{flex:{gap:4,direction:"row",alignItems:"center"},children:[h,(0,u.jsx)("div",{style:{flex:1}}),g.includes(d.yo.MISSING)&&(0,u.jsx)(f,{status:[d.yo.MISSING]}),g.includes(d.yo.FAILED)&&(0,u.jsx)(f,{status:[d.yo.FAILED]}),g.includes(d.yo.MATERIALIZING)&&(0,u.jsx)(f,{status:[d.yo.MATERIALIZING]}),g.includes(d.yo.MATERIALIZED)&&(0,u.jsx)(f,{status:[d.yo.MATERIALIZED]})]})})},s)}))})})},f=function(e){var n=e.status;return(0,u.jsx)("div",{style:(0,i.Z)({width:10,height:10,borderRadius:"100%",flexShrink:0},(0,d.Tg)(n))})}},79986:function(e,n,t){t.d(n,{Tx:function(){return f},Dn:function(){return m},vy:function(){return h},jY:function(){return g}});var i=t(11831),r=t(54268),o=t(13008),a=t.n(o),s=t(55386),l=t.n(s),c=t(93975),d=t.n(c),u=(t(325),t(36243)),p=t(32289);function f(e){return(null===e||void 0===e?void 0:e.freshnessInfo)&&((null===e||void 0===e?void 0:e.freshnessInfo.currentMinutesLate)||0)>0||!1}a().extend(l()),a().extend(d());var m=function(e){return"".concat(a().duration(e,"minutes").humanize(!1)," overdue")},h=function(e){var n=e.liveData,t=e.policyOnHover,o=n.freshnessInfo,a=n.freshnessPolicy,s=t?g(a):"";return o?null===o.currentMinutesLate?(0,p.jsx)(i.u,{content:(0,p.jsx)("div",{style:{maxWidth:400},children:"".concat("This asset has never been materialized."," ").concat(s)}),children:(0,p.jsx)(r.V,{intent:"danger",icon:"warning",children:"Overdue"})}):0===o.currentMinutesLate?s?(0,p.jsx)(i.u,{content:g(a),children:(0,p.jsx)(r.V,{intent:"success",icon:"check_circle"})}):(0,p.jsx)(r.V,{intent:"success",icon:"check_circle"}):(0,p.jsx)(i.u,{content:(0,p.jsx)("div",{style:{maxWidth:400},children:"".concat("A materialization incorporating more recent upstream data is overdue."," ").concat(s)}),children:(0,p.jsx)(r.V,{intent:"danger",icon:"warning",children:m(o.currentMinutesLate)})}):null},g=function(e){if(!e)return"";var n=e.cronSchedule,t=e.maximumLagMinutes,i=e.cronScheduleTimezone,r=n?(0,u.A)(n,i||"UTC").replace(/^At /,""):"",o=t%30===0?"".concat(t/60," hour").concat(t/60!==1?"s":""):"".concat(t," min");return r?"By ".concat(r,", this asset should incorporate all data up to ").concat(o," before that").concat("\xa0","time."):"At any point in time, this asset should incorporate all data up to ".concat(o," before that").concat("\xa0","time.")}},73522:function(e,n,t){t.d(n,{j:function(){return d}});var i=t(32030),r=t(60736),o=t(34595),a=t(325),s=t(74549),l=t(55752),c=t(32289),d=function(e){var n=e.liveData,t=e.border,d=n||{},u=d.inProgressRunIds,p=void 0===u?[]:u,f=d.unstartedRunIds,m=void 0===f?[]:f;return 0===p.length&&0===m.length?null:(0,c.jsx)(i.x,{padding:{vertical:16,left:24,right:12},border:t,children:(0,c.jsx)(r.b,{intent:"info",icon:(0,c.jsx)(o.$,{purpose:"body-text"}),title:(0,c.jsxs)("div",{style:{fontWeight:400},children:[p.length>0&&(0,c.jsxs)(c.Fragment,{children:[p.map((function(e){return(0,c.jsxs)(a.Fragment,{children:["Run"," ",(0,c.jsx)(s.rU,{to:"/runs/".concat(e),children:(0,l.EI)({runId:e})})]},e)}))," ",1===p.length?"is":"are"," currently refreshing this asset."]}),m.length>0&&(0,c.jsxs)(c.Fragment,{children:[m.map((function(e){return(0,c.jsxs)(a.Fragment,{children:["Run"," ",(0,c.jsx)(s.rU,{to:"/runs/".concat(e),children:(0,l.EI)({runId:e})})]},e)}))," ",1===m.length?"has":"have"," started and will refresh this asset."]})]})})})}},11936:function(e,n,t){t.d(n,{x:function(){return l}});var i=t(32030),r=t(7838),o=t(60736),a=t(75497),s=(t(325),t(32289)),l=function(){return(0,s.jsx)(i.x,{padding:{vertical:16,left:24,right:12},border:{side:"bottom",width:1,color:r.w.KeylineGray},children:(0,s.jsx)(o.b,{intent:"info",icon:(0,s.jsx)(a.JO,{name:"history_toggle_off",size:16,color:r.w.Blue700,style:{marginTop:1}}),title:(0,s.jsx)("div",{style:{fontWeight:400},children:"This asset depends on earlier partitions of itself. "})})})}},25329:function(e,n,t){t.d(n,{Z:function(){return l}});var i=t(32030),r=t(60736),o=(t(325),t(74549)),a=t(55752),s=t(32289),l=function(e){var n=e.run,t=e.border,l=e.padding,c=void 0===l?{vertical:16,left:24,right:12}:l;return n?(0,s.jsx)(i.x,{padding:c,border:t,children:(0,s.jsx)(r.b,{intent:"error",title:(0,s.jsxs)("div",{style:{fontWeight:400},children:["Run ",(0,s.jsx)(o.rU,{to:"/runs/".concat(n.id),children:(0,a.EI)({runId:n.id})})," failed to materialize this asset."]})})}):null}},52165:function(e,n,t){t.d(n,{U2:function(){return Ge},XE:function(){return Ie},VF:function(){return Fe},Ot:function(){return Le},ZP:function(){return Oe},DO:function(){return Ze}});var i,r,o,a,s,l,c=t(99500),d=t(85358),u=t(19065),p=t(95550),f=t.n(p),m=t(31522),h=t(3159),g=t(75497),x=t(11831),y=t(75453),v=t(32030),j=t(34595),b=t(762),w=t(8412),S=t(26966),N=t.n(S),C=t(58891),k=t.n(C),P=t(325),E=t(14156),_=t(79540),I=t(39061),Z=t(20021),A=t(25859),K=t(1520),O=t(33774),M=t(37099),D=t(33902),z=t(34449),T=t(61460),L=t(59019),F=t(95764),R=t(922),G=t(73701),$=t(77843),B=t(8358),V=t(12745),J=t(7838),U=t(50346),q=R.ZP.div.withConfig({displayName:"Radio__RadioContainer",componentId:"sc-1a1frnn-0"})([".bp4-control{margin-bottom:0;display:flex;flex-direction:row;align-items:center;input{display:none;}}.bp4-control.bp4-radio{padding:4px 4px 4px 0;}.bp4-control.bp4-radio.bp4-disabled{cursor:default;color:",";","{opacity:0.3;}}.bp4-control .bp4-control-indicator{margin:0;margin-right:8px;}.bp4-control input:checked ~ .bp4-control-indicator{background-color:",";}.bp4-control.bp4-radio input:disabled ~ .bp4-control-indicator{cursor:default;opacity:0.7;}.bp4-control.bp4-radio input:disabled:checked ~ .bp4-control-indicator{background-color:",";}.bp4-control .bp4-control-indicator,.bp4-control .bp4-control-indicator::before{width:18px;height:18px;}"],J.w.Gray300,g.a1,J.w.Blue500,J.w.Blue200),Q=t(60652),H=t(60736),Y=t(24083),W=t.n(Y),X=t(27601),ee=t(63579),ne=t(12436),te=t(69305),ie=t(22013),re=t(89493),oe=t(33547),ae=t(79253),se=t(29399),le=t(26961),ce=t(28064),de=t(23300),ue=t(36613),pe=t(95609),fe=t(74549),me=t(32289),he=function(e){var n=e.partitionSetName,t=(0,G.a)(ge).data,i=("PartitionBackfills"===(null===t||void 0===t?void 0:t.partitionBackfillsOrError.__typename)?t.partitionBackfillsOrError.results:[]).filter((function(e){return e.partitionSetName===n})).length;return 0===i?(0,me.jsx)("span",{}):(0,me.jsxs)("div",{style:{color:J.w.Gray400,maxWidth:350},children:[1===i?"Note: A backfill has been requested for this job and may be refreshing displayed assets. ":"Note: ".concat(i," backfills have been requested for this job and may be refreshing displayed assets. "),(0,me.jsx)(fe.rU,{to:"/overview/backfills",target:"_blank",children:(0,me.jsxs)(v.x,{flex:{gap:4,display:"inline-flex",alignItems:"center"},children:["View ",(0,me.jsx)(g.JO,{name:"open_in_new",color:J.w.Link})]})})]})},ge=(0,h.Ps)(i||(i=(0,c.Z)(["\n  query RunningBackfillsNoticeQuery {\n    partitionBackfillsOrError(status: REQUESTED) {\n      __typename\n      ... on PartitionBackfills {\n        results {\n          partitionSetName\n          backfillId\n        }\n      }\n    }\n  }\n"]))),xe=t(30885),ye=t(47619),ve=function(e){var n=e.assets.length>1?"".concat(e.assets.length," assets"):(0,I.ll)(e.assets[0].assetKey),t="Launch runs to materialize ".concat(n);return(0,me.jsxs)(B.Vq,{style:{width:700},isOpen:e.open,canEscapeKeyClose:!0,canOutsideClickClose:!0,onClose:function(){return e.setOpen(!1)},children:[(0,me.jsx)(B.fK,{icon:"layers",label:t}),(0,me.jsx)(je,(0,F.Z)({},e))]})},je=function(e){var n,t=e.setOpen,i=e.assets,r=e.repoAddress,o=e.target,a=e.upstreamAssetKeys,s=e.refetch,l=i.filter((function(e){return!!e.partitionDefinition})),c=(0,ee.xz)(r.location),p=c.permissions,h=p.canLaunchPipelineExecution,j=p.canLaunchPartitionBackfill,b=c.disabledReasons,w=P.useState(!1),S=(0,u.Z)(w,2),N=S[0],C=S[1],k=P.useState(!1),_=(0,u.Z)(k,2),A=_[0],O=_[1],M=P.useState([]),D=(0,u.Z)(M,2),z=D[0],T=D[1],R=P.useState(0),G=(0,u.Z)(R,2),H=G[0],Y=G[1],W=l.length-H,le=P.useState(Date.now()),fe=(0,u.Z)(le,2),ge=fe[0],ve=fe[1],je=function(){var e=(0,d.Z)(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===s||void 0===s?void 0:s();case 2:ve(Date.now());case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),be=(0,ye.mR)(l.map((function(e){return e.assetKey})),ge.toString(),"immediate"),we=0===be.length,Ce=P.useMemo((function(){return"job"===o.type||we?(0,ue.$G)(be):be.find((0,I.Bl)(o.anchorAssetKey))||(0,ue.$G)([])}),[be,we,o]),ke="job"===o.type?l[0]:l.find((0,I.Bl)(o.anchorAssetKey)),Pe=null===ke||void 0===ke?void 0:ke.partitionDefinition,Ee=(null===(n=l[0].partitionDefinition)||void 0===n?void 0:n.dimensionTypes)||[],_e=P.useState(!0),Ie=(0,u.Z)(_e,2),Ze=Ie[0],Ae=Ie[1],Ke=(0,xe.q)({knownDimensionNames:Ee.map((function(e){return e.name})),modifyQueryString:!1,assetHealth:Ce,skipPartitionKeyValidation:(null===Pe||void 0===Pe?void 0:Pe.type)===te.iVC.DYNAMIC,shouldReadPartitionQueryStringParam:!0}),Oe=(0,u.Z)(Ke,2),Me=Oe[0],De=Oe[1],ze=P.useMemo((function(){return(0,ue.f1)(Me,(function(e){var n=Ce.stateForKey(e);return n instanceof Array||(n=[n]),n}))}),[Me,Ce]),Te=P.useState(!1),Fe=(0,u.Z)(Te,2),Re=Fe[0],Ge=Fe[1],$e=Me.every((function(e){return 1===e.selectedRanges.length}))&&Me.some((function(e){return e.selectedKeys.length>1})),Be=P.useMemo((function(){return Ze?ze.filter((function(e){return[de.yo.MISSING,de.yo.FAILED].some((function(n){return e.state.includes(n)}))})):ze}),[ze,Ze]),Ve=(0,m.x)(),Je=(0,X.k6)(),Ue=(0,(0,Z.C)().useLaunchWithTelemetry)(),qe="pureWithAnchorAsset"===o.type||!Re&&1!==Be.length;P.useEffect((function(){!$e&&Ge(!1)}),[$e]),P.useEffect((function(){Re&&Ae(!1)}),[Re]),P.useEffect((function(){"pureWithAnchorAsset"===o.type&&Ae(!1)}),[o]);var Qe=function(){var e=(0,d.Z)(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(C(!0),!qe){e.next=6;break}return e.next=4,Ye();case 4:e.next=8;break;case 6:return e.next=8,He();case 8:C(!1);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),He=function(){var e=(0,d.Z)(f().mark((function e(){var n,a,s,l,c,d;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("jobName"in o){e.next=3;break}return(0,E._)({title:"Unable to launch as single run",body:"This selection is not valid for a single run launch. Please report this error to the Dagster team."}),e.abrupt("return");case 3:return h||(0,E._)({title:"Unable to launch as single run",body:"You do not have permission to launch this job."}),e.next=6,Ve.query({query:re.Fp,fetchPolicy:"network-only",variables:{repositorySelector:{repositoryLocationName:r.location,repositoryName:r.name},partitionSetName:o.partitionSetName,partitionName:Be[0].partitionKey}});case 6:if(n=e.sent,(a=n.data)&&a.partitionSetOrError&&"PartitionSet"===a.partitionSetOrError.__typename&&a.partitionSetOrError.partition){e.next=10;break}return e.abrupt("return");case 10:if("PythonError"!==(s=a.partitionSetOrError.partition).tagsOrError.__typename){e.next=14;break}return(0,E._)({title:"Unable to load tags",body:(0,me.jsx)(ne.T,{error:s.tagsOrError})}),e.abrupt("return");case 14:if("PythonError"!==s.runConfigOrError.__typename){e.next=17;break}return(0,E._)({title:"Unable to load tags",body:(0,me.jsx)(ne.T,{error:s.runConfigOrError})}),e.abrupt("return");case 17:return l=s.runConfigOrError.yaml||"",c=[].concat((0,L.Z)(s.tagsOrError.results),(0,L.Z)(z)),Re&&((c=c.filter((function(e){return!e.key.startsWith(ce.H.Partition)}))).push({key:ce.H.AssetPartitionRangeStart,value:ze[0].partitionKey}),c.push({key:ce.H.AssetPartitionRangeEnd,value:ze[ze.length-1].partitionKey})),e.next=22,Ue({executionParams:(0,F.Z)((0,F.Z)({},Le(r,o.jobName,i,c)),{},{runConfigData:l,mode:s.mode})},"toast");case 22:"LaunchRunSuccess"===(null===(d=e.sent)||void 0===d?void 0:d.__typename)&&t(!1);case 24:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ye=function(){var e=(0,d.Z)(f().mark((function e(){var n,a,s;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="jobName"in o&&!(0,I.pv)(o.jobName)?{partitionSetName:o.partitionSetName,repositorySelector:{repositoryLocationName:r.location,repositoryName:r.name}}:void 0,e.next=3,Ve.mutate({mutation:ie.f,variables:{backfillParams:{selector:n,assetSelection:i.map((function(e){return{path:e.assetKey.path}})),partitionNames:Be.map((function(e){return e.partitionKey})),fromFailure:!1,tags:z}}});case 3:a=e.sent,"LaunchBackfillSuccess"===(null===(s=a.data)||void 0===s?void 0:s.launchPartitionBackfill.__typename)?((0,ae.Xd)(Je,null===s||void 0===s?void 0:s.launchPartitionBackfill.backfillId,!0),t(!1)):(0,ae.mv)(s);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,me.jsxs)(me.Fragment,{children:[(0,me.jsxs)("div",{"data-testid":(0,K.N)("choose-partitions-dialog"),children:[(0,me.jsx)(Se,{launchAsBackfill:qe,isPureAssetBackfill:"pureWithAnchorAsset"===o.type,upstreamAssetKeys:a,selections:Me,setSelections:De}),(0,me.jsx)(Ne,{title:(0,me.jsx)(V.pm,{children:"Partition selection"}),isInitiallyOpen:!0,children:Me.map((function(e,n){var t,i;return(0,me.jsxs)(v.x,{border:{side:"bottom",width:1,color:J.w.KeylineGray},padding:{vertical:12,horizontal:24},children:["pureWithAnchorAsset"===o.type&&(0,me.jsxs)(v.x,{flex:{gap:8},"data-testid":(0,K.N)("anchor-asset-label"),children:[(0,me.jsx)(g.JO,{name:"asset",size:20}),(0,me.jsx)(V.pm,{children:(0,I.ll)(o.anchorAssetKey)})]}),(0,me.jsxs)(v.x,{as:V.pm,flex:{alignItems:"center",gap:8},children:[(0,me.jsx)(g.JO,{name:"partition"}),e.dimension.name]}),(0,me.jsxs)(v.x,{children:["Select partitions to materialize."," ",e.dimension.type===te.iVC.TIME_WINDOW?"Click and drag to select a range on the timeline.":null]}),(0,me.jsx)(se.x,{partitionKeys:e.dimension.partitionKeys,health:{ranges:Ce.rangesForSingleDimension(n,2===Me.length?Me[1-n].selectedRanges:void 0)},dimensionType:e.dimension.type,selected:e.selectedKeys,setSelected:function(n){return De((function(t){return t.map((function(t){return t.dimension===e.dimension?(0,F.Z)((0,F.Z)({},t),{},{selectedKeys:n}):t}))}))},partitionDefinitionName:(null===Pe||void 0===Pe?void 0:Pe.name)||(null===ke||void 0===ke||null===(t=ke.partitionDefinition)||void 0===t||null===(i=t.dimensionTypes.find((function(n){return n.name===e.dimension.name})))||void 0===i?void 0:i.dynamicPartitionsDefinitionName),repoAddress:r,refetch:je})]},e.dimension.name)}))}),(0,me.jsx)(Ne,{title:(0,me.jsxs)(v.x,{flex:{direction:"row",justifyContent:"space-between"},children:[(0,me.jsx)(V.pm,{children:"Tags"}),(0,me.jsxs)("span",{children:[z.length," tags"]})]}),isInitiallyOpen:!1,children:(0,me.jsxs)(v.x,{padding:{vertical:16,horizontal:24},flex:{direction:"column",gap:12},children:[(0,me.jsx)(oe.U,{tagsFromSession:z,onChange:T,open:A,onRequestClose:function(){return O(!1)}}),(0,me.jsx)("div",{children:"Tags will be applied to all backfill runs"}),z.length?(0,me.jsx)(oe.x,{tagsFromSession:z,onRequestEdit:function(){return O(!0)},actions:[{label:"Remove",onClick:function(e){T(z.filter((function(n){return n.key!==e.key})))}}]}):null,(0,me.jsx)("div",{children:(0,me.jsx)(y.zx,{onClick:function(){return O(!0)},children:"".concat(z.length?"Edit":"Add"," tags")})})]})}),(0,me.jsx)(Ne,{title:(0,me.jsx)(V.pm,{"data-testid":(0,K.N)("backfill-options"),children:"Backfill options"}),isInitiallyOpen:!0,children:"job"===o.type&&(0,me.jsxs)(v.x,{padding:{vertical:16,horizontal:24},flex:{direction:"column",gap:12},children:[(0,me.jsx)(U.X,{"data-testid":(0,K.N)("missing-only-checkbox"),label:"Backfill only failed and missing partitions within selection",checked:Ze,disabled:Re,onChange:function(){return Ae(!Ze)}}),(0,me.jsxs)(q,{children:[(0,me.jsx)(V.pm,{children:"Launch as..."}),(0,me.jsx)($.Y8,{"data-testid":(0,K.N)("ranges-as-tags-true-radio"),checked:$e&&Re,disabled:!$e,onChange:function(){return Ge(!Re)},children:(0,me.jsxs)(v.x,{flex:{direction:"row",alignItems:"center",gap:8},children:[(0,me.jsx)("span",{children:"Single run"}),(0,me.jsx)(x.u,{targetTagName:"div",position:"top-left",content:(0,me.jsx)("div",{style:{maxWidth:300},children:"This option requires that your assets are written to operate on a partition key range via context.asset_partition_key_range_for_output or context.asset_partitions_time_window_for_output."}),children:(0,me.jsx)(g.JO,{name:"info",color:J.w.Gray500})})]})}),(0,me.jsx)($.Y8,{"data-testid":(0,K.N)("ranges-as-tags-false-radio"),checked:!$e||!Re,disabled:!$e,onChange:function(){return Ge(!Re)},children:"Multiple runs (One per selected partition)"})]})]})}),(0,me.jsxs)(v.x,{padding:{horizontal:24},children:[H>0&&(0,me.jsxs)(v.x,{margin:{top:16},flex:{direction:"column",gap:8},padding:{vertical:16,horizontal:20},border:{side:"horizontal",width:1,color:J.w.KeylineGray},background:J.w.Gray100,style:{marginLeft:-20,marginRight:-20,overflowY:"auto",overflowX:"visible",maxHeight:"35vh"},children:[l.slice(0,H).map((function(e){return(0,me.jsx)(pe.m,{assetKey:e.assetKey,showAssetKey:!0,data:be,selections:e.partitionDefinition&&Pe&&(0,ue.z3)(e.partitionDefinition,Pe)?Me:void 0},(0,I.ll)(e.assetKey))})),W>0&&(0,me.jsx)(v.x,{margin:{vertical:8},children:(0,me.jsxs)(Q.Z,{onClick:function(){return Y(l.length)},children:["Show ",W," more ",W>1?"previews":"preview"]})})]}),0===H&&l.length>1&&(0,me.jsx)(v.x,{margin:{top:16,bottom:8},children:(0,me.jsx)(Q.Z,{onClick:function(){return Y(5)},children:"Show per-asset partition health"})})]})]}),(0,me.jsxs)(B.cN,{topBorder:!0,left:"partitionSetName"in o&&(0,me.jsx)(he,{partitionSetName:o.partitionSetName}),children:[(0,me.jsx)(y.zx,{intent:"none",onClick:function(){return t(!1)},children:"Cancel"}),qe&&!j?(0,me.jsx)(x.u,{content:b.canLaunchPartitionBackfill,children:(0,me.jsx)(y.zx,{disabled:!0,children:"job"===o.type?"Launch ".concat(Be.length,"-run backfill"):"Launch backfill"})}):qe||h?(0,me.jsx)(y.zx,{"data-testid":(0,K.N)("launch-button"),intent:"primary",onClick:Qe,disabled:0===Be.length,loading:N,children:N?"Launching...":qe?"job"===o.type?"Launch ".concat(Be.length,"-run backfill"):"Launch backfill":"Launch 1 run"}):(0,me.jsx)(x.u,{content:b.canLaunchPipelineExecution,children:(0,me.jsx)(y.zx,{disabled:!0,children:"Launch 1 run"})})]})]})},be=function(e){var n=e.upstreamAssetKeys,t=e.selections,i=e.setSelections,r=(0,ye.mR)(n);if(0===r.length)return null;var o=function(e){return r.some((function(n){return n.dimensions.length&&n.stateForKey([e])===de.yo.MISSING}))},a=1===t.length?(0,le.lU)(t[0].selectedKeys,o).filter((function(e){return!0===e.status})):[];if(0===a.length)return null;return(0,me.jsx)(H.b,{intent:"warning",title:"Upstream data missing",description:(0,me.jsxs)(me.Fragment,{children:[a.map((function(e){return(0,le.ZX)(e,t[0].selectedKeys)})).join(", ")," cannot be materialized because upstream materializations are missing. Consider materializing upstream assets or ",(0,me.jsx)(Q.Z,{underline:"always",onClick:function(){if(t.length>1)throw new Error("Assertion failed, this feature is only available for 1 dimensional assets");i([(0,F.Z)((0,F.Z)({},t[0]),{},{selectedKeys:W()(t[0].selectedKeys,o)})])},children:"remove these partitions"})," to avoid failures."]})})},we=(0,h.Ps)(r||(r=(0,c.Z)(["\n  query LaunchAssetChoosePartitionsQuery {\n    instance {\n      ...DaemonNotRunningAlertInstanceFragment\n      ...UsingDefaultLauncherAlertInstanceFragment\n    }\n  }\n\n  ","\n  ","\n"])),ae.op,ae.gk),Se=function(e){var n,t=e.isPureAssetBackfill,i=e.launchAsBackfill,r=e.upstreamAssetKeys,o=e.selections,a=e.setSelections,s=null===(n=(0,G.a)(we).data)||void 0===n?void 0:n.instance,l=[t?(0,me.jsx)(H.b,{intent:"info",title:"Dagster will materialize all partitions downstream of the selected partitions for the selected assets, using separate runs as needed."},"alert"):null,be({upstreamAssetKeys:r,selections:o,setSelections:a}),s&&i&&(0,ae.So)({instance:s}),s&&i&&(0,ae.d)({instance:s})].filter((function(e){return!!e})).map((function(e,n){return(0,me.jsx)(v.x,{children:e},n)}));return s&&l.length?(0,me.jsx)(Ne,{background:J.w.Yellow50,isInitiallyOpen:!1,title:(0,me.jsxs)(v.x,{flex:{direction:"row",justifyContent:"space-between",alignItems:"center"},style:{color:J.w.Yellow700},children:[(0,me.jsxs)(v.x,{flex:{alignItems:"center",gap:12},children:[(0,me.jsx)(g.JO,{name:"warning",color:J.w.Yellow700}),(0,me.jsx)(V.pm,{children:"Warnings"})]}),(0,me.jsxs)("span",{children:[l.length," warnings"]})," "]}),children:(0,me.jsx)(v.x,{flex:{direction:"column",gap:16},padding:{vertical:12,horizontal:24},children:l})}):null},Ne=function(e){var n=e.isInitiallyOpen,t=e.title,i=e.children,r=e.background,o=P.useState(n),a=(0,u.Z)(o,2),s=a[0],l=a[1];return(0,me.jsxs)(v.x,{children:[(0,me.jsxs)(v.x,{onClick:function(){return l(!s)},background:null!==r&&void 0!==r?r:J.w.Gray50,border:{side:"bottom",color:J.w.KeylineGray,width:1},flex:{alignItems:"center",direction:"row"},padding:{vertical:12,horizontal:24},style:{cursor:"pointer"},children:[(0,me.jsx)(Ce,{$rotate:!s,children:(0,me.jsx)(g.JO,{name:"arrow_drop_down"})}),(0,me.jsx)("div",{style:{flex:1},children:t})]}),s&&(0,me.jsx)(v.x,{children:i})]})},Ce=R.ZP.span.withConfig({displayName:"LaunchAssetChoosePartitionsDialog__Rotateable",componentId:"sc-1mfaiz8-0"})(["",""],(function(e){return e.$rotate?"transform: rotate(-90deg);":""})),ke=t(74948),Pe=function(e){return e.length>1?" (".concat(e.length,")"):""},Ee=function(e){return e.some((function(e){return"partitionDefinition"in e&&!!e.partitionDefinition||"isPartitioned"in e&&e.isPartitioned}))},_e="Assets can only be materialized together if they are defined in the same code location and share a partition space, or form a connected graph in which root assets share the same partitioning.";var Ie=function(e){var n=e.scope,t=e.liveDataForStale,i=e.preferredJobName,r=e.intent,o=void 0===r?"primary":r,a=Ze(i),s=a.onClick,l=a.loading,c=a.launchpadElement,d=P.useState(!1),p=(0,u.Z)(d,2),f=p[0],m=p[1],h=function(e,n){if("selected"in e){var t=e.selected.filter((function(e){return!e.isSource})),i=e.selected.every((function(e){return e.hasMaterializePermission}));return[{assetKeys:t.map((function(e){return e.assetKey})),label:"Materialize selected".concat(Pe(t)).concat(Ee(t)?"\u2026":""),hasMaterializePermission:i}]}var r=[],o=e.all.filter((function(e){return!e.isSource})),a=o.every((function(e){return e.hasMaterializePermission}));if(r.push({assetKeys:o.map((function(e){return e.assetKey})),label:o.length>1&&!e.skipAllTerm?"Materialize all".concat(Ee(o)?"\u2026":""):"Materialize".concat(Ee(o)?"\u2026":""),hasMaterializePermission:a}),n){var s=o.filter((function(e){return(0,ke.KO)(n[(0,I.Wu)(e.assetKey)])||(0,ke.KM)(n[(0,I.Wu)(e.assetKey)])}));r.push({assetKeys:s.map((function(e){return e.assetKey})),label:"Propagate changes".concat(Pe(s)),hasMaterializePermission:a,icon:(0,me.jsx)(g.JO,{name:"changes_present"})})}return r}(n,t),S=h[0],N=S.hasMaterializePermission,C=(0,Z.C)().MaterializeButton;return S?N?(0,me.jsxs)(me.Fragment,{children:[(0,me.jsxs)(v.x,{flex:{alignItems:"center"},children:[(0,me.jsx)(x.u,{content:"Shift+click to add configuration",position:"bottom-right",useDisabledButtonTooltipFix:!0,children:(0,me.jsx)(C,{intent:o,"data-testid":(0,K.N)("materialize-button"),onClick:function(e){return s(S.assetKeys,e)},style:{borderTopRightRadius:0,borderBottomRightRadius:0,borderRight:"1px solid rgba(255,255,255,0.2)"},disabled:!S.assetKeys.length,icon:l?(0,me.jsx)(j.$,{purpose:"body-text"}):(0,me.jsx)(g.JO,{name:"materialization"}),children:S.label})}),(0,me.jsx)(b.J,{isOpen:f,onInteraction:function(e){return m(e)},position:"bottom-right",content:(0,me.jsxs)(w.v2,{children:[(0,me.jsx)(w.sN,{text:"Open in launchpad",icon:(0,me.jsx)(g.JO,{name:"open_in_new"}),onClick:function(e){s(S.assetKeys,e,!0)}}),h.slice(1).map((function(e){return(0,me.jsx)(w.sN,{text:e.label,icon:e.icon||"materialization",disabled:0===e.assetKeys.length,onClick:function(n){return s(e.assetKeys,n)}},e.label)}))]}),children:(0,me.jsx)(y.zx,{role:"button",style:{minWidth:"initial",borderTopLeftRadius:0,borderBottomLeftRadius:0},icon:(0,me.jsx)(g.JO,{name:"arrow_drop_down"}),disabled:!S.assetKeys.length,intent:o})})]}),c]}):(0,me.jsx)(x.u,{content:"You do not have permission to materialize assets",position:"bottom-right",children:(0,me.jsx)(y.zx,{intent:o,icon:(0,me.jsx)(g.JO,{name:"materialization"}),disabled:!0,children:S.label})}):(0,me.jsx)("span",{})},Ze=function(e){var n=(0,(0,Z.C)().useLaunchWithTelemetry)(),t=(0,m.x)(),i=(0,_.p)(),r=P.useState({type:"none"}),o=(0,u.Z)(r,2),a=o[0],s=o[1],l=function(){var r=(0,d.Z)(f().mark((function r(o,l){var c,d,u,p,m,h,g=arguments;return f().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(c=g.length>2&&void 0!==g[2]&&g[2],"loading"!==a.type){r.next=3;break}return r.abrupt("return");case 3:return s({type:"loading"}),r.next=6,t.query({query:Ge,variables:{assetKeys:o.map((function(e){return{path:e.path}}))}});case 6:if(!(d=r.sent).data.assetNodeDefinitionCollisions.length){r.next=11;break}return(0,E._)(Fe(d.data)),s({type:"none"}),r.abrupt("return");case 11:return u=d.data.assetNodes,p=l.shiftKey||c,r.next=15,Ae(t,u,p,e);case 15:if("error"!==(m=r.sent).type){r.next=20;break}return(0,E._)({title:"Unable to Materialize",body:m.error}),s({type:"none"}),r.abrupt("return");case 20:return r.next=22,ze(t,u);case 22:if(!(h=r.sent).length){r.next=34;break}return s({type:"none"}),r.prev=25,r.next=28,i({title:"Are you sure?",description:(0,me.jsxs)(me.Fragment,{children:[(0,me.jsx)("div",{children:"Materializing these assets may fail because the upstream assets listed below have not been materialized yet."}),(0,me.jsx)("ul",{children:h.map((function(e,n){return(0,me.jsx)("li",{children:(0,I.ll)(e)},n)}))})]})});case 28:s({type:"loading"}),r.next=34;break;case 31:return r.prev=31,r.t0=r.catch(25),r.abrupt("return");case 34:if("single-run"!==m.type){r.next=40;break}return r.next=37,n({executionParams:m.executionParams},"toast");case 37:s({type:"none"}),r.next=41;break;case 40:s(m);case 41:case"end":return r.stop()}}),r,null,[[25,31]])})));return function(e,n){return r.apply(this,arguments)}}();return{onClick:l,loading:"loading"===a.type,launchpadElement:"launchpad"===a.type?(0,me.jsx)(A.e,{assetJobName:a.jobName,repoAddress:a.repoAddress,sessionPresets:a.sessionPresets,open:!0,setOpen:function(){return s({type:"none"})}}):"partitions"===a.type?(0,me.jsx)(ve,{assets:a.assets,upstreamAssetKeys:a.upstreamAssetKeys,repoAddress:a.repoAddress,target:a.target,open:!0,setOpen:function(){return s({type:"none"})},refetch:(0,d.Z)(f().mark((function n(){var i,r,o;return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.query({query:Ge,variables:{assetKeys:a.assets.map((function(e){return{path:e.assetKey.path}}))}});case 2:return i=n.sent,r=i.data.assetNodes,n.next=6,Ae(t,r,!1,e);case 6:if("error"!==(o=n.sent).type){n.next=11;break}return(0,E._)({title:"Unable to Materialize",body:o.error}),s({type:"none"}),n.abrupt("return");case 11:s(o);case 12:case"end":return n.stop()}}),n)})))}):null}};function Ae(e,n,t,i){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,d.Z)(f().mark((function e(n,t,i,r){var o,a,s,l,c,d,u,p,m,h,g,x,y,v,j,b,w,S,N,C;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.some((function(e){return e.isSource}))){e.next=2;break}return e.abrupt("return",{type:"error",error:"One or more source assets are selected and cannot be materialized."});case 2:if(c=(0,M.kQ)((null===(o=t[0])||void 0===o?void 0:o.repository.name)||"",(null===(a=t[0])||void 0===a?void 0:a.repository.location.name)||""),d=Oe(t,r),u=null===(s=t.find((function(e){return!!e.partitionDefinition})))||void 0===s?void 0:s.partitionDefinition,p=t.every((function(e){return e.repository.name===c.name&&e.repository.location.name===c.location})),m=t.every((function(e){return!e.partitionDefinition||!u||(0,ue.z3)(e.partitionDefinition,u)})),p&&m&&d){e.next=12;break}if(h=Me(t)){e.next=11;break}return e.abrupt("return",{type:"error",error:_e});case 11:return e.abrupt("return",{type:"partitions",assets:t,target:{type:"pureWithAnchorAsset",anchorAssetKey:h.assetKey},upstreamAssetKeys:De(t),repoAddress:c});case 12:return e.next=14,n.query({query:$e,variables:{pipelineName:d,repositoryName:t[0].repository.name,repositoryLocationName:t[0].repository.location.name}});case 14:if(g=e.sent,"Pipeline"===(x=g.data.pipelineOrError).__typename){e.next=18;break}return e.abrupt("return",{type:"error",error:x.message});case 18:if("PartitionSets"===(y=g.data.partitionSetsOrError).__typename){e.next=21;break}return e.abrupt("return",{type:"error",error:y.message});case 21:if(v=null===(l=y.results[0])||void 0===l?void 0:l.name,j=t.flatMap((function(e){return e.requiredResources.map((function(e){return e.resourceKey}))})),b=x.modes[0].resources.filter((function(e){return j.includes(e.name)})),w=b.some((function(e){var n;return null===(n=e.configField)||void 0===n?void 0:n.isRequired})),S=t.some((function(e){var n;return null===(n=e.configField)||void 0===n?void 0:n.isRequired})),N=u&&!(0,I.pv)(d),!(!N&&(S||w))&&!i){e.next=31;break}return C=t.flatMap((function(e){return e.opNames||[]})),e.abrupt("return",{type:"launchpad",jobName:d,repoAddress:c,sessionPresets:{flattenGraphs:!0,assetSelection:t.map((function(e){return{assetKey:e.assetKey,opNames:e.opNames}})),solidSelectionQuery:C.map((function(e){return'"'.concat(e,'"')})).join(", "),base:v?{partitionsSetName:v,partitionName:null,tags:[]}:void 0}});case 31:if(!u){e.next=33;break}return e.abrupt("return",{type:"partitions",assets:t,target:{type:"job",jobName:d,partitionSetName:v},upstreamAssetKeys:De(t),repoAddress:c});case 33:return e.abrupt("return",{type:"single-run",executionParams:Le(c,d,t,[])});case 34:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Oe(e,n){var t=e[0]?e[0].jobNames.filter((function(n){return e.every((function(e){return e.jobNames.includes(n)}))})):[];return t.find((function(e){return e===n}))||t[0]||null}function Me(e){var n=e.filter((function(n){var t=n.dependencyKeys.map(I.Je);return!e.some((function(e){return t.includes((0,I.Je)(e.assetKey))}))})).filter((function(e){return!!e.partitionDefinition})).sort((function(e,n){return(0,I.ll)(e.assetKey).localeCompare((0,I.ll)(n.assetKey))}));if(!n.length)return null;var t=n[0];return n.every((function(e){return(0,ue.z3)(t.partitionDefinition,e.partitionDefinition)}))?t:null}function De(e){var n=new Set(e.map((function(e){return JSON.stringify({path:e.assetKey.path})})));return k()(e.flatMap((function(e){return e.dependencyKeys.map((function(e){var n=e.path;return JSON.stringify({path:n})}))}))).filter((function(e){return!n.has(e)})).map((function(e){return JSON.parse(e)}))}function ze(e,n){return Te.apply(this,arguments)}function Te(){return(Te=(0,d.Z)(f().mark((function e(n,t){var i,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==(i=De(t)).length){e.next=3;break}return e.abrupt("return",[]);case 3:return e.next=5,n.query({query:Be,variables:{assetKeys:i}});case 5:return r=e.sent,e.abrupt("return",r.data.assetNodes.filter((function(e){return!e.isSource&&0===e.assetMaterializations.length})).map((function(e){return e.assetKey})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Le(e,n,t,i){return{mode:"default",executionMetadata:{tags:i.map((function(e){return N()(e,["key","value"])}))},runConfigData:"{}",selector:{repositoryLocationName:e.location,repositoryName:e.name,pipelineName:n,assetSelection:t.map((function(e){return{path:e.assetKey.path}}))}}}function Fe(e){return{title:T.a,body:(0,me.jsxs)("div",{style:{overflow:"auto"},children:["One or more of the selected assets are defined in multiple code locations. Rename these assets to avoid collisions and then try again.",(0,me.jsx)("ul",{children:e.assetNodeDefinitionCollisions.map((function(e,n){return(0,me.jsxs)("li",{children:[(0,me.jsx)("strong",{children:(0,I.ll)(e.assetKey)}),(0,me.jsx)("ul",{children:e.repositories.map((function(e,n){return(0,me.jsx)("li",{children:(0,D.Uz)({name:e.name,location:e.location.name})},n)}))})]},n)}))})]})}}var Re=(0,h.Ps)(o||(o=(0,c.Z)(["\n  fragment LaunchAssetExecutionAssetNodeFragment on AssetNode {\n    id\n    opNames\n    jobNames\n    graphName\n    hasMaterializePermission\n    partitionDefinition {\n      ...PartitionDefinitionForLaunchAsset\n    }\n    isObservable\n    isSource\n    assetKey {\n      path\n    }\n    dependencyKeys {\n      path\n    }\n    repository {\n      id\n      name\n      location {\n        id\n        name\n      }\n    }\n    requiredResources {\n      resourceKey\n    }\n    ...AssetNodeConfigFragment\n  }\n\n  fragment PartitionDefinitionForLaunchAsset on PartitionDefinition {\n    description\n    type\n    name\n    dimensionTypes {\n      name\n      dynamicPartitionsDefinitionName\n    }\n  }\n\n  ","\n"])),z.r),Ge=(0,h.Ps)(a||(a=(0,c.Z)(["\n  query LaunchAssetLoaderQuery($assetKeys: [AssetKeyInput!]!) {\n    assetNodes(assetKeys: $assetKeys) {\n      id\n      ...LaunchAssetExecutionAssetNodeFragment\n    }\n    assetNodeDefinitionCollisions(assetKeys: $assetKeys) {\n      assetKey {\n        path\n      }\n      repositories {\n        id\n        name\n        location {\n          id\n          name\n        }\n      }\n    }\n  }\n\n  ","\n"])),Re),$e=(0,h.Ps)(s||(s=(0,c.Z)(["\n  query LaunchAssetLoaderResourceQuery(\n    $pipelineName: String!\n    $repositoryLocationName: String!\n    $repositoryName: String!\n  ) {\n    partitionSetsOrError(\n      pipelineName: $pipelineName\n      repositorySelector: {\n        repositoryName: $repositoryName\n        repositoryLocationName: $repositoryLocationName\n      }\n    ) {\n      ... on PythonError {\n        message\n      }\n      ... on PipelineNotFoundError {\n        message\n      }\n      ... on PartitionSets {\n        results {\n          id\n          name\n        }\n      }\n    }\n\n    pipelineOrError(\n      params: {\n        pipelineName: $pipelineName\n        repositoryName: $repositoryName\n        repositoryLocationName: $repositoryLocationName\n      }\n    ) {\n      ... on PythonError {\n        message\n      }\n      ... on InvalidSubsetError {\n        message\n      }\n      ... on PipelineNotFoundError {\n        message\n      }\n      ... on Pipeline {\n        id\n        modes {\n          id\n          resources {\n            name\n            description\n            configField {\n              name\n              isRequired\n              configType {\n                ...ConfigTypeSchemaFragment\n                recursiveConfigTypes {\n                  ...ConfigTypeSchemaFragment\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n\n  ","\n"])),O.S),Be=(0,h.Ps)(l||(l=(0,c.Z)(["\n  query LaunchAssetCheckUpstreamQuery($assetKeys: [AssetKeyInput!]!) {\n    assetNodes(assetKeys: $assetKeys, loadMaterializations: true) {\n      id\n      assetKey {\n        path\n      }\n      isSource\n      opNames\n      graphName\n      assetMaterializations(limit: 1) {\n        runId\n      }\n    }\n  }\n"])))},52063:function(e,n,t){t.d(n,{y:function(){return v}});var i=t(85358),r=t(19065),o=t(95550),a=t.n(o),s=t(31522),l=t(11831),c=t(75453),d=t(75497),u=t(34595),p=t(325),f=t(14156),m=t(20021),h=t(37099),g=t(33902),x=t(52165),y=t(32289),v=function(e){var n=e.scope,t=e.preferredJobName,o=e.intent,h=void 0===o?"none":o,g=(0,(0,m.C)().useLaunchWithTelemetry)(),v=p.useState({type:"none"}),b=(0,r.Z)(v,2),w=b[0],S=b[1],N=(0,s.x)(),C="selected"in n?n.selected:n.all;if(!C.length)return(0,y.jsx)("span",{});var k=C.length>1?" (".concat(C.length,")"):"",P="selected"in n?"Observe selected".concat(k):n.skipAllTerm?"Observe".concat(k):"Observe sources ".concat(k);if(!C.every((function(e){return e.hasMaterializePermission})))return(0,y.jsx)(l.u,{content:"You do not have permission to observe source assets",children:(0,y.jsx)(c.zx,{intent:h,icon:(0,y.jsx)(d.JO,{name:"observation"}),disabled:!0,children:P})});var E=function(){var e=(0,i.Z)(a().mark((function e(n){var i,r,o,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("loading"!==w.type){e.next=2;break}return e.abrupt("return");case 2:return S({type:"loading"}),e.next=5,N.query({query:x.U2,variables:{assetKeys:C.map((function(e){return{path:e.assetKey.path}}))}});case 5:if(!(i=e.sent).data.assetNodeDefinitionCollisions.length){e.next=10;break}return(0,f._)((0,x.VF)(i.data)),S({type:"none"}),e.abrupt("return");case 10:return r=i.data.assetNodes,o=n.shiftKey,e.next=14,j(N,r,o,t);case 14:if("error"!==(s=e.sent).type){e.next=19;break}return(0,f._)({title:"Unable to observe",body:s.error}),S({type:"none"}),e.abrupt("return");case 19:if("single-run"!==s.type){e.next=25;break}return e.next=22,g({executionParams:s.executionParams},"toast");case 22:S({type:"none"}),e.next=26;break;case 25:S(s);case 26:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,y.jsx)(c.zx,{intent:h,onClick:E,icon:"loading"===w.type?(0,y.jsx)(u.$,{purpose:"body-text"}):(0,y.jsx)(d.JO,{name:"observation"}),children:P})};function j(e,n,t,i){return b.apply(this,arguments)}function b(){return(b=(0,i.Z)(a().mark((function e(n,t,i,r){var o,s,l,c,d;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.some((function(e){return!e.isSource}))){e.next=2;break}return e.abrupt("return",{type:"error",error:"One or more non-source assets are selected and cannot be observed."});case 2:if(!t.some((function(e){return!e.isObservable}))){e.next=4;break}return e.abrupt("return",{type:"error",error:"One or more of the selected source assets are unversioned and cannot be observed."});case 4:if(l=(0,h.kQ)((null===(o=t[0])||void 0===o?void 0:o.repository.name)||"",(null===(s=t[0])||void 0===s?void 0:s.repository.location.name)||""),c=(0,g.Uz)(l),t.every((function(e){return e.repository.name===l.name&&e.repository.location.name===l.location}))){e.next=8;break}return e.abrupt("return",{type:"error",error:"Assets must be in ".concat(c," to be materialized together.")});case 8:if(d=(0,x.ZP)(t,r)){e.next=11;break}return e.abrupt("return",{type:"error",error:"Assets must be in the same job to be observed together."});case 11:return e.abrupt("return",{type:"single-run",executionParams:(0,x.Ot)(l,d,t,[])});case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},95609:function(e,n,t){t.d(n,{m:function(){return m}});var i=t(59019),r=t(34595),o=t(32030),a=t(7838),s=t(12745),l=t(325),c=t(39061),d=t(54920),u=t(23300),p=t(36613),f=t(32289),m=l.memo((function(e){var n=e.showAssetKey,t=e.assetKey,l=e.data,m=e.selections,h=l.find((function(e){return JSON.stringify(e.assetKey)===JSON.stringify(t)}));if(!h)return(0,f.jsx)("div",{style:{minHeight:55,position:"relative"},children:(0,f.jsx)(r.$,{purpose:"section"})});var g=m?m.map((function(e){return e.selectedKeys})):h.dimensions.map((function(e){return e.partitionKeys})),x=g.reduce((function(e,n){return n.length*e}),1),y=g.reduce((function(e,n){return e.length?e.flatMap((function(e){return n.map((function(n){return[].concat((0,i.Z)(e),[n])}))})):n.map((function(e){return[e]}))}),[]).filter((function(e){return h.stateForKey(e)===u.yo.MATERIALIZED})).length;return(0,f.jsxs)(o.x,{color:a.w.Gray500,children:[(0,f.jsxs)(o.x,{flex:{justifyContent:"space-between"},style:{fontWeight:600},margin:{bottom:4},children:[(0,f.jsx)(s.YS,{children:n?(0,c.ll)(t):"Materialized"}),(0,f.jsx)(s.YS,{children:"".concat(y.toLocaleString(),"/").concat(x.toLocaleString())})]}),h.dimensions.map((function(e,n){return(0,f.jsxs)(o.x,{margin:{bottom:4},children:[h.dimensions.length>1&&(0,f.jsx)(s.YS,{children:e.name}),(0,f.jsx)(d.b,{small:!0,partitionNames:e.partitionKeys,splitPartitions:!(0,p.nv)(e),selected:m?m[n].selectedKeys:void 0,health:{ranges:h.rangesForSingleDimension(n,2===(null===m||void 0===m?void 0:m.length)?m[1-n].selectedRanges:void 0)}})]},n)}))]})}))},74948:function(e,n,t){t.d(n,{KO:function(){return w},KM:function(){return S},f4:function(){return C},d9:function(){return k}});var i,r,o=t(95764),a=t(19065),s=t(16798),l=t(12745),c=t(7838),d=t(11831),u=t(58591),p=t(75497),f=t(60652),m=t(32030),h=t(21663),g=t.n(h),x=t(90428),y=t.n(x),v=(t(325),t(39061)),j=t(69305),b=t(32289),w=function(e){return e&&e.staleStatus===j.D9X.MISSING},S=function(e){return e&&e.staleStatus===j.D9X.STALE},N={self:(i={},(0,s.Z)(i,j.R$Y.CODE,"Code version"),(0,s.Z)(i,j.R$Y.DATA,"Data version"),(0,s.Z)(i,j.R$Y.DEPENDENCIES,"Dependencies"),i),upstream:(r={},(0,s.Z)(r,j.R$Y.CODE,"Upstream code version"),(0,s.Z)(r,j.R$Y.DATA,"Upstream data"),(0,s.Z)(r,j.R$Y.DEPENDENCIES,"Upstream dependencies"),r)},C=function(e){var n=e.liveData,t=e.include,i=e.assetKey;return S(n)&&null!==n&&void 0!==n&&n.staleCauses.length?(0,b.jsx)(l.uT,{color:c.w.Yellow700,children:(0,b.jsx)(d.u,{position:"top",content:(0,b.jsx)(E,{causes:n.staleCauses}),children:Object.keys(P(i,t,n)).join(", ")})}):null},k=function(e){var n=e.liveData,t=e.include,i=e.assetKey,r=e.onClick;return S(n)&&null!==n&&void 0!==n&&n.staleCauses.length?(0,b.jsx)(b.Fragment,{children:Object.entries(P(i,t,n)).map((function(e){var n=(0,a.Z)(e,2),t=n[0],i=n[1];return(0,b.jsx)(d.u,{position:"top",content:(0,b.jsx)(E,{causes:i}),children:(0,b.jsx)(u.m,{fillColor:c.w.Yellow50,textColor:c.w.Yellow700,interactive:!!r,icon:(0,b.jsx)(p.JO,{name:"changes_present",color:c.w.Yellow700}),label:r?(0,b.jsx)(f.Z,{underline:"never",onClick:r,color:c.w.Yellow700,children:t}):t})},t)}))}):null};function P(e,n,t){var i=((null===t||void 0===t?void 0:t.staleCauses)||[]).map((function(n){var t=y()(e.path,n.key.path)?"self":"upstream";return(0,o.Z)((0,o.Z)({},n),{},{target:t,label:N[t][n.category]})})).filter((function(e){return"all"===n||n===e.target}));return g()(i,(function(e){return e.label}))}var E=function(e){var n=e.causes;return(0,b.jsxs)(m.x,{children:[(0,b.jsx)("strong",{children:"This asset has unpropagated changes:"}),(0,b.jsxs)("ul",{style:{margin:0,padding:"4px 12px"},children:[n.slice(0,4).map((function(e,n){return(0,b.jsxs)("li",{children:["[",(0,v.ll)(e.key),"] ",e.reason," ",e.dependency?"(".concat((0,v.ll)(e.dependency),")"):""]},n)})),n.length>4?(0,b.jsx)("span",{style:{color:c.w.Gray400},children:"and ".concat(n.length-4," more...")}):""]})]})}},33682:function(e,n,t){t.d(n,{L:function(){return c}});var i=t(59019),r=t(21663),o=t.n(r),a=t(325),s="__NO_PARTITION__",l=function(e,n){return Number(null===n||void 0===n?void 0:n.timestamp)-Number(null===e||void 0===e?void 0:e.timestamp)};function c(e,n,t,r){return a.useMemo((function(){var a=[].concat((0,i.Z)(n),(0,i.Z)(t)).sort((function(e,n){return Number(n.timestamp)-Number(e.timestamp)}));return"partition"===e&&r?function(e,n){var t=o()(e,(function(e){return e.partition||s})),r=(0,i.Z)(n).reverse();return s in t&&r.push(s),r.filter((function(e){return e!==s})).map((function(e){var n=(0,i.Z)(t[e]||[]).sort(l),r=n.find((function(e){return"MaterializationEvent"===e.__typename}))||n[0]||null;return{all:n,latest:r,timestamp:null===r||void 0===r?void 0:r.timestamp,partition:e}}))}(a,r):a.map((function(e){return{latest:e,partition:e.partition||void 0,timestamp:e.timestamp,all:[]}}))}),[r,n,t,e])}},30885:function(e,n,t){t.d(n,{q:function(){return u}});var i=t(59019),r=t(95764),o=t(19065),a=t(325),s=t(44198);function l(e,n){var t=a.useRef(e);t.current=e;var i=a.useRef(n);return i.current=n,a.useCallback((function(e){t.current=e instanceof Function?e(t.current):e,i.current(t.current)}),[])}var c=t(26961),d=t(36613);var u=function(e){var n=e.assetHealth,t=e.knownDimensionNames,u=void 0===t?[]:t,p=e.modifyQueryString,f=e.skipPartitionKeyValidation,m=e.shouldReadPartitionQueryStringParam,h=void 0!==m&&m,g=a.useMemo((function(){return function(e){return{defaults:{},encode:function(e){return Object.fromEntries(e.map((function(e){return["".concat(e.name,"_range"),e.rangeText]})))},decode:function(n){var t={};for(var i in n)if(i.endsWith("_range"))t[i.replace(/_range$/,"")]={text:n[i],isFromPartitionQueryStringParam:!1};else if("partition"===i)for(var r=n[i].split("|"),a=0;a<r.length;a++){var s,l=r[a],c=null===e||void 0===e||null===(s=e.dimensions[a])||void 0===s?void 0:s.name;c&&(t[c]={text:l,isFromPartitionQueryStringParam:!0})}return Object.entries(t).map((function(e){var n=(0,o.Z)(e,2),t=n[0],i=n[1];return{name:t,rangeText:i.text,isFromPartitionQueryStringParam:i.isFromPartitionQueryStringParam}}))}}}(n)}),[n]),x=(0,s.q)(g),y=(0,o.Z)(x,2),v=y[0],j=y[1],b=a.useState([]),w=(0,o.Z)(b,2),S=w[0],N=w[1],C=JSON.stringify(u),k=a.useMemo((function(){return n&&n.dimensions.length?n.dimensions.map((function(e){var n=S.find((function(n){return n.name===e.name}))||v.find((function(n){return n.name===e.name}));return void 0===(null===n||void 0===n?void 0:n.rangeText)||!h&&null!==n&&void 0!==n&&n.isFromPartitionQueryStringParam?{dimension:e,selectedRanges:[(0,c.$0)(e)],selectedKeys:(0,i.Z)(e.partitionKeys)}:(0,r.Z)({dimension:e},(0,c.w$)(e.partitionKeys,n.rangeText,f))})):JSON.parse(C).map(d.xy)}),[n,C,S,v,h,f]);return[k,l(k,(function(e){var n=e.map((function(e){var n=(0,c.Z8)(e.selectedKeys,f?void 0:e.dimension.partitionKeys),t=S.find((function(n){return n.name===e.dimension.name}))||v.find((function(n){return n.name===e.dimension.name}));return{name:e.dimension.name,rangeText:n!==(0,c.NN)(e.dimension)?n:void 0,isFromPartitionQueryStringParam:(null===t||void 0===t?void 0:t.rangeText)===n&&t.isFromPartitionQueryStringParam}}));p?j(n):N(n)}))]}},66855:function(e,n,t){t.d(n,{fE:function(){return h},ZC:function(){return g},T8:function(){return x}});var i,r,o,a=t(99500),s=t(59019),l=t(73701),c=t(3159),d=t(58891),u=t.n(d),p=t(325),f=t(4735),m=t(52598);function h(e,n,t){var i=t.assetHasDefinedPartitions,r=n.asOf?"".concat(Number(n.asOf)+1):void 0,o=i?"partition":"time",a=void 0!==n.partition?"partition":void 0!==n.time||r?"time":o,c=i&&"partition"===a,d=(0,l.a)(y,{variables:c?{assetKey:{path:e.path},before:r,partitionInLast:120}:{assetKey:{path:e.path},before:r,limit:100}}),f=d.data,m=d.loading,h=d.refetch;return p.useMemo((function(){var e,n="Asset"===(null===f||void 0===f?void 0:f.assetOrError.__typename)?null===f||void 0===f?void 0:f.assetOrError:null,t=(null===n||void 0===n?void 0:n.assetMaterializations)||[],i=(null===n||void 0===n?void 0:n.assetObservations)||[],r=null===n||void 0===n||null===(e=n.definition)||void 0===e?void 0:e.partitionKeys;return{asset:n,loadedPartitionKeys:c&&r?r.slice(r.length-120):u()([].concat((0,s.Z)(t),(0,s.Z)(i)).map((function(e){return e.partition})).filter(Boolean)).sort(),materializations:t,observations:i,loading:m,refetch:h,xAxis:a}}),[f,m,h,c,a])}var g=(0,c.Ps)(i||(i=(0,a.Z)(["\n  fragment AssetMaterializationFragment on MaterializationEvent {\n    partition\n    tags {\n      key\n      value\n    }\n    runOrError {\n      ... on PipelineRun {\n        id\n        runId\n        mode\n        repositoryOrigin {\n          id\n          repositoryName\n          repositoryLocationName\n        }\n        status\n        pipelineName\n        pipelineSnapshotId\n      }\n    }\n    runId\n    timestamp\n    stepKey\n    label\n    description\n    metadataEntries {\n      ...MetadataEntryFragment\n    }\n    assetLineage {\n      ...AssetLineageFragment\n    }\n  }\n\n  ","\n  ","\n"])),f.it,m.Q),x=(0,c.Ps)(r||(r=(0,a.Z)(["\n  fragment AssetObservationFragment on ObservationEvent {\n    partition\n    tags {\n      key\n      value\n    }\n    runOrError {\n      ... on PipelineRun {\n        id\n        runId\n        mode\n        repositoryOrigin {\n          id\n          repositoryName\n          repositoryLocationName\n        }\n        status\n        pipelineName\n        pipelineSnapshotId\n      }\n    }\n    runId\n    timestamp\n    stepKey\n    label\n    description\n    metadataEntries {\n      ...MetadataEntryFragment\n    }\n  }\n\n  ","\n"])),f.it),y=(0,c.Ps)(o||(o=(0,a.Z)(["\n  query AssetEventsQuery(\n    $assetKey: AssetKeyInput!\n    $limit: Int\n    $before: String\n    $partitionInLast: Int\n  ) {\n    assetOrError(assetKey: $assetKey) {\n      ... on Asset {\n        id\n        key {\n          path\n        }\n        assetObservations(\n          limit: $limit\n          beforeTimestampMillis: $before\n          partitionInLast: $partitionInLast\n        ) {\n          ...AssetObservationFragment\n        }\n        assetMaterializations(\n          limit: $limit\n          beforeTimestampMillis: $before\n          partitionInLast: $partitionInLast\n        ) {\n          ...AssetMaterializationFragment\n        }\n\n        definition {\n          id\n          partitionKeys\n        }\n      }\n    }\n  }\n\n  ","\n  ","\n"])),x,g)},89493:function(e,n,t){t.d(n,{KC:function(){return T},Kz:function(){return R},Fp:function(){return B},UU:function(){return V},L9:function(){return J}});var i,r,o,a,s=t(99500),l=t(85358),c=t(95764),d=t(19065),u=t(59019),p=t(922),f=t(95550),m=t.n(f),h=t(73701),g=t(3159),x=t(34056),y=t(75497),v=t(7838),j=t(42872),b=t(32030),w=t(34595),S=t(8412),N=t(75453),C=t(6474),k=t(325),P=t(52848),E=t(14156),_=t(79082),I=t(12436),Z=t(27719),A=t(69305),K=t(76314),O=t(20346),M=t(33902),D=t(26306),z=t(32289),T=function(e){var n=e.pipeline,t=e.base,i=e.onSaveSession,r=e.onSelectPreset,o=e.onSelectPartition,a=e.partitionSets,s=e.repoAddress,l=e.assetSelection,c=n.isJob,d=n.presets,p=k.useMemo((function(){return[].concat((0,u.Z)(d),(0,u.Z)(a)).sort((function(e,n){return e.name.localeCompare(n.name)}))}),[d,a]);return(0,z.jsxs)(G,{children:[c||p.length<1?null:(0,z.jsx)(F,{label:t?"presetName"in t?"Preset: ".concat(t.presetName):"Partition Set: ".concat(t.partitionsSetName):d.length&&!a.length?"Preset":!d.length&&a.length?"Partition Set":"Preset / Partition Set",configGenerators:p,onSelect:function(e){"PartitionSet"===e.__typename?i({mode:e.mode,base:{partitionsSetName:e.name,partitionName:null,tags:t?t.tags:null}}):r(e)}}),t&&"partitionsSetName"in t?(0,z.jsx)(L,{pipeline:n,partitionSetName:t.partitionsSetName,value:t.partitionName,onSelect:o,repoAddress:s,assetSelection:l}):null]})},L=k.memo((function(e){var n=e.partitionSetName,t=e.value,i=e.onSelect,r=e.repoAddress,o=e.assetSelection,a=k.useContext(P.I).basePath,s=(0,D.$)(r),p=(0,h.a)($,{variables:{repositorySelector:s,partitionSetName:n,assetKeys:null===o||void 0===o?void 0:o.map((function(e){return{path:e.assetKey.path}}))},fetchPolicy:"network-only"}),f=p.data,g=p.refetch,C=p.loading,_="".concat("dagit.partition-sort-order","-").concat(a,"-").concat((0,M.Uz)(r),"-").concat(n),Z=(0,K.U)(_,(function(e){return void 0===e?"asc":e})),T=(0,d.Z)(Z,2),L=T[0],F=T[1],G=k.useMemo((function(){var e="PartitionSet"===(null===f||void 0===f?void 0:f.partitionSetOrError.__typename)&&"Partitions"===(null===f||void 0===f?void 0:f.partitionSetOrError.partitionsOrError.__typename)?f.partitionSetOrError.partitionsOrError.results:[];return"asc"===L?e:(0,u.Z)(e).reverse()}),[f,L]),B="PartitionSet"===(null===f||void 0===f?void 0:f.partitionSetOrError.__typename)&&"Partitions"!==(null===f||void 0===f?void 0:f.partitionSetOrError.partitionsOrError.__typename)?f.partitionSetOrError.partitionsOrError:null,V=G.find((function(e){return e.name===t})),J=k.useCallback((function(e){e.preventDefault(),F((function(e){return"asc"===e?"desc":"asc"}))}),[F]),U=G.length?(0,z.jsx)(R,{onMouseDown:J,children:(0,z.jsx)(y.JO,{name:"sort_by_alpha",color:v.w.Gray400})}):void 0,q={placeholder:"Partition",style:{width:180},intent:(C?t:V)?x.S.NONE:x.S.DANGER,rightElement:U},Q=k.useMemo((function(){var e,n=null===f||void 0===f?void 0:f.assetNodes,t=null===n||void 0===n||null===(e=n.find((function(e){return!!e.partitionDefinition})))||void 0===e?void 0:e.partitionDefinition;return!t||null!==n&&void 0!==n&&n.some((function(e){var n,i;return(null===e||void 0===e||null===(n=e.partitionDefinition)||void 0===n?void 0:n.name)&&(null===e||void 0===e||null===(i=e.partitionDefinition)||void 0===i?void 0:i.name)!==(null===t||void 0===t?void 0:t.name)}))?{isDynamicPartition:!1,partitionDefinitionName:void 0}:{isDynamicPartition:t.type===A.iVC.DYNAMIC,partitionDefinitionName:t.name}}),[null===f||void 0===f?void 0:f.assetNodes]),H=Q.isDynamicPartition,Y=Q.partitionDefinitionName,W=k.useState(!1),X=(0,d.Z)(W,2),ee=X[0],ne=X[1];return C&&0===G.length?(0,z.jsx)(j.U5,{inputProps:(0,c.Z)((0,c.Z)({},q),{},{rightElement:t?void 0:(0,z.jsx)(b.x,{flex:{direction:"column",justifyContent:"center"},padding:{right:4},style:{height:"30px"},children:(0,z.jsx)(w.$,{purpose:"body-text"})})}),items:[],itemRenderer:function(){return null},noResults:(0,z.jsx)(S.sN,{disabled:!0,text:"Loading..."}),inputValueRenderer:function(e){return e},selectedItem:t,onItemSelect:function(){}},"loading"):(B&&(0,E._)({body:(0,z.jsx)(I.T,{error:B})}),(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(j.U5,{defaultSelectedItem:V,items:G,inputProps:q,inputValueRenderer:function(e){return e.name},itemPredicate:function(e,n){return 0===e.length||n.name.includes(e)},itemRenderer:function(e,n){return(0,z.jsx)(S.sN,{active:n.modifiers.active,onClick:n.handleClick,text:e.name},e.name)},noResults:(0,z.jsx)(S.sN,{disabled:!0,text:"No presets."}),onItemSelect:function(e){i(s,n,e.name)}},V?V.name:"none"),H?(0,z.jsx)(N.zx,{onClick:function(){ne(!0)},children:"Add new partition"}):null,(0,z.jsx)(O.D,{isOpen:ee,partitionDefinitionName:Y,repoAddress:r,close:function(){ne(!1)},refetch:(0,l.Z)(m().mark((function e(){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g();case 2:case"end":return e.stop()}}),e)}))),onCreated:function(e){i(s,n,e)}},ee?"1":"0")]}))})),F=k.memo((function(e){var n=e.configGenerators,t=e.label,i=e.onSelect,r=k.useRef(null);return(0,z.jsx)("div",{children:(0,z.jsx)(Z.b,{shortcutLabel:"\u2325E",shortcutFilter:function(e){return"KeyE"===e.code&&e.altKey},onShortcut:function(){var e;return null===(e=r.current)||void 0===e?void 0:e.click()},children:(0,z.jsx)(C.P,{items:n,itemPredicate:function(e,n){return 0===e.length||n.name.includes(e)},itemListRenderer:function(e){var n=e.itemsParentRef,t=e.renderItem,i=e.filteredItems,r=i.filter((function(e){return"PipelinePreset"===e.__typename})).map(t).filter(Boolean),o=i.filter((function(e){return"PartitionSet"===e.__typename})).map(t).filter(Boolean),a=r.length>0&&o.length>0;return(0,z.jsxs)(S.v2,{ulRef:n,children:[a&&(0,z.jsx)(S.sN,{disabled:!0,text:"Presets"}),r,a&&(0,z.jsx)(S.R,{}),a&&(0,z.jsx)(S.sN,{disabled:!0,text:"Partition Sets"}),o]})},itemRenderer:function(e,n){return(0,z.jsx)(S.sN,{active:n.modifiers.active,onClick:n.handleClick,text:(0,z.jsxs)("div",{children:[e.name,(0,z.jsx)("div",{style:{opacity:.4,fontSize:"0.75rem"},children:[e.solidSelection?1===e.solidSelection.length?"Ops: ".concat(e.solidSelection[0]):"Ops: ".concat(e.solidSelection.length):"Ops: All","Mode: ".concat(e.mode)].join(" - ")})]})},e.name)},noResults:(0,z.jsx)(S.sN,{disabled:!0,text:"No presets."}),onItemSelect:i,children:(0,z.jsx)(N.zx,{ref:r,"data-test-id":"preset-selector-button",rightIcon:(0,z.jsx)(y.JO,{name:"expand_more"}),children:t})})})})})),R=p.ZP.button.withConfig({displayName:"ConfigEditorConfigPicker__SortButton",componentId:"sc-9oggai-0"})(["border:0;cursor:pointer;padding:4px;margin:3px 3px 0 0;background-color:",";border-radius:4px;transition:background-color 100ms;:focus{background-color:",";outline:none;}:hover{","{background-color:",";}}"],v.w.White,v.w.Gray100,y.a1,v.w.Gray700),G=p.ZP.div.withConfig({displayName:"ConfigEditorConfigPicker__PickerContainer",componentId:"sc-9oggai-1"})(["display:flex;justify:space-between;align-items:center;gap:6px;"]),$=(0,g.Ps)(i||(i=(0,s.Z)(["\n  query ConfigPartitionsQuery(\n    $repositorySelector: RepositorySelector!\n    $partitionSetName: String!\n    $assetKeys: [AssetKeyInput!]\n  ) {\n    partitionSetOrError(\n      repositorySelector: $repositorySelector\n      partitionSetName: $partitionSetName\n    ) {\n      __typename\n      ... on PartitionSet {\n        id\n        partitionsOrError {\n          ... on Partitions {\n            results {\n              ...ConfigPartitionResult\n            }\n          }\n          ...PythonErrorFragment\n        }\n      }\n    }\n    assetNodes(assetKeys: $assetKeys) {\n      id\n      partitionDefinition {\n        name\n        type\n      }\n    }\n  }\n\n  fragment ConfigPartitionResult on Partition {\n    name\n  }\n\n  ","\n"])),_.B),B=(0,g.Ps)(r||(r=(0,s.Z)(["\n  query ConfigPartitionSelectionQuery(\n    $repositorySelector: RepositorySelector!\n    $partitionSetName: String!\n    $partitionName: String!\n  ) {\n    partitionSetOrError(\n      repositorySelector: $repositorySelector\n      partitionSetName: $partitionSetName\n    ) {\n      __typename\n      ... on PartitionSet {\n        id\n        partition(partitionName: $partitionName) {\n          name\n          solidSelection\n          runConfigOrError {\n            ... on PartitionRunConfig {\n              yaml\n            }\n            ...PythonErrorFragment\n          }\n          mode\n          tagsOrError {\n            ... on PartitionTags {\n              results {\n                key\n                value\n              }\n            }\n            ...PythonErrorFragment\n          }\n        }\n      }\n    }\n  }\n\n  ","\n"])),_.B),V=(0,g.Ps)(o||(o=(0,s.Z)(["\n  fragment ConfigEditorGeneratorPipelineFragment on Pipeline {\n    id\n    isJob\n    name\n    presets {\n      ...ConfigEditorPipelinePreset\n    }\n    tags {\n      key\n      value\n    }\n  }\n\n  fragment ConfigEditorPipelinePreset on PipelinePreset {\n    name\n    mode\n    solidSelection\n    runConfigYaml\n    tags {\n      key\n      value\n    }\n  }\n"]))),J=(0,g.Ps)(a||(a=(0,s.Z)(["\n  fragment ConfigEditorGeneratorPartitionSetsFragment on PartitionSets {\n    results {\n      id\n      ...PartitionSetForConfigEditor\n    }\n  }\n\n  fragment PartitionSetForConfigEditor on PartitionSet {\n    id\n    name\n    mode\n    solidSelection\n  }\n"])))},25859:function(e,n,t){t.d(n,{e:function(){return _},$:function(){return I}});var i,r,o=t(99500),a=t(73701),s=t(3159),l=t(922),c=(t(95550),t(325)),d=t(32289),u=(0,l.vJ)(i||(i=(0,o.Z)(["\n  .CodeMirror-hints,\n  .CodeMirror-hints.dagit {\n    z-index: 100;\n  }\n"]))),p=t(8358),f=t(27601),m=t(63579),h=t(79082),g=t(78093),x=t(96294),y=t(23196),v=t(76336),j=t(89493),b=t(44969),w=t(6364),S=t(19065),N=t(95764),C=t(88796),k=t(40433),P=function(e){var n=e.launchpadType,t=e.pipeline,i=e.partitionSets,r=e.repoAddress,o=e.sessionPresets,a=(0,C.Bv)(t,i),s=(0,C.h5)((0,N.Z)((0,N.Z)({},o),{},{runConfigYaml:a.runConfigYaml})),l=c.useState(s),u=(0,S.Z)(l,2),p=u[0],f=u[1];return(0,d.jsx)(k.Z,{launchpadType:n,session:p,onSave:function(e){var n=(0,N.Z)((0,N.Z)({},p),e);f(n)},pipeline:t,partitionSets:i,repoAddress:r})},E=c.lazy((function(){return t.e(566).then(t.bind(t,90566))})),_=function(e){var n=e.repoAddress,t=e.sessionPresets,i=e.assetJobName,r=e.open,o=e.setOpen;return(0,d.jsxs)(p.Vq,{style:{height:"90vh",width:"80%"},isOpen:r,canEscapeKeyClose:!0,canOutsideClickClose:!0,onClose:function(){return o(!1)},children:[(0,d.jsx)(p.fK,{icon:"layers",label:"Launchpad (configure assets)"}),(0,d.jsx)(u,{}),(0,d.jsx)(Z,{launchpadType:"asset",pipelinePath:i,repoAddress:n,sessionPresets:t})]})},I=function(e){var n=e.repoAddress,t=(0,f.UO)(),i=t.pipelinePath,r=t.repoPath;return(0,m.xz)(n.location).permissions.canLaunchPipelineExecution?(0,d.jsx)(Z,{launchpadType:"job",pipelinePath:i,repoAddress:n}):(0,d.jsx)(f.l_,{to:"/locations/".concat(r,"/pipeline_or_job/").concat(i)})},Z=function(e){var n,t;(0,g.Px)();var i=e.pipelinePath,r=e.repoAddress,o=e.launchpadType,s=e.sessionPresets,l=(0,x.p3)(i),u=l.pipelineName,p=(0,v.Ux)(r),f=(0,v.E8)(p,u);(0,y.b)(l,f),(0,x.Bj)(e);var m=r.name,h=r.location,j=(0,a.a)(A,{variables:{repositoryName:m,repositoryLocationName:h,pipelineName:u},partialRefetch:!0}),S=null===j||void 0===j||null===(n=j.data)||void 0===n?void 0:n.pipelineOrError,N=null===j||void 0===j||null===(t=j.data)||void 0===t?void 0:t.partitionSetsOrError;if(!S||!N)return(0,d.jsx)(w.m,{});if("PipelineNotFoundError"===N.__typename||"PipelineNotFoundError"===S.__typename){var C="PipelineNotFoundError"===S.__typename?S.message:"No data returned from GraphQL";return""!==u?(0,d.jsx)(b.U,{icon:"error",title:f?"Job not found":"Pipeline not found",description:C}):(0,d.jsx)(b.U,{icon:"no-results",title:f?"Select a job":"Select a pipeline",description:C})}if("InvalidSubsetError"===S.__typename)throw new Error("Should never happen because we do not request a subset");return"PythonError"===S.__typename?(0,d.jsx)(b.U,{icon:"error",title:"Python Error",description:S.message}):N&&"PythonError"===N.__typename?(0,d.jsx)(b.U,{icon:"error",title:"Python Error",description:N.message}):"asset"===o?(0,d.jsx)(P,{launchpadType:o,pipeline:S,partitionSets:N,repoAddress:r,sessionPresets:s||{}}):(0,d.jsx)(c.Suspense,{fallback:(0,d.jsx)("div",{}),children:(0,d.jsx)(E,{launchpadType:o,pipeline:S,partitionSets:N,repoAddress:r})})},A=(0,s.Ps)(r||(r=(0,o.Z)(["\n  query LaunchpadRootQuery(\n    $pipelineName: String!\n    $repositoryName: String!\n    $repositoryLocationName: String!\n  ) {\n    pipelineOrError(\n      params: {\n        pipelineName: $pipelineName\n        repositoryName: $repositoryName\n        repositoryLocationName: $repositoryLocationName\n      }\n    ) {\n      ... on PipelineNotFoundError {\n        message\n      }\n      ... on Pipeline {\n        id\n        ...LaunchpadSessionPipelineFragment\n      }\n      ...PythonErrorFragment\n    }\n    partitionSetsOrError(\n      pipelineName: $pipelineName\n      repositorySelector: {\n        repositoryName: $repositoryName\n        repositoryLocationName: $repositoryLocationName\n      }\n    ) {\n      __typename\n      ... on PipelineNotFoundError {\n        message\n      }\n      ...LaunchpadSessionPartitionSetsFragment\n      ...PythonErrorFragment\n    }\n  }\n\n  fragment LaunchpadSessionPartitionSetsFragment on PartitionSets {\n    ...ConfigEditorGeneratorPartitionSetsFragment\n  }\n\n  fragment LaunchpadSessionPipelineFragment on Pipeline {\n    id\n    isJob\n    isAssetJob\n    ...ConfigEditorGeneratorPipelineFragment\n    modes {\n      id\n      name\n      description\n    }\n  }\n\n  ","\n  ","\n  ","\n"])),h.B,j.L9,j.UU)},40433:function(e,n,t){t.d(n,{Z:function(){return wn}});var i=t(99500),r=t(85358),o=t(59019),a=t(47427),s=t(19065),l=t(95764),c=t(922),d=t(95550),u=t.n(d),p=t(31522),f=t(73701),m=t(3159),h=t(57994),g=t(98907),x=t(64428),y=t(28463),v=(t(39388),t(50680),t(25559),t(44186),t(99912),t(94407),t(39519),t(36341),t(33961),t(36852),t(81452),t(6968),t(43615)),j=t.n(v),b=t(325),w=t(1033),S=t(24818),N=t(13091),C=t.n(N),k="CodeMirror-lint-markers";function P(e){e.parentNode&&e.parentNode.removeChild(e)}function E(e,n,t){var i=function(e,n,t){var i=document.createElement("div"),r=t.getBoundingClientRect();return i.className="CodeMirror-lint-tooltip",i.appendChild(n.cloneNode(!0)),document.body.appendChild(i),r.top>i.clientHeight?(i.style.top=r.top-i.clientHeight-5+"px",i.style.left=r.left+5+"px"):(i.style.top=r.top+5+"px",i.style.left=r.right+10+"px"),null!=i.style.opacity&&(i.style.opacity=1),i}(0,n,t);function r(){var e;C().off(t,"mouseout",r),i&&((e=i).parentNode&&(null==e.style.opacity&&P(e),e.style.opacity=0,setTimeout((function(){P(e)}),600)),i=null)}var o=setInterval((function(){if(i)for(var e=t;;e=e.parentNode){if(e&&11===e.nodeType&&(e=e.host),e===document.body)return;if(!e){r();break}}if(!i)return clearInterval(o)}),400);C().on(t,"mouseout",r)}function _(e){var n=e.state.lint;n.hasGutter&&e.clearGutter(k);for(var t=0;t<n.marked.length;++t)n.marked[t].clear();n.marked.length=0}function I(e,n,t,i){var r=document.createElement("div"),o=r;return r.className="CodeMirror-lint-marker CodeMirror-lint-marker-"+n,t&&((o=r.appendChild(document.createElement("div"))).className="CodeMirror-lint-marker CodeMirror-lint-marker-multiple"),!1!==i&&C().on(o,"mouseover",(function(n){E(0,e,o)})),r}function Z(e){var n=e.severity;n||(n="error");var t=document.createElement("div");return t.className="CodeMirror-lint-message CodeMirror-lint-message-"+n,"undefined"!==typeof e.messageHTML?t.innerHTML=e.messageHTML:t.appendChild(document.createTextNode(e.message)),t}function A(e,n){_(e);for(var t,i,r=e.state.lint,o=r.options,a=function(e){for(var n=[],t=0;t<e.length;++t){var i=e[t],r=i.from.line;(n[r]||(n[r]=[])).push(i)}return n}(n),s=0;s<a.length;++s){var l=a[s];if(l){for(var c=null,d=r.hasGutter&&document.createDocumentFragment(),u=0;u<l.length;++u){var p=l[u],f=p.severity;f||(f="error"),i=f,c="error"===(t=c)?t:i,o.formatAnnotation&&(p=o.formatAnnotation(p)),r.hasGutter&&d.appendChild(Z(p)),p.to&&r.marked.push(e.markText(p.from,p.to,{className:"CodeMirror-lint-mark CodeMirror-lint-mark-"+f,__annotation:p}))}r.hasGutter&&e.setGutterMarker(s,k,I(d,c,l.length>1,r.options.tooltips))}}o.onUpdateLinting&&o.onUpdateLinting(n,a,e)}function K(e){var n=e.state.lint.options,t=n.options||n,i=n.getAnnotations||e.getHelper(C().Pos(0,0),"lint");if(i)if(n.async||i.async)!function(e,n,t){var i=e.state.lint,r=++i.waitingFor;function o(){r=-1,e.off("change",o)}e.on("change",o),n(e.getValue(),(function(n,t){e.off("change",o),i.waitingFor===r&&(t&&n instanceof C()&&(n=t),e.operation((function(){A(e,n)})))}),t,e)}(e,i,t);else{var r=i(e.getValue(),t,e);if(!r)return;r.then?r.then((function(n){e.operation((function(){A(e,n)}))})):e.operation((function(){A(e,r)}))}}function O(e){var n=e.state.lint;n&&(clearTimeout(n.timeout),n.timeout=setTimeout((function(){K(e)}),n.options.delay||500))}function M(e,n){for(var t=(n.target||n.srcElement).getBoundingClientRect(),i=(t.left+t.right)/2,r=(t.top+t.bottom)/2,o=e.coordsChar({left:i,top:r},"client"),a=e.findMarksAt(o),s=e.getHelper(C().Pos(0,0),"dagster-docs")(e,o),l=[],c=0;c<a.length;++c){var d=a[c].__annotation;d&&l.push(d)}(s||l.length)&&function(e,n,t){var i=t.target||t.srcElement,r=document.createDocumentFragment();if(e){var o=document.createElement("div");o.textContent=e,r.appendChild(o),n.length&&(o.style.paddingBottom="4px",o.style.marginBottom="4px",o.style.borderBottom="1px solid rgba(0,0,0,0.25)")}for(var a=0;a<n.length;a++){var s=n[a];r.appendChild(Z(s))}E(0,r,i)}(s,l,n)}function D(e,n,t){this.marked=[],this.options=n,this.timeout=null,this.hasGutter=t,this.onMouseOver=function(n){M(e,n)},this.waitingFor=0}var z,T=t(13235),L=t(32289);C().defineOption("lint",!1,(function(e,n,t){if(t&&t!==C().Init&&(_(e),!1!==e.state.lint.options.lintOnChange&&e.off("change",O),C().off(e.getWrapperElement(),"mouseover",e.state.lint.onMouseOver),clearTimeout(e.state.lint.timeout),delete e.state.lint),n){for(var i=e.getOption("gutters"),r=!1,o=0;o<i.length;++o)i[o]===k&&(r=!0);var a=e.state.lint=new D(e,(s=n)instanceof Function?{getAnnotations:s}:(s&&!0!==s||(s={}),s),r);!1!==a.options.lintOnChange&&e.on("change",O),!1!==a.options.tooltips&&"gutter"!==a.options.tooltips&&C().on(e.getWrapperElement(),"mouseover",a.onMouseOver)}var s})),C().defineExtension("performLint",(function(){this.state.lint&&K(this)}));var F,R,G=/^[a-zA-Z0-9_@(]$/,$=j()((function(e){e.performLint()}),1e3),B=(0,c.vJ)(z||(z=(0,i.Z)(["\n  .react-codemirror2 .CodeMirror.cm-s-config-editor {\n    height: initial;\n    position: absolute;\n    inset: 0;\n  }\n"]))),V=function(e){(0,x.Z)(t,e);var n=(0,y.Z)(t);function t(){var e;(0,h.Z)(this,t);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=n.call.apply(n,[this].concat(r)))._editor=void 0,e.moveCursor=function(n,t){var i;if(e._editor){e._editor.setCursor(n,t,{scroll:!1});var r=e._editor.getScrollInfo().clientHeight,o=e._editor.cursorCoords(!0,"local"),a=o.left,s=o.top;null===(i=e._editor)||void 0===i||i.scrollIntoView({left:a,right:a,top:s-20,bottom:s+(r-20)}),e._editor.focus()}},e.moveCursorToPath=function(n){if(e._editor){var t=e._editor.getDoc(),i=w.wL(e.props.configCode),r=(0,T.$P)(i,n,"key");if(r){var o=t.posFromIndex(r?r.start:0);e.moveCursor(o.line,o.ch)}}},e}return(0,g.Z)(t,[{key:"componentDidUpdate",value:function(e){this._editor&&e.configSchema!==this.props.configSchema&&this.performInitialPass()}},{key:"shouldComponentUpdate",value:function(e){return e.configCode!==this.props.configCode||e.readOnly!==this.props.readOnly||e.configSchema!==this.props.configSchema}},{key:"performInitialPass",value:function(){$(this._editor);var e=(0,T.Im)(this._editor).context;this.props.onHelpContextChange(e?{type:e.closestMappingType}:null)}},{key:"render",value:function(){var e=this;return(0,L.jsxs)("div",{style:{flex:1,position:"relative"},children:[(0,L.jsx)(B,{}),(0,L.jsx)(S.X9,{value:this.props.configCode,theme:["config-editor"],options:{mode:"yaml",lineNumbers:!0,readOnly:this.props.readOnly,indentUnit:2,smartIndent:!0,showCursorWhenSelecting:!0,lintOnChange:!1,lint:{checkConfig:this.props.checkConfig,lintOnChange:!1,onUpdateLinting:!1},hintOptions:{completeSingle:!1,closeOnUnfocus:!1,schema:this.props.configSchema},keyMap:"sublime",extraKeys:{"Cmd-Space":function(e){return e.showHint({completeSingle:!0})},"Ctrl-Space":function(e){return e.showHint({completeSingle:!0})},"Alt-Space":function(e){return e.showHint({completeSingle:!0})},"Shift-Tab":function(e){return e.execCommand("indentLess")},Tab:function(e){return e.execCommand("indentMore")},"Cmd-F":"findPersistent","Ctrl-F":"findPersistent"},gutters:["CodeMirror-foldgutter","CodeMirror-lint-markers","CodeMirror-linenumbers"],foldGutter:!0},editorDidMount:function(n){e._editor=n,e.performInitialPass()},onBeforeChange:function(n,t,i){e.props.onConfigChange(i)},onCursorActivity:function(n){if(n.getSelection().length)e.props.onHelpContextChange(null);else{var t=(0,T.Im)(n).context;e.props.onHelpContextChange(t?{type:t.closestMappingType}:null)}},onChange:function(e){$(e)},onBlur:function(e){$(e)},onKeyUp:function(e,n){G.test(n.key)&&e.execCommand("autocomplete")}})]})}}]),t}(b.Component),J=function(e,n){return(e&&e.type.key)===(n&&n.type.key)},U=t(7838),q=t(71725),Q=b.memo((function(e){var n=e.context,t=e.allInnerTypes;return n?(0,L.jsxs)(W,{children:[(0,L.jsx)(Y,{children:(0,L.jsx)(q.L,{type:n.type,typesInScope:t,maxDepth:2})}),(0,L.jsx)(H,{children:"Use Ctrl+Space to show auto-completions inline."})]}):(0,L.jsx)(W,{})}),(function(e,n){return J(e.context,n.context)})),H=c.ZP.div.withConfig({displayName:"ConfigEditorHelp__AutocompletionsNote",componentId:"sc-1pjkbac-0"})(["font-size:0.75rem;text-align:center;padding:4px;border-top:1px solid ",";background:",";color:",";"],U.w.KeylineGray,U.w.Gray100,U.w.Gray500),Y=c.ZP.div.withConfig({displayName:"ConfigEditorHelp__ConfigScrollWrap",componentId:"sc-1pjkbac-1"})(["padding:8px;color:",";flex:1;pointer-events:initial;max-height:100%;overflow-y:auto;"],U.w.Dark),W=c.ZP.div.withConfig({displayName:"ConfigEditorHelp__Container",componentId:"sc-1pjkbac-2"})(["position:relative;display:flex;flex-direction:column;background-color:",";height:100%;"],U.w.Gray50),X=t(32030),ee=t(17912),ne=t(88863),te=t(75453),ie=t(75497),re=t(6466),oe=t(3810),ae=t.n(oe),se=t(54972),le=t.n(se),ce=t(14156),de=t(63579),ue=t(12436),pe=t(27719),fe=t(39061),me=(0,m.Ps)(F||(F=(0,i.Z)(["\n  fragment ConfigEditorRunConfigSchemaFragment on RunConfigSchema {\n    rootConfigType {\n      key\n    }\n    allConfigTypes {\n      ...AllConfigTypesForEditor\n    }\n  }\n\n  fragment AllConfigTypesForEditor on ConfigType {\n    key\n    description\n    isSelector\n    typeParamKeys\n    ... on RegularConfigType {\n      givenName\n    }\n    ... on MapConfigType {\n      keyLabelName\n    }\n    ... on EnumConfigType {\n      givenName\n      values {\n        value\n        description\n      }\n    }\n    ... on CompositeConfigType {\n      ...CompositeConfigTypeForSchema\n    }\n    ... on ScalarUnionConfigType {\n      key\n      scalarTypeKey\n      nonScalarTypeKey\n    }\n  }\n\n  fragment CompositeConfigTypeForSchema on CompositeConfigType {\n    fields {\n      name\n      description\n      isRequired\n      configTypeKey\n      defaultValueAsJson\n    }\n  }\n"]))),he=(0,m.Ps)(R||(R=(0,i.Z)(["\n  fragment ConfigEditorValidationFragment on PipelineConfigValidationResult {\n    __typename\n    ... on RunConfigValidationInvalid {\n      errors {\n        __typename\n        reason\n        message\n        stack {\n          entries {\n            __typename\n            ... on EvaluationStackPathEntry {\n              fieldName\n            }\n            ... on EvaluationStackListItemEntry {\n              listIndex\n            }\n            ... on EvaluationStackMapKeyEntry {\n              mapKey\n            }\n            ... on EvaluationStackMapValueEntry {\n              mapKey\n            }\n          }\n        }\n      }\n    }\n  }\n"])));function ge(e){return e.map((function(e){switch(e.__typename){case"EvaluationStackPathEntry":return e.fieldName;case"EvaluationStackListItemEntry":return"".concat(e.listIndex);case"EvaluationStackMapKeyEntry":case"EvaluationStackMapValueEntry":return"".concat(e.mapKey)}}))}function xe(e,n){if("RunConfigValidationInvalid"!==n.__typename)return{isValid:!0};var t=n.errors.map((function(e){return{message:e.message,reason:e.reason,path:ge(e.stack.entries)}})),i=w.ZP.parse(e),r=Object.keys(i);return t.forEach((function(e){0===e.path.length&&r.length&&(e.path=[r[0]])})),{isValid:!1,errors:t}}var ye,ve,je=t(28064),be=t(33902),we=t(26306),Se=t(89493),Ne=t(6474),Ce=t(8412),ke=function(e){var n=e.modeName?e.modes.find((function(n){return n.name===e.modeName})):e.modes[0];b.useEffect((function(){var t;n&&n.name!==e.modeName&&(null===(t=e.onModeChange)||void 0===t||t.call(e,n.name))}),[n,e.modeName]);var t=1===e.modes.length,i=!e.modeError,r=t&&i;return(0,L.jsx)(Ne.P,{activeItem:n,filterable:!0,disabled:r,items:e.modes,itemPredicate:function(e,n){return 0===e.length||n.name.includes(e)},itemRenderer:function(e,n){return(0,L.jsx)(Ce.sN,{active:n.modifiers.active,text:e.name,onClick:n.handleClick},e.name)},onItemSelect:function(n){var t;null===(t=e.onModeChange)||void 0===t||t.call(e,n.name)},children:(0,L.jsx)(te.zx,{icon:i?void 0:(0,L.jsx)(ie.JO,{name:"error"}),intent:i?"none":"danger",title:r?"To add a mode, add a ModeDefinition to the pipeline.":"Current execution mode",disabled:r,rightIcon:(0,L.jsx)(ie.JO,{name:"expand_more"}),"data-test-id":"mode-picker-button",children:i?n?"Mode: ".concat(n.name):"Select Mode":"Invalid Mode Selection"})})},Pe=t(20021),Ee=t(33214),_e=t(762),Ie=t(25496),Ze=t(79082),Ae=t(27218),Ke=t(2112),Oe=t(65164),Me=t(76336),De=(0,m.Ps)(ye||(ye=(0,i.Z)(["\n  query OpSelectorQuery($selector: PipelineSelector!, $requestScopeHandleID: String) {\n    pipelineOrError(params: $selector) {\n      __typename\n      ... on Pipeline {\n        id\n        name\n        solidHandles(parentHandleID: $requestScopeHandleID) {\n          handleID\n          solid {\n            name\n          }\n          ...GraphExplorerSolidHandleFragment\n        }\n      }\n      ... on PipelineNotFoundError {\n        message\n      }\n      ... on InvalidSubsetError {\n        message\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"])),Ke.Q,Ze.B),ze=function(e){var n=e.serverProvidedSubsetError,t=e.onChange,i=e.pipelineName,r=e.repoAddress,o=e.onFlattenGraphsChange,a=b.useState(!1),c=(0,s.Z)(a,2),d=c[0],u=c[1],p=b.useRef(null),m=e.flattenGraphs||!1,h=(0,l.Z)((0,l.Z)({},(0,we.$)(r)),{},{pipelineName:i}),g=(0,Me.Ux)(r),x=(0,Me.E8)(g,i),y=(0,f.a)(De,{variables:{selector:h,requestScopeHandleID:m?void 0:""}}),v=y.data,j=y.loading,w=e.query||"*",S=("Pipeline"===(null===v||void 0===v?void 0:v.pipelineOrError.__typename)?m?(0,Ae.i)(v.pipelineOrError.solidHandles):v.pipelineOrError.solidHandles:[]).map((function(e){return e.solid})),N=m||S.some((function(e){return"CompositeSolidDefinition"===e.definition.__typename})),C="Pipeline"!==(null===v||void 0===v?void 0:v.pipelineOrError.__typename)&&(null===v||void 0===v?void 0:v.pipelineOrError.message)||null,k=(0,Ie.V)(S,w).all,P=!j&&0===k.length?x?"You must provide a valid op query or * to execute the entire job.":"You must provide a valid solid query or * to execute the entire pipeline.":n?n.message:C;return null!==v&&void 0!==v&&v.pipelineOrError?(0,L.jsx)(X.x,{flex:{direction:"row",alignItems:"center",gap:8},children:(0,L.jsx)(_e.J,{isOpen:d&&!!P,position:"bottom-left",content:(0,L.jsx)(Te,{children:P}),children:(0,L.jsx)(pe.b,{shortcutLabel:"\u2325S",shortcutFilter:function(e){return"KeyS"===e.code&&e.altKey},onShortcut:function(){var e;return null===(e=p.current)||void 0===e?void 0:e.focus()},children:(0,L.jsx)(Oe.j,{width:"*"!==w&&""!==w||d||N?350:90,intent:P?"danger":"none",items:S,ref:p,value:w,placeholder:"Type an op subset\u2026",onChange:function(e){""===e&&(e="*");var n=(0,Ie.V)(S,e).all;n.length===S.length?t(null,e):t(n.map((function(e){return e.name})),e)},onFocus:function(){return u(!0)},onBlur:function(){return u(!1)},linkToPreview:{repoName:r.name,repoLocation:r.location,pipelineName:i,isJob:x},flattenGraphsEnabled:N,flattenGraphs:m,setFlattenGraphs:function(){o(!m)}})})})}):null},Te=c.ZP.div.withConfig({displayName:"OpSelector__PopoverErrorWrap",componentId:"sc-6j6o1g-0"})(["padding:4px 8px;border-radius:2px;border:1px solid ",";background:",";color:",";"],U.w.Red500,U.w.Red200,U.w.Red700),Le=t(16540),Fe=t(81034),Re=t(12745),Ge=t(60652),$e=t(11831),Be=t(54268),Ve=t(50346),Je=t(8546),Ue=t(79540),qe=["resources","ops","solids"];function Qe(e){return!(!e||"object"!==typeof e||!("__typename"in e))}var He={invalid:{title:"You need to fix this configuration section.",intent:"danger"},missing:{title:"You need to add this configuration section.",intent:"danger"},present:{title:"This section is present and valid.",intent:"none"},none:{title:"This section is empty and valid.",intent:"none"}},Ye=function(e){var n,t=e.onRemoveExtraPaths,i=e.extraNodes,o=e.disabled,l=(0,Ue.p)(),c={},d=[],p=(0,a.Z)(i);try{for(p.s();!(n=p.n()).done;){var f=n.value,m=f.split(".");if(2===m.length){var h=(0,s.Z)(m,2),g=h[0],x=h[1];c[g]||(c[g]=[]),c[g].push(x)}else d.push(f)}}catch(v){p.e(v)}finally{p.f()}var y=function(){var e=(0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l({title:"Remove extra config",description:(0,L.jsxs)("div",{children:[(0,L.jsx)("p",{children:"You have provided extra configuration in your run config which does not conform to your\n            pipeline's config schema."}),Object.entries(c).length>0&&Object.entries(c).map((function(e){var n=(0,s.Z)(e,2),t=n[0],i=n[1];return(0,L.jsxs)(b.Fragment,{children:[(0,L.jsxs)("p",{children:["Extra ",t,":"]}),(0,L.jsx)("ul",{children:i.map((function(e){return(0,L.jsx)("li",{children:(0,L.jsx)(Re.EK,{children:e})},e)}))})]},t)})),d.length>0&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)("p",{children:"Other extra paths:"}),(0,L.jsx)("ul",{children:d.map((function(e){return(0,L.jsx)("li",{children:(0,L.jsx)(Re.EK,{children:e})},e)}))})]}),(0,L.jsx)("p",{children:"Clicking confirm will automatically remove this extra configuration from your run config."})]})});case 2:t(i);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,L.jsxs)(X.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,L.jsx)(te.zx,{disabled:o,onClick:y,children:"Remove extra config"}),o?(0,L.jsxs)(X.x,{flex:{direction:"row",gap:4,alignItems:"center"},children:[(0,L.jsx)(ie.JO,{name:"check_circle",color:U.w.Green500}),"No extra config to remove"]}):null]})},We=function(e){var n=e.onScaffoldMissingConfig,t=e.missingNodes,i=e.disabled,o=(0,Ue.p)(),a=(0,L.jsxs)("div",{children:[t.length>0&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)("p",{children:"Missing paths:"}),(0,L.jsx)("ul",{children:t.map((function(e){return(0,L.jsx)("li",{children:(0,L.jsx)(Re.EK,{children:e})},e)}))})]}),(0,L.jsx)("p",{children:"Clicking confirm will automatically scaffold this missing configuration into your run config with default values. You will need to change the values appropriately."})]}),s=function(){var e=(0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o({title:"Scaffold missing config",description:a});case 2:n();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,L.jsxs)(X.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,L.jsx)(te.zx,{disabled:i,onClick:s,children:"Scaffold missing config"}),i?(0,L.jsxs)(X.x,{flex:{direction:"row",gap:4,alignItems:"center"},children:[(0,L.jsx)(ie.JO,{name:"check_circle",color:U.w.Green500}),"No missing config"]}):null]})},Xe=function(e){var n=e.document,t=e.validation,i=e.onHighlightPath,r=e.launchpadType,l=e.onRemoveExtraPaths,c=e.onScaffoldMissingConfig,d=e.solidSelection,u=e.runConfigSchema,p=b.useState(!1),f=(0,s.Z)(p,2),m=f[0],h=f[1],g=b.useMemo((function(){if(!u)return{};var e=u.allConfigTypes,n=u.rootConfigType,t={},i=e.find((function(e){return e.key===n.key}));return"CompositeConfigType"!==(null===i||void 0===i?void 0:i.__typename)||i.fields.forEach((function(n){var i=e.find((function(e){return e.key===n.configTypeKey}));"CompositeConfigType"===(null===i||void 0===i?void 0:i.__typename)&&(t[n.name]=i)})),t}),[u]),x=[],y=[],v=[];if(t&&"RunConfigValidationInvalid"===t.__typename&&t.errors.forEach((function(e){var n=ge(e.stack.entries);if(v.push({pathKey:n.join("."),error:e}),"MissingFieldConfigError"===e.__typename)y.push([].concat((0,o.Z)(n),[e.field.name]).join("."));else if("MissingFieldsConfigError"===e.__typename){var t,i=(0,a.Z)(e.fields);try{for(i.s();!(t=i.n()).done;){var r=t.value;y.push([].concat((0,o.Z)(n),[r.name]).join("."))}}catch(d){i.e(d)}finally{i.f()}}else if("FieldNotDefinedConfigError"===e.__typename)x.push([].concat((0,o.Z)(n),[e.fieldName]).join("."));else if("FieldsNotDefinedConfigError"===e.__typename){var s,l=(0,a.Z)(e.fieldNames);try{for(l.s();!(s=l.n()).done;){var c=s.value;x.push([].concat((0,o.Z)(n),[c]).join("."))}}catch(d){l.e(d)}finally{l.f()}}else"RuntimeMismatchConfigError"===e.__typename&&y.push(n.join("."))})),"InvalidSubsetError"===(null===t||void 0===t?void 0:t.__typename)&&v.push({pathKey:"",error:t.message}),"PythonError"===(null===t||void 0===t?void 0:t.__typename)){var j=(0,L.jsx)(ue.T,{error:t});v.push({pathKey:"",error:(0,L.jsxs)("span",{children:["PythonError:"," ",(0,L.jsx)(Ge.Z,{onClick:function(){return(0,ce._)({body:j})},children:"Click for details"})]})})}var w=g.resources,S=g.ops,N=g.solids,C=(0,Fe.Z)(g,qe),k=!(null===S||void 0===S||!S.fields),P=function(e,t){var r=t.map((function(t){if(null!==d&&void 0!==d&&d.length&&(null===d||void 0===d||!d.includes(t.name)))return null;var r=[].concat((0,o.Z)(e),[t.name]),a=r.join("."),s=v.filter((function(e){return e.pathKey===a||e.pathKey.startsWith("".concat(a,"."))})).map((function(e){return e.error})),l=dn(r,n),c=y.some((function(e){return e.includes(r.join("."))})),u=s.length||c,p=r.some((function(e,n){return y.includes(r.slice(0,n+1).join("."))}));if(m&&!u)return!1;var f=p&&t.isRequired?"missing":u?"invalid":l?"present":"none";return(0,L.jsx)($e.u,{position:"bottom",content:He[f].title,intent:He[f].intent,children:(0,L.jsx)(Be.V,{intent:He[f].intent,onClick:function(){var e=s.find(Qe);i(e?ge(e.stack.entries):r)},children:t.name},t.name)},t.name)})).filter(Boolean);return r.length?r:(0,L.jsx)(on,{children:"Nothing to display."})};return(0,L.jsx)(ee.OS,{identifier:"run-preview",axis:"horizontal",first:(0,L.jsxs)(an,{children:[(0,L.jsxs)(tn,{children:[(0,L.jsx)(nn,{children:"Errors"}),v.length?v.map((function(e,n){return(0,L.jsx)(cn,{error:e.error,onHighlight:i},n)})):(0,L.jsxs)(X.x,{flex:{direction:"row",gap:4,alignItems:"center"},children:[(0,L.jsx)(ie.JO,{name:"check_circle",color:U.w.Green500}),"No errors"]})]}),(0,L.jsxs)(tn,{children:[(0,L.jsx)(nn,{children:"Config actions:"}),(0,L.jsxs)(X.x,{flex:{direction:"column",gap:8},padding:{top:4,bottom:20},children:[(0,L.jsx)(We,{onScaffoldMissingConfig:c,missingNodes:y,disabled:!y.length}),(0,L.jsx)(Ye,{onRemoveExtraPaths:l,extraNodes:x,disabled:!x.length})]})]})]}),firstInitialPercent:50,firstMinSize:150,second:(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)("div",{style:{overflowY:"scroll",width:"100%",height:"100%"},children:[(0,L.jsxs)(ln,{children:[(0,L.jsxs)(tn,{children:[(0,L.jsx)(nn,{children:"Runtime"}),(0,L.jsx)(rn,{children:P([],Object.keys(C).map((function(e){return{name:e,isRequired:!1}})))})]}),((null===w||void 0===w?void 0:w.fields.length)||0)>0&&(0,L.jsxs)(tn,{children:[(0,L.jsx)(nn,{children:"Resources"}),(0,L.jsx)(rn,{children:P(["resources"],(null===w||void 0===w?void 0:w.fields)||[])})]})]}),(0,L.jsxs)(tn,{children:[(0,L.jsx)(nn,{children:"asset"===r?"Assets (Ops)":"Ops"}),(0,L.jsx)(rn,{children:P([k?"ops":"solids"],(k?null===S||void 0===S?void 0:S.fields:null===N||void 0===N?void 0:N.fields)||[])})]}),(0,L.jsx)("div",{style:{height:50}})]}),(0,L.jsx)("div",{style:{position:"absolute",top:0,right:0,padding:"12px 15px 0px 10px",background:"rgba(255,255,255,0.7)"},children:(0,L.jsx)(Ve.X,{label:"Errors Only",checked:m,onChange:function(){return h(!m)}})})]})})},en=(0,m.Ps)(ve||(ve=(0,i.Z)(["\n  fragment RunPreviewValidationFragment on PipelineConfigValidationResult {\n    __typename\n    ... on RunConfigValidationInvalid {\n      errors {\n        ...RunPreviewValidationErrors\n      }\n    }\n    ... on PipelineNotFoundError {\n      message\n    }\n    ... on InvalidSubsetError {\n      message\n    }\n    ...PythonErrorFragment\n  }\n\n  fragment RunPreviewValidationErrors on PipelineConfigValidationError {\n    reason\n    message\n    stack {\n      entries {\n        __typename\n        ... on EvaluationStackPathEntry {\n          fieldName\n        }\n        ... on EvaluationStackListItemEntry {\n          listIndex\n        }\n        ... on EvaluationStackMapKeyEntry {\n          mapKey\n        }\n        ... on EvaluationStackMapValueEntry {\n          mapKey\n        }\n      }\n    }\n    ... on MissingFieldConfigError {\n      field {\n        name\n      }\n    }\n    ... on MissingFieldsConfigError {\n      fields {\n        name\n      }\n    }\n    ... on FieldNotDefinedConfigError {\n      fieldName\n    }\n    ... on FieldsNotDefinedConfigError {\n      fieldNames\n    }\n  }\n\n  ","\n"])),Ze.B),nn=c.ZP.div.withConfig({displayName:"RunPreview__SectionTitle",componentId:"sc-1d5bfcs-0"})(["color:",";text-transform:uppercase;font-size:12px;margin-bottom:8px;"],U.w.Gray400),tn=c.ZP.div.withConfig({displayName:"RunPreview__Section",componentId:"sc-1d5bfcs-1"})(["margin-top:14px;margin-left:10px;"]),rn=c.ZP.div.withConfig({displayName:"RunPreview__ItemSet",componentId:"sc-1d5bfcs-2"})(["display:flex;flex-direction:row;flex-wrap:wrap;gap:4px;"]),on=c.ZP.div.withConfig({displayName:"RunPreview__ItemsEmptyNotice",componentId:"sc-1d5bfcs-3"})(["font-size:13px;padding-top:7px;padding-bottom:7px;"]),an=c.ZP.div.withConfig({displayName:"RunPreview__ErrorListContainer",componentId:"sc-1d5bfcs-4"})(["margin-left:10px;overflow-y:scroll;height:100%;"]),sn=c.ZP.div.withConfig({displayName:"RunPreview__ErrorRowContainer",componentId:"sc-1d5bfcs-5"})(["text-align:left;font-size:13px;white-space:pre-wrap;word-break:break-word;font-family:",";cursor:pointer;display:flex;flex-direction:row;align-items:flex-start;border-bottom:1px solid #ccc;padding:8px;margin:8px 12px 0 -8px;&:last-child{border-bottom:0;margin-bottom:15px;}",""],Je.b.monospace,(function(e){return e.hoverable&&"&:hover {\n      background: ".concat(U.w.Gray50,";\n    }\n  ")})),ln=c.ZP.div.withConfig({displayName:"RunPreview__RuntimeAndResourcesSection",componentId:"sc-1d5bfcs-6"})(["display:flex;gap:12px;@media (max-width:800px){flex-direction:column;}"]),cn=function(e){var n=e.error,t=e.onHighlight,i=null,r=null;Qe(n)?(i=n.message,r=n):i=n;var o=i;return"string"===typeof i&&i.length>400&&(o=function(e){var n=e.indexOf("{");-1===n&&(n=e.indexOf(". "));-1===n&&(n=400);return e.substr(0,n)+"... "}(i)),(0,L.jsxs)(sn,{hoverable:!!r,onClick:function(){return r&&t(ge(r.stack.entries))},children:[(0,L.jsx)("div",{style:{paddingRight:4},children:(0,L.jsx)(ie.JO,{name:"error",color:U.w.Red500})}),(0,L.jsxs)("div",{children:[o,o!==i&&(0,L.jsxs)(L.Fragment,{children:["\xa0",(0,L.jsx)(Ge.Z,{onClick:function(){return(0,ce._)({body:(0,L.jsx)("div",{style:{whiteSpace:"pre-wrap"},children:i})})},children:"View all"})]})]})]})};function dn(e,n){if(!n||"object"!==typeof n)return!1;if(0===e.length)return!0;var t=(0,Le.Z)(e),i=t[0];return dn(t.slice(1),n[i])}var un,pn,fn=t(80610),mn=t(33547),hn=t(76341),gn=function e(n,t){var i=t[n];switch(i.__typename){case"CompositeConfigType":if(i.isSelector)return"<selector>";var r,o={},s=(0,a.Z)(i.fields);try{for(s.s();!(r=s.n()).done;){var l=r.value,c=l.name,d=l.isRequired,u=l.configTypeKey;d&&(o[c]=e(u,t))}}catch(p){s.e(p)}finally{s.f()}return o;case"ArrayConfigType":return[];case"MapConfigType":return{};case"NullableConfigType":return e(i.typeParamKeys[0],t);case"EnumConfigType":return i.values.map((function(e){return e.value})).join("|");case"ScalarUnionConfigType":return e(i.scalarTypeKey,t);case"RegularConfigType":return{String:"",Int:0,Float:0,Bool:!0,Any:"AnyType"}[i.key];default:(0,hn.UT)(i)}},xn=function(e){var n=e.allConfigTypes,t=e.rootConfigType,i=function(e){var n,t={},i=(0,a.Z)(e);try{for(i.s();!(n=i.n()).done;){var r=n.value;t[r.key]=r}}catch(o){i.e(o)}finally{i.f()}return t}(n);return gn(t.key,i)},yn="The YAML you provided couldn't be parsed. Please fix the syntax errors and try again.",vn=function(e,n){switch(n.type){case"preview-loading":return(0,l.Z)((0,l.Z)({},e),{},{previewLoading:n.payload});case"set-preview":var t=n.payload,i=t.preview,r=t.previewedDocument,o=t.previewLoading;return(0,l.Z)((0,l.Z)({},e),{},{preview:i,previewedDocument:r,previewLoading:o});case"toggle-tag-editor":return(0,l.Z)((0,l.Z)({},e),{},{tagEditorOpen:n.payload});case"toggle-config-loading":return(0,l.Z)((0,l.Z)({},e),{},{configLoading:n.payload});case"set-editor-help-context":return(0,l.Z)((0,l.Z)({},e),{},{editorHelpContext:n.payload});default:return e}},jn=function(e){var n=e.launchpadType,t=e.children;return"asset"===n?(0,L.jsxs)(X.x,{flex:{direction:"row"},border:{side:"top",width:1,color:U.w.KeylineGray},padding:{right:12,vertical:8},children:[(0,L.jsx)("div",{style:{flexGrow:1}}),t]}):(0,L.jsx)("div",{style:{position:"absolute",bottom:12,right:12,zIndex:1},children:t})},bn={preview:null,previewLoading:!1,previewedDocument:null,configLoading:!1,editorHelpContext:null,tagEditorOpen:!1},wn=function(e){var n,t,i,c=e.launchpadType,d=e.session,m=e.onSave,h=e.partitionSets,g=e.pipeline,x=e.repoAddress,y=(0,p.x)(),v=b.useReducer(vn,bn),j=(0,s.Z)(v,2),S=j[0],N=j[1],C=(0,de.xz)(x.location).permissions.canLaunchPipelineExecution,k=b.useRef(!1),P=b.useRef(null),E=b.useRef(null),_=b.useRef(0),I=g.isJob,Z=b.useMemo((function(){return d.tags||[]}),[d]),A=(0,l.Z)((0,l.Z)({},(0,we.$)(x)),{},{pipelineName:g.name,solidSelection:d.solidSelection||void 0,assetSelection:null===(n=d.assetSelection)||void 0===n?void 0:n.map((function(e){return{path:e.assetKey.path}}))}),K=(0,f.a)(En,{variables:{selector:A,mode:null===d||void 0===d?void 0:d.mode},partialRefetch:!0}),O=null===K||void 0===K||null===(t=K.data)||void 0===t?void 0:t.runConfigSchemaOrError;b.useEffect((function(){return k.current=!0,function(){k.current=!1}}));var M,D,z=function(e){m(e)},T="RunConfigSchema"===(null===O||void 0===O?void 0:O.__typename)?O:void 0,F="ModeNotFoundError"===(null===O||void 0===O?void 0:O.__typename)?O:void 0,R=function(){var e=(0,r.Z)(u().mark((function e(n){var t,i,r,o,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _.current+=1,t=_.current,i=Cn(n),N({type:"preview-loading",payload:!0}),e.next=6,y.query({fetchPolicy:"no-cache",query:kn,variables:{runConfigData:i,pipeline:A,mode:d.mode||"default"}});case 6:return r=e.sent,o=r.data,k.current&&(a=t===_.current,N({type:"set-preview",payload:{preview:o,previewedDocument:i,previewLoading:!a&&S.previewLoading}})),e.abrupt("return",xe(i,o.isPipelineConfigValid));case 10:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),G=function(e){var n=d.base?Z.filter((function(n){var t,i;return(null===(t=d.base)||void 0===t?void 0:t.tags)&&!(null!==(i=d.base)&&void 0!==i&&i.tags.some((function(e){return e.key===n.key&&e.value===n.value})))&&!e.some((function(e){return e.key===n.key}))})):[];return[].concat((0,o.Z)(e),(0,o.Z)(n))},$=function(){var e=(0,r.Z)(u().mark((function e(n){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.tags.map(Sn),z({base:{presetName:n.name,tags:t},name:n.name,runConfigYaml:n.runConfigYaml||"",solidSelection:n.solidSelection,solidSelectionQuery:null===n.solidSelection?"*":n.solidSelection.join(","),mode:n.mode,tags:G(t),needsRefresh:!1});case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),B=function(){var e=(0,r.Z)(u().mark((function e(n,t,i,r){var o,a,s,l,c,p,f;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Y(),e.prev=1,o=d.base,e.next=5,y.query({query:Se.Fp,variables:{repositorySelector:n,partitionSetName:t,partitionName:i}});case 5:if(a=e.sent,(s=a.data)&&s.partitionSetOrError&&"PartitionSet"===s.partitionSetOrError.__typename&&s.partitionSetOrError.partition){e.next=10;break}return W(),e.abrupt("return");case 10:l=s.partitionSetOrError.partition,c=[],"PythonError"===l.tagsOrError.__typename?(0,ce._)({body:(0,L.jsx)(ue.T,{error:l.tagsOrError})}):c=l.tagsOrError.results.map(Sn),"PythonError"===l.runConfigOrError.__typename?(p="",(0,ce._)({body:(0,L.jsx)(ue.T,{error:l.runConfigOrError})})):p=l.runConfigOrError.yaml,f=r||l.solidSelection,z({name:l.name,base:Object.assign({},o,{partitionName:l.name,tags:c}),runConfigYaml:p,solidSelection:f,solidSelectionQuery:null===f?"*":f.join(","),mode:l.mode,tags:G(c),needsRefresh:!1}),e.next=20;break;case 18:e.prev=18,e.t0=e.catch(1);case 20:W();case 21:case"end":return e.stop()}}),e,null,[[1,18]])})));return function(n,t,i,r){return e.apply(this,arguments)}}(),q=function(){var e=(0,r.Z)(u().mark((function e(n){var t,i,r,o,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!("presetName"in n)){e.next=5;break}return t=n.presetName,(i=g.presets.find((function(e){return e.name===t})))&&$((0,l.Z)((0,l.Z)({},i),{},{solidSelection:d.solidSelection||i.solidSelection})),e.abrupt("return");case 5:if(r=n.partitionName,o=n.partitionsSetName,a=(0,we.$)(x),!r){e.next=12;break}return Y(),e.next=11,B(a,o,r,d.solidSelection);case 11:W();case 12:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),H=function(){return N({type:"toggle-tag-editor",payload:!0})},Y=function(){return N({type:"toggle-config-loading",payload:!0})},W=function(){return N({type:"toggle-config-loading",payload:!1})},oe=S.preview,se=S.previewLoading,me=S.previewedDocument,he=S.configLoading,ge=S.editorHelpContext,ye=S.tagEditorOpen,ve=b.useMemo((function(){var e=d.base,n=d.needsRefresh;return e&&n&&("presetName"in e||e.partitionsSetName&&e.partitionName)?e:null}),[d]);"asset"===c&&(M="Materialize"),h.results.length&&d.base&&"partitionsSetName"in d.base&&!d.base.partitionName&&(D="This job is partitioned. Are you sure you want to launch a run without a partition specified?");var Ne=(0,Pe.C)().LaunchRootExecutionButton;return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(ee.OS,{axis:"vertical",identifier:"execution",firstMinSize:100,firstInitialPercent:75,first:(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(Ee.f,{isLoading:he,message:"Generating configuration..."}),(0,L.jsxs)(fn.a,{children:[(0,L.jsx)(Se.KC,{pipeline:g,partitionSets:h.results,base:d.base,onSaveSession:z,onSelectPreset:$,onSelectPartition:B,repoAddress:x,assetSelection:d.assetSelection}),(0,L.jsx)(Pn,{}),"asset"===c?(0,L.jsx)(ne.oi,{readOnly:!0,value:d.assetSelection?d.assetSelection.map((function(e){return(0,fe.Je)(e.assetKey)})).join(", "):"*"}):(0,L.jsx)(ze,{serverProvidedSubsetError:"InvalidSubsetError"===(null===oe||void 0===oe?void 0:oe.isPipelineConfigValid.__typename)?oe.isPipelineConfigValid:void 0,pipelineName:g.name,value:d.solidSelection||null,query:d.solidSelectionQuery||null,onChange:function(e,n){z({solidSelection:e,solidSelectionQuery:n})},flattenGraphs:d.flattenGraphs,onFlattenGraphsChange:function(e){z({flattenGraphs:e})},repoAddress:x}),I?(0,L.jsx)("span",{}):(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(Pn,{}),(0,L.jsx)(ke,{modes:g.modes,modeError:F,onModeChange:function(e){z({mode:e})},modeName:d.mode})]}),(0,L.jsx)(mn.U,{tagsFromDefinition:g.tags,tagsFromSession:Z,onChange:function(e){var n={},t=[];e.forEach((function(e){e.key in n||(n[e.key]=e.value,t.push(e))})),z({tags:t})},open:ye,onRequestClose:function(){return N({type:"toggle-tag-editor",payload:!1})}}),(0,L.jsx)("div",{style:{flex:1}}),(0,L.jsx)(pe.b,{shortcutLabel:"\u2325T",shortcutFilter:function(e){return"KeyT"===e.code&&e.altKey},onShortcut:H,children:(0,L.jsx)(te.zx,{onClick:H,icon:(0,L.jsx)(ie.JO,{name:"edit"}),children:"Edit tags"})}),(0,L.jsx)(Pn,{}),(0,L.jsx)(ee.Uj,{axis:"horizontal",container:E})]}),g.tags.length||Z.length?(0,L.jsx)(X.x,{padding:{vertical:8,left:12,right:0},border:{side:"bottom",width:1,color:U.w.Gray200},children:(0,L.jsx)(mn.x,{tagsFromDefinition:g.tags,tagsFromSession:Z,onRequestEdit:H})}):null,ve?(0,L.jsx)(X.x,{padding:{vertical:8,horizontal:12},border:{side:"bottom",width:1,color:U.w.Gray200},children:(0,L.jsxs)(re.Z,{direction:"row",spacing:8,alignItems:"center",children:[(0,L.jsx)(ie.JO,{name:"warning",color:U.w.Yellow500}),(0,L.jsxs)("div",{children:[(0,be.Uz)(x)," has been manually refreshed, and this configuration may now be out of date."]}),(0,L.jsx)(te.zx,{intent:"primary",onClick:function(){return q(ve)},disabled:S.configLoading,children:"Refresh config"}),(0,L.jsx)(te.zx,{onClick:function(){z({needsRefresh:!1})},children:"Dismiss"})]})}):null,(0,L.jsx)(ee.OS,{ref:E,axis:"horizontal",identifier:"execution-editor",firstMinSize:100,firstInitialPercent:70,first:(0,L.jsx)(V,{ref:P,readOnly:!1,configSchema:T,configCode:d.runConfigYaml,onConfigChange:function(e){z({runConfigYaml:e})},onHelpContextChange:function(e){J(ge,e)||N({type:"set-editor-help-context",payload:e})},checkConfig:R}),second:(0,L.jsx)(Q,{context:ge,allInnerTypes:(null===T||void 0===T?void 0:T.allConfigTypes)||[]})})]}),second:(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(Ee.f,{isLoading:se,message:T?"Checking config...":"Loading config schema..."}),(0,L.jsx)(Xe,{launchpadType:c,document:me,validation:oe?oe.isPipelineConfigValid:null,solidSelection:d.solidSelection,runConfigSchema:T,onHighlightPath:function(e){var n;return null===(n=P.current)||void 0===n?void 0:n.moveCursorToPath(e)},onRemoveExtraPaths:function(e){return function(e){try{var n,t=w.Qc(Cn(d.runConfigYaml)),i=(0,a.Z)(e);try{for(i.s();!(n=i.n()).done;){var r=n.value;Nn(t,r)}}catch(o){i.e(o)}finally{i.f()}z({runConfigYaml:w.Pz(t)})}catch(o){return void(0,ce._)({title:"Invalid YAML",body:yn})}}(e)},onScaffoldMissingConfig:function(){var e=T?xn(T):{};try{var n=w.Qc(Cn(d.runConfigYaml)),t=ae()(e,n),i=w.Pz(t);z({runConfigYaml:i})}catch(r){(0,ce._)({title:"Invalid YAML",body:yn})}}})]})}),(0,L.jsx)(jn,{launchpadType:c,children:(0,L.jsx)(Ne,{title:M,warning:D,hasLaunchPermission:C,pipelineName:g.name,getVariables:function(){if(d){var e=Cn(d.runConfigYaml);try{w.Qc(e)}catch(n){return void(0,ce._)({title:"Invalid YAML",body:yn})}return{executionParams:{runConfigData:e,selector:(0,l.Z)((0,l.Z)({},A),{},{assetSelection:d.assetSelection?d.assetSelection.map((function(e){return{path:e.assetKey.path}})):void 0}),mode:d.mode||"default",executionMetadata:{tags:le()([].concat((0,o.Z)(d.solidSelectionQuery?[{key:je.H.SolidSelection,value:d.solidSelectionQuery}]:[]),(0,o.Z)(null!==d&&void 0!==d&&d.base&&(null===d||void 0===d?void 0:d.base).presetName?[{key:je.H.PresetName,value:(null===d||void 0===d?void 0:d.base).presetName}]:[]),(0,o.Z)(Z.map(Sn)),(0,o.Z)(g.tags.map(Sn))),(function(e){return e.key}))}}}}},disabled:"PipelineConfigValidationValid"!==(null===oe||void 0===oe||null===(i=oe.isPipelineConfigValid)||void 0===i?void 0:i.__typename),behavior:"open"})})]})},Sn=function(e){return{key:e.key,value:e.value}},Nn=function(e,n){for(var t=n.split("."),i=0;i<t.length-1;i++)if("undefined"===typeof(e=e[t[i]]))return;var r=t.pop();r&&delete e[r]},Cn=function(e){return(e||"").trim()||"{}"},kn=(0,m.Ps)(un||(un=(0,i.Z)(["\n  query PreviewConfigQuery(\n    $pipeline: PipelineSelector!\n    $runConfigData: RunConfigData!\n    $mode: String!\n  ) {\n    isPipelineConfigValid(pipeline: $pipeline, runConfigData: $runConfigData, mode: $mode) {\n      ...ConfigEditorValidationFragment\n      ...RunPreviewValidationFragment\n    }\n  }\n\n  ","\n  ","\n"])),he,en),Pn=c.ZP.div.withConfig({displayName:"LaunchpadSession__SessionSettingsSpacer",componentId:"sc-1pg2cql-0"})(["width:5px;"]),En=(0,m.Ps)(pn||(pn=(0,i.Z)(["\n  query PipelineExecutionConfigSchemaQuery($selector: PipelineSelector!, $mode: String) {\n    runConfigSchemaOrError(selector: $selector, mode: $mode) {\n      ...LaunchpadSessionRunConfigSchemaFragment\n    }\n  }\n\n  fragment LaunchpadSessionRunConfigSchemaFragment on RunConfigSchemaOrError {\n    __typename\n    ... on RunConfigSchema {\n      ...ConfigEditorRunConfigSchemaFragment\n    }\n    ... on ModeNotFoundError {\n      ...LaunchpadSessionModeNotFound\n    }\n  }\n\n  fragment LaunchpadSessionModeNotFound on ModeNotFoundError {\n    message\n  }\n\n  ","\n"])),me)},44969:function(e,n,t){t.d(n,{U:function(){return c}});var i=t(95764),r=t(17912),o=t(34595),a=t(89646),s=(t(325),t(80610)),l=t(32289),c=function(e){return(0,l.jsx)(r.OS,{axis:"vertical",identifier:"execution",firstInitialPercent:75,firstMinSize:100,first:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(s.a,{children:(0,l.jsx)(o.$,{purpose:"section"})}),(0,l.jsx)(a.t,(0,i.Z)({},e))]}),second:(0,l.jsx)("div",{})})}},6364:function(e,n,t){t.d(n,{m:function(){return s}});var i=t(17912),r=(t(325),t(33214)),o=t(80610),a=t(32289),s=function(){return(0,a.jsx)(i.OS,{axis:"vertical",identifier:"execution",firstInitialPercent:75,firstMinSize:100,first:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.f,{isLoading:!0,message:"Loading pipeline and partition sets..."}),(0,a.jsx)(o.a,{})]}),second:(0,a.jsx)(r.f,{isLoading:!0,message:"Loading pipeline and partition sets..."})})}},33214:function(e,n,t){t.d(n,{f:function(){return s}});var i=t(922),r=t(6466),o=t(34595),a=(t(325),t(32289)),s=function(e){var n=e.isLoading,t=e.message;return(0,a.jsx)(l,{isLoading:n,children:(0,a.jsxs)(r.Z,{direction:"row",spacing:8,alignItems:"center",children:[(0,a.jsx)(o.$,{purpose:"body-text"}),(0,a.jsx)("div",{children:t})]})})},l=i.ZP.div.withConfig({displayName:"LoadingOverlay__LoadingOverlayContainer",componentId:"sc-1tqulki-0"})(["position:absolute;left:0;right:0;top:0;bottom:0;background-color:#fff;z-index:20;display:",";align-items:center;justify-content:center;opacity:",";transition:opacity 150ms linear;transition-delay:300ms;"],(function(e){return e.isLoading?"flex":"none"}),(function(e){return e.isLoading?"0.7":"0"}))},80610:function(e,n,t){t.d(n,{a:function(){return o}});var i=t(922),r=t(7838),o=i.ZP.div.withConfig({displayName:"SessionSettingsBar",componentId:"sc-6lzkvu-0"})(["color:white;display:flex;position:relative;border-bottom:1px solid ",";background:",";align-items:center;height:47px;padding:8px 10px;"],r.w.Gray200,r.w.White)},33547:function(e,n,t){t.d(n,{U:function(){return x},x:function(){return y}});var i=t(59019),r=t(19065),o=t(922),a=t(8358),s=t(6466),l=t(32030),c=t(11831),d=t(88863),u=t(75453),p=t(75497),f=t(325),m=t(27719),h=t(28064),g=t(32289),x=function(e){var n=e.tagsFromDefinition,t=void 0===n?[]:n,o=e.tagsFromSession,x=void 0===o?[]:o,y=e.open,v=e.onChange,b=e.onRequestClose,w=f.useState((function(){return x.length?x:[{key:"",value:""}]})),S=(0,r.Z)(w,2),N=S[0],C=S[1];f.useEffect((function(){y||C(x.length?x:[{key:"",value:""}])}),[x,y]);var k=N.map((function(e){return{key:e.key.trim(),value:e.value.trim()}})).filter((function(e){return e.key&&e.value})),P=N.map((function(e){return{key:e.key.trim(),value:e.value.trim()}})).filter((function(e){return!e.key!==!e.value})),E=function(){P.length||(v(k),b())},_=N===x||!!P.length,I=function(e,n,t){C((function(r){return[].concat((0,i.Z)(r.slice(0,t)),[{key:e,value:n}],(0,i.Z)(r.slice(t+1)))}))};return(0,g.jsxs)(a.Vq,{icon:"info",onClose:b,style:{minWidth:700},title:"Add tags to run",isOpen:y,children:[(0,g.jsx)(a.a7,{children:(0,g.jsxs)(s.Z,{spacing:16,direction:"column",children:[t.length?(0,g.jsxs)(s.Z,{direction:"column",spacing:8,children:[(0,g.jsx)(l.x,{margin:{left:2},style:{fontSize:"13px",fontWeight:500},children:"Tags from definition:"}),(0,g.jsx)(j,{children:t.map((function(e,n){var t=e.key;return N.some((function(e){return e.key===t}))?(0,g.jsx)(c.u,{content:"Overriden by custom tag value",placement:"top",children:(0,g.jsx)("span",{style:{opacity:.2},children:(0,g.jsx)(h.i,{tag:e},n)})},t):(0,g.jsx)(h.i,{tag:e},t)}))})]}):null,(0,g.jsxs)(l.x,{flex:{direction:"column",gap:12},children:[(0,g.jsx)("div",{children:"Custom tags:"}),(0,g.jsx)(l.x,{flex:{direction:"column",gap:8},children:N.map((function(e,n){var t=e.key,r=e.value;return(0,g.jsxs)("div",{style:{display:"flex",flexDirection:"row",gap:8},children:[(0,g.jsx)(d.oi,{placeholder:"Tag Key",value:t,onChange:function(e){return I(e.target.value,r,n)}}),(0,g.jsx)(d.oi,{placeholder:"Tag Value",value:r,onChange:function(e){return I(t,e.target.value,n)}}),(0,g.jsx)(u.zx,{disabled:1===N.length&&!t.trim()&&!r.trim(),onClick:function(){return function(e){C((function(n){return 0===e&&1===n.length?[{key:"",value:""}]:[].concat((0,i.Z)(n.slice(0,e)),(0,i.Z)(n.slice(e+1)))}))}(n)},icon:(0,g.jsx)(p.JO,{name:"delete"}),children:"Remove"})]},n)}))}),(0,g.jsx)(l.x,{margin:{left:2},flex:{direction:"row"},children:(0,g.jsx)(u.zx,{onClick:function(){C((function(e){return[].concat((0,i.Z)(e),[{key:"",value:""}])}))},icon:(0,g.jsx)(p.JO,{name:"add_circle"}),children:"Add custom tag"})})]})]})}),(0,g.jsxs)(a.cN,{children:[(0,g.jsx)(u.zx,{onClick:b,children:"Cancel"}),(0,g.jsx)(m.b,{shortcutLabel:"\u2325Enter",shortcutFilter:function(e){return"Enter"===e.code&&e.altKey},onShortcut:E,children:(0,g.jsx)(u.zx,{intent:"primary",onClick:E,disabled:_,children:"Apply"})})]})]})},y=function(e){var n=e.tagsFromSession,t=e.tagsFromDefinition,i=e.actions;return(0,g.jsx)(v,{children:(0,g.jsxs)(j,{children:[t?t.map((function(e,t){var r=e.key;return n.some((function(e){return e.key===r}))?(0,g.jsx)(c.u,{content:"Overriden by custom tag value",placement:"top",children:(0,g.jsx)("span",{style:{opacity:.2},children:(0,g.jsx)(h.i,{tag:e,actions:i},t)})},r):(0,g.jsx)(h.i,{tag:e,actions:i},t)})):void 0,n.map((function(e,n){return(0,g.jsx)(h.i,{tag:e,actions:i},n)}))]})})},v=o.ZP.div.withConfig({displayName:"TagEditor__Container",componentId:"f3ti0i-0"})(["align-items:flex-start;display:flex;flex-direction:row;"]),j=o.ZP.div.withConfig({displayName:"TagEditor__TagList",componentId:"f3ti0i-1"})(["display:flex;flex:1;flex-wrap:wrap;gap:4px;"])},20346:function(e,n,t){t.d(n,{D:function(){return I}});var i,r=t(99500),o=t(85358),a=t(19065),s=t(922),l=t(95550),c=t.n(l),d=t(49148),u=t(3159),p=t(11831),f=t(12745),m=t(75497),h=t(8358),g=t(32030),x=t(88863),y=t(34595),v=t(7838),j=t(75453),b=t(325),w=t(14156),S=t(12436),N=t(82360),C=t(1520),k=t(26306),P=t(32289),E=["...","\x07","\b","\f","\n","\r","\t","\v","\0","|",",","[","]"," "],_=["...","\\a","\\b","\\f","\\n","\\r","\\t","\\v","\\0","|",'","',"[","]",'" "'],I=function(e){var n=e.isOpen,t=e.partitionDefinitionName,i=e.close,r=e.repoAddress,s=e.refetch,l=e.onCreated,u=b.useState(""),I=(0,a.Z)(u,2),K=I[0],O=I[1],M=(0,d.D)(Z),D=(0,a.Z)(M,1)[0],z=b.useState(!1),T=(0,a.Z)(z,2),L=T[0],F=T[1],R=b.useMemo((function(){return 0===K.length||!E.some((function(e){return K.includes(e)}))}),[K]),G=R?null:(0,P.jsx)("span",{"data-testid":(0,C.N)("warning-icon"),children:(0,P.jsx)(p.u,{content:(0,P.jsxs)("div",{children:["The following substrings are not allowed:"," ",(0,P.jsxs)(f.fv,{children:["[",_.join(","),"]"]})]}),placement:"top",children:(0,P.jsx)(m.JO,{name:"warning"})})}),$=function(){var e=(0,o.Z)(c().mark((function e(){var n,o,a,d;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(R){e.next=2;break}return e.abrupt("return");case 2:return F(!0),e.next=5,D({variables:{repositorySelector:(0,k.$)(r),partitionsDefName:t||"",partitionKey:K},refetchQueries:["PartitionHealthQuery","AssetEventsQuery"]});case 5:o=e.sent,F(!1),a=null===(n=o.data)||void 0===n?void 0:n.addDynamicPartition,e.t0=null===a||void 0===a?void 0:a.__typename,e.next="PythonError"===e.t0?11:"DuplicateDynamicPartitionError"===e.t0?13:"UnauthorizedError"===e.t0?15:"AddDynamicPartitionSuccess"===e.t0?17:22;break;case 11:return(0,w._)({title:"Could not create environment variable",body:(0,P.jsx)(S.T,{error:a})}),e.abrupt("break",24);case 13:return(0,w._)({title:"Could not add partition",body:"A partition this name already exists."}),e.abrupt("break",24);case 15:return(0,w._)({title:"Could not add partition",body:null!==(d=a.message)&&void 0!==d?d:"You do not have permission to do this."}),e.abrupt("break",24);case 17:return null===s||void 0===s||s(),l(K),i(),(0,N.y)(),e.abrupt("break",24);case 22:return(0,w._)({title:"Could not add partition",body:"An unknown error occurred."}),e.abrupt("break",24);case 24:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,P.jsxs)(h.Vq,{isOpen:n,canEscapeKeyClose:!0,canOutsideClickClose:!0,title:(0,P.jsxs)(g.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,P.jsx)(m.JO,{name:"add_circle",size:24}),(0,P.jsxs)("div",{children:["Add a partition",t?(0,P.jsxs)(P.Fragment,{children:[" ","for ",(0,P.jsx)(f.fv,{children:t})]}):""]})]}),children:[(0,P.jsx)(h.a7,{children:(0,P.jsxs)(g.x,{flex:{direction:"column",gap:6},children:[(0,P.jsx)("div",{children:"Partition name"}),(0,P.jsx)(A,{children:(0,P.jsx)(x.oi,{"data-testid":(0,C.N)("partition-input"),rightElement:null!==G&&void 0!==G?G:L?(0,P.jsx)(y.$,{purpose:"body-text"}):void 0,disabled:L,placeholder:"name",value:K,onChange:function(e){return O(e.target.value)},onKeyPress:function(e){"Enter"===e.code&&$()},strokeColor:R?void 0:v.w.Red500,ref:b.useCallback((function(e){e&&e.focus()}),[])})})]})}),(0,P.jsxs)(h.cN,{children:[(0,P.jsx)(j.zx,{onClick:i,children:"Cancel"}),(0,P.jsx)(j.zx,{intent:"primary",onClick:$,disabled:!R,"data-testid":(0,C.N)("save-partition-button"),children:"Save"})]})]})},Z=(0,u.Ps)(i||(i=(0,r.Z)(["\n  mutation AddDynamicPartitionMutation(\n    $partitionsDefName: String!\n    $partitionKey: String!\n    $repositorySelector: RepositorySelector!\n  ) {\n    addDynamicPartition(\n      partitionsDefName: $partitionsDefName\n      partitionKey: $partitionKey\n      repositorySelector: $repositorySelector\n    ) {\n      __typename\n      ... on AddDynamicPartitionSuccess {\n        partitionsDefName\n        partitionKey\n      }\n      ... on PythonError {\n        message\n        stack\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n"]))),A=s.ZP.div.withConfig({displayName:"CreatePartitionDialog__PartitionBox",componentId:"rv8duh-0"})(["display:flex;flex-direction:row;gap:8;align-items:center;> *:first-child{flex-grow:1;}"])},29399:function(e,n,t){t.d(n,{x:function(){return L}});var i=t(59019),r=t(19065),o=t(922),a=t(81034),s=t(95764),l=t(325),c=t(46424),d=t(32030),u=t(50346),p=t(7838),f=t(75497),m=t(8412),h=t(762),g=t(54268),x=t(88863),y=t(8803),v=t(32289),j=["allTags","selectedTags","setSelectedTags","rowHeight","renderDropdown","searchPlaceholder"],b=function(e,n){return(0,v.jsx)(g.V,{children:(0,v.jsxs)(d.x,{flex:{direction:"row",gap:4,justifyContent:"space-between",alignItems:"center"},children:[(0,v.jsx)("span",{children:e}),(0,v.jsx)(d.x,{style:{cursor:"pointer"},onClick:n.remove,children:(0,v.jsx)(f.JO,{name:"close"})})]})},e)},w=function(e){var n=e.allTags,t=e.placeholder,o=e.selectedTags,a=e.setSelectedTags,p=e.renderTag,g=e.renderDropdownItem,x=e.renderDropdown,j=e.dropdownStyles,w=e.renderTagList,k=e.rowHeight,P=void 0===k?32:k,E=l.useState(!1),_=(0,r.Z)(E,2),I=_[0],Z=_[1],A=(0,y.S)(),K=A.viewport,O=A.containerProps,M=l.useMemo((function(){var e=(0,v.jsx)(d.x,{style:(0,s.Z)({maxHeight:"500px",overflowY:"auto"},j),children:(0,v.jsx)(c.aV,{style:{outline:"none",marginRight:-5,paddingRight:5},rowCount:n.length,rowHeight:P,rowRenderer:function(e){var t=n[e.index],r=o.includes(t),s=function(){a(r?o.filter((function(e){return e!==t})):[].concat((0,i.Z)(o),[t]))};return g?(0,v.jsx)("div",{children:g(t,{toggle:s,selected:r})},t):function(e,n){return(0,v.jsx)("label",{children:(0,v.jsx)(m.sN,{text:(0,v.jsxs)(d.x,{flex:{alignItems:"center",gap:8},children:[(0,v.jsx)(u.X,{checked:n.selected,onChange:n.toggle}),(0,v.jsx)("span",{children:e})]}),tagName:"div"})})}(t,{toggle:s,selected:r})},width:K.width,height:Math.min(n.length*P,7.5*P)})});return x?x(e,{width:K.width+"px",allTags:n}):(0,v.jsx)(m.v2,{style:{width:K.width+"px"},children:e})}),[n,j,x,g,P,o,a,K.width]),D=l.useRef(null),z=l.useMemo((function(){if(0===o.length)return(0,v.jsx)(N,{children:t||"Select tags"});var e=o.map((function(e){return(p||b)(e,{remove:function(n){a(o.filter((function(n){return n!==e}))),n.stopPropagation()}})}));return w?w(e):e}),[o,w,t,p,a]);return(0,v.jsx)(h.J,{placement:"bottom-start",isOpen:I,onInteraction:function(e,n){var t,i=null===n||void 0===n?void 0:n.target;I&&i instanceof HTMLElement&&((null===(t=D.current)||void 0===t?void 0:t.contains(i))||Z(e))},content:(0,v.jsx)("div",{ref:D,children:M}),targetTagName:"div",children:(0,v.jsxs)(S,(0,s.Z)((0,s.Z)({onClick:function(){Z((function(e){return!e}))}},O),{},{children:[(0,v.jsx)(C,{flex:{grow:1,gap:6},children:z}),(0,v.jsx)("div",{style:{cursor:"pointer"},children:(0,v.jsx)(f.JO,{name:I?"expand_less":"expand_more"})})]}))})},S=o.ZP.div.withConfig({displayName:"TagSelector__Container",componentId:"sc-2s01qj-0"})(["display:flex;flex-direction:row;align-items:center;",""],x.x7),N=o.ZP.div.withConfig({displayName:"TagSelector__Placeholder",componentId:"sc-2s01qj-1"})(["color:",";"],p.w.Gray400),C=(0,o.ZP)(d.x).withConfig({displayName:"TagSelector__TagsContainer",componentId:"sc-2s01qj-2"})(["overflow-x:auto;&::-webkit-scrollbar{display:none;}scrollbar-width:none;-ms-overflow-style:none;"]),k=function(e){var n=l.useState(""),t=(0,r.Z)(n,2),i=t[0],o=t[1],c=e.allTags,u=e.selectedTags,p=e.setSelectedTags,f=(e.rowHeight,e.renderDropdown),h=e.searchPlaceholder,g=(0,a.Z)(e,j),y=l.useMemo((function(){return""===i.trim()?c:c.filter((function(e){return e.toLowerCase().includes(i.toLowerCase())}))}),[c,i]);return(0,v.jsx)(w,(0,s.Z)((0,s.Z)({},g),{},{allTags:y,selectedTags:u,setSelectedTags:p,dropdownStyles:{width:"auto"},renderDropdown:l.useCallback((function(e,n){return(0,v.jsx)(m.v2,{style:{width:"auto"},children:(0,v.jsxs)(d.x,{flex:{direction:"column"},children:[(0,v.jsx)(d.x,{flex:{direction:"column",grow:1},padding:{horizontal:8},children:(0,v.jsx)(x.oi,{value:i,onChange:function(e){return o(e.target.value)},placeholder:h||"Search",ref:function(e){e&&e.focus()}})}),f?f(e,n):e]})})}),[f,i,h])}))},P=t(75453),E=t(6291),_=t(47619),I=t(69305),Z=t(59549),A=t(1520),K=t(20346),O=t(14156),M=t(74386),D=t(26961),z=function(e){var n=e.value,t=e.onChange,i=e.partitionKeys,o=e.isTimeseries,a=l.useState(""),s=(0,r.Z)(a,2),c=s[0],d=s[1],u=l.useMemo((function(){return JSON.stringify(i)}),[i]);l.useEffect((function(){var e=JSON.parse(u);d(o?(0,D.Z8)(n,e):n.join(", "))}),[n,u,o]);var p=l.useMemo((function(){return 0===i.length?"Loading partition keys...":function(e,n){if(0===e.length)return"";if(e.length<4||!n)return"ex: ".concat(e[0],", ").concat(e[1]);return"ex: ".concat(e[0],", ").concat(e[1],", [").concat(e[2],"...").concat(e[e.length-1],"]")}(i,o)}),[i,o]),m=function(e){try{t((0,D.w$)(i,c).selectedKeys)}catch(n){e.preventDefault(),(0,O._)({body:n.message})}};return(0,v.jsx)(x.oi,{"data-testid":(0,A.N)("dimension-range-input"),placeholder:p,value:c,style:{display:"flex",width:"100%",flex:1,flexGrow:1},onChange:function(e){return d(e.currentTarget.value)},onKeyDown:function(e){"Enter"===e.key&&m(e)},onBlur:m,rightElement:(0,v.jsx)(M.C,{style:{display:c.length?"initial":"none"},onClick:function(){return t([])},children:(0,v.jsx)(f.JO,{name:"cancel"})})})};var T=t(54920),L=function(e){var n=e.selected,t=e.setSelected,o=e.partitionKeys,a=e.health,s=e.dimensionType,c=e.partitionDefinitionName,u=e.repoAddress,p=e.refetch,f=s===I.iVC.TIME_WINDOW,m=s===I.iVC.DYNAMIC,h=l.useState(!1),g=(0,r.Z)(h,2),x=g[0],y=g[1];return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)(d.x,{flex:{direction:"row",alignItems:"center",gap:8},padding:{vertical:4},children:[(0,v.jsx)(d.x,{flex:{direction:"column"},style:{flex:1},children:f?(0,v.jsx)(z,{value:n,partitionKeys:o,onChange:t,isTimeseries:f}):(0,v.jsx)(F,{allPartitions:o,selectedPartitions:n,setSelectedPartitions:t,health:a,setShowCreatePartition:y,isDynamic:m})}),f&&(0,v.jsx)(P.zx,{small:!0,onClick:function(){return t(o.slice(-1))},"data-testid":(0,A.N)("latest-partition-button"),children:"Latest"}),(0,v.jsx)(P.zx,{small:!0,onClick:function(){return t(o)},children:"All"})]}),(0,v.jsxs)(d.x,{margin:{bottom:8},children:[m&&(0,v.jsxs)(G,{flex:{direction:"row",alignItems:"center",gap:8},onClick:function(){y(!0)},children:[(0,v.jsx)(R,{name:"add",size:24}),(0,v.jsx)("div",{children:"Add a partition"})]}),f&&(0,v.jsx)(T.b,{partitionNames:o,health:a,splitPartitions:!f,selected:n,onSelect:t})]}),u&&(0,v.jsx)(K.D,{isOpen:x,partitionDefinitionName:c,repoAddress:u,close:function(){y(!1)},refetch:p,onCreated:function(e){t([].concat((0,i.Z)(n),[e]))}},x?"1":"0")]})},F=function(e){var n=e.allPartitions,t=e.selectedPartitions,i=e.setSelectedPartitions,r=e.setShowCreatePartition,o=e.isDynamic,a=e.health,s=l.useCallback((function(e){var t=n.indexOf(e);return"ranges"in a?(0,v.jsx)(E.d,{status:(0,_.h1)(a.ranges,t)}):(0,v.jsx)(Z.O_,{size:10,status:a.runStatusForPartitionKey(e,t)})}),[n,a]);return(0,v.jsx)(v.Fragment,{children:(0,v.jsx)(k,{allTags:n,selectedTags:t,setSelectedTags:i,placeholder:"Select a partition or create one",renderDropdownItem:l.useCallback((function(e,n){return(0,v.jsx)("label",{children:(0,v.jsx)(m.sN,{tagName:"div",text:(0,v.jsxs)(d.x,{flex:{alignItems:"center",gap:12},children:[(0,v.jsx)(u.X,{checked:n.selected,onChange:n.toggle}),s(e),(0,v.jsx)("span",{children:e})]})})})}),[s]),renderDropdown:l.useCallback((function(e,n){var a=n.width,s=n.allTags,l=s.every((function(e){return t.includes(e)}));return(0,v.jsx)(m.v2,{style:{width:a},children:(0,v.jsxs)(d.x,{padding:4,children:[o&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(d.x,{flex:{direction:"column"},children:(0,v.jsx)(m.sN,{tagName:"div",text:(0,v.jsxs)(d.x,{flex:{direction:"row",alignItems:"center",gap:12},children:[(0,v.jsx)(R,{name:"add",size:24}),(0,v.jsx)("span",{children:"Add partition"})]}),onClick:function(){r(!0)}})}),(0,v.jsx)(m.R,{})]}),s.length?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("label",{children:(0,v.jsx)(m.sN,{tagName:"div",text:(0,v.jsxs)(d.x,{flex:{alignItems:"center",gap:12},children:[(0,v.jsx)(u.X,{checked:l,onChange:function(){i(l?[]:s)}}),(0,v.jsxs)("span",{children:["Select all (",s.length,")"]})]})})}),e]}):(0,v.jsx)("div",{style:{padding:"6px 6px 0px 6px",color:p.w.Gray700},children:"No matching partitions found"})]})})}),[o,t,i,r]),renderTagList:function(e){return e.length>4?(0,v.jsxs)("span",{children:[e.length," partitions selected"]}):e},searchPlaceholder:"Filter partitions"})})},R=(0,o.ZP)(f.JO).withConfig({displayName:"DimensionRangeWizard__StyledIcon",componentId:"sc-1azk227-0"})(["font-weight:500;"]),G=(0,o.ZP)(d.x).withConfig({displayName:"DimensionRangeWizard__LinkText",componentId:"sc-1azk227-1"})(["color:",";cursor:pointer;&:hover{text-decoration:underline;}> *{height:24px;align-content:center;line-height:24px;}"],p.w.Link)},57872:function(e,n,t){t.d(n,{Q:function(){return a}});var i=t(89646),r=(t(325),t(33902)),o=t(32289),a=function(e){var n=e.isGraph,t=e.repoAddress,a=e.result;return"PipelineSnapshotNotFoundError"===a.__typename?(0,o.jsx)(i.t,{icon:"error",title:n?"Graph snapshot not found":"Pipeline snapshot not found",description:a.message}):"PipelineNotFoundError"===a.__typename?(0,o.jsx)(i.t,{icon:"error",title:n?"Graph not found":"Pipeline not found",description:a.message}):"RepositoryNotFoundError"===a.__typename?(0,o.jsx)(i.t,{icon:"error",title:"".concat(t?(0,r.Uz)(t):"Definitions"," not found"),description:a.message}):"PythonError"===a.__typename?(0,o.jsx)(i.t,{icon:"error",title:"Query error",description:a.message}):(0,o.jsx)("span",{})}},23196:function(e,n,t){t.d(n,{b:function(){return o}});var i=t(325),r=t(82348),o=function(e,n){var t=e.pipelineName,o=i.useMemo((function(){return n?"Job: ".concat(t):"Pipeline: ".concat(t)}),[n,t]);(0,r.j)(o)}},74386:function(e,n,t){t.d(n,{C:function(){return a}});var i=t(922),r=t(75497),o=t(7838),a=i.ZP.button.withConfig({displayName:"ClearButton",componentId:"sc-1rz1pk2-0"})(["background:transparent;border:none;cursor:pointer;margin:0 -2px 0 0;padding:2px;","{background-color:",";transition:background-color 100ms linear;}:hover ",",:focus ","{background-color:",";}:active ","{background-color:",";}:focus{outline:none;}"],r.a1,o.w.Gray400,r.a1,r.a1,o.w.Gray700,r.a1,o.w.Dark)},14848:function(e,n,t){t.d(n,{G:function(){return o}});var i=t(922),r=t(8546),o=i.ZP.div.withConfig({displayName:"Version",componentId:"sc-1arl6ei-0"})(["font-family:",";font-size:16px;overflow:hidden;text-overflow:ellipsis;"],r.b.monospace)}}]);
//# sourceMappingURL=318.e1f472a8.chunk.js.map